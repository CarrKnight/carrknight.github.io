<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>POSEIDON tutorial</title>
  <meta name="description" content="This is a basic tutorial on how to use POSEIDON and set it up to explore basic fishery problems. I try to cover everything that does not require changing any of the Java code">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="POSEIDON tutorial" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a basic tutorial on how to use POSEIDON and set it up to explore basic fishery problems. I try to cover everything that does not require changing any of the Java code" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="POSEIDON tutorial" />
  
  <meta name="twitter:description" content="This is a basic tutorial on how to use POSEIDON and set it up to explore basic fishery problems. I try to cover everything that does not require changing any of the Java code" />
  

<meta name="author" content="Ernesto Carrella">


<meta name="date" content="2018-09-12">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="changing-policies-within-the-simulation.html">
<link rel="next" href="references-1.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-58894263-1', 'auto');
  ga('send', 'pageview');

</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tutorial for POSEIDON</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#pre-requisites"><i class="fa fa-check"></i><b>2.1.1</b> Pre-requisites</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#downloading-poseidon"><i class="fa fa-check"></i><b>2.1.2</b> Downloading POSEIDON</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#starting-poseidon"><i class="fa fa-check"></i><b>2.2</b> Starting POSEIDON</a></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#the-scenario-selection-screen"><i class="fa fa-check"></i><b>2.3</b> The scenario selection screen</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="basic-model-operation.html"><a href="basic-model-operation.html"><i class="fa fa-check"></i><b>3</b> Basic Model Operation</a><ul>
<li class="chapter" data-level="3.1" data-path="basic-model-operation.html"><a href="basic-model-operation.html#the-first-model-run"><i class="fa fa-check"></i><b>3.1</b> The first model run</a></li>
<li class="chapter" data-level="3.2" data-path="basic-model-operation.html"><a href="basic-model-operation.html#poseidon-in-motion"><i class="fa fa-check"></i><b>3.2</b> POSEIDON in motion</a></li>
<li class="chapter" data-level="3.3" data-path="basic-model-operation.html"><a href="basic-model-operation.html#tracking-and-inspecting-agents"><i class="fa fa-check"></i><b>3.3</b> Tracking and Inspecting Agents</a></li>
<li class="chapter" data-level="3.4" data-path="basic-model-operation.html"><a href="basic-model-operation.html#aggregate-data"><i class="fa fa-check"></i><b>3.4</b> Aggregate Data</a></li>
<li class="chapter" data-level="3.5" data-path="basic-model-operation.html"><a href="basic-model-operation.html#fishing-fronts"><i class="fa fa-check"></i><b>3.5</b> Fishing Fronts</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="changing-basic-parameters.html"><a href="changing-basic-parameters.html"><i class="fa fa-check"></i><b>4</b> Changing Basic Parameters</a><ul>
<li class="chapter" data-level="4.1" data-path="changing-basic-parameters.html"><a href="changing-basic-parameters.html#types-of-parameters"><i class="fa fa-check"></i><b>4.1</b> Types of parameters</a></li>
<li class="chapter" data-level="4.2" data-path="changing-basic-parameters.html"><a href="changing-basic-parameters.html#larger-fishing-fronts"><i class="fa fa-check"></i><b>4.2</b> Larger fishing fronts</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="map.html"><a href="map.html"><i class="fa fa-check"></i><b>5</b> Change the base map</a><ul>
<li class="chapter" data-level="5.1" data-path="map.html"><a href="map.html#load-a-realistic-map"><i class="fa fa-check"></i><b>5.1</b> Load a realistic map</a></li>
<li class="chapter" data-level="5.2" data-path="map.html"><a href="map.html#download-other-maps"><i class="fa fa-check"></i><b>5.2</b> Download other maps</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="different-behaviours.html"><a href="different-behaviours.html"><i class="fa fa-check"></i><b>6</b> Different behaviours</a><ul>
<li class="chapter" data-level="6.1" data-path="different-behaviours.html"><a href="different-behaviours.html#strategies"><i class="fa fa-check"></i><b>6.1</b> Strategies</a></li>
<li class="chapter" data-level="6.2" data-path="different-behaviours.html"><a href="different-behaviours.html#change-destination-strategy"><i class="fa fa-check"></i><b>6.2</b> Change Destination Strategy</a></li>
<li class="chapter" data-level="6.3" data-path="different-behaviours.html"><a href="different-behaviours.html#gravitational-search-algorithm"><i class="fa fa-check"></i><b>6.3</b> Gravitational Search Algorithm</a></li>
<li class="chapter" data-level="6.4" data-path="different-behaviours.html"><a href="different-behaviours.html#heatmap-algorithm"><i class="fa fa-check"></i><b>6.4</b> Heatmap algorithm</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="batch.html"><a href="batch.html"><i class="fa fa-check"></i><b>7</b> YAML Scearios and Batch Runs</a><ul>
<li class="chapter" data-level="7.1" data-path="batch.html"><a href="batch.html#yaml"><i class="fa fa-check"></i><b>7.1</b> YAML</a></li>
<li class="chapter" data-level="7.2" data-path="batch.html"><a href="batch.html#batch-runs"><i class="fa fa-check"></i><b>7.2</b> Batch Runs</a></li>
<li class="chapter" data-level="7.3" data-path="batch.html"><a href="batch.html#sample-batch-run"><i class="fa fa-check"></i><b>7.3</b> Sample Batch Run</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="policies.html"><a href="policies.html"><i class="fa fa-check"></i><b>8</b> Policies</a><ul>
<li class="chapter" data-level="8.1" data-path="policies.html"><a href="policies.html#policy-in-poseidon"><i class="fa fa-check"></i><b>8.1</b> Policy in POSEIDON</a></li>
<li class="chapter" data-level="8.2" data-path="policies.html"><a href="policies.html#example-setup"><i class="fa fa-check"></i><b>8.2</b> Example Setup</a></li>
<li class="chapter" data-level="8.3" data-path="policies.html"><a href="policies.html#no-regulations"><i class="fa fa-check"></i><b>8.3</b> No Regulations</a></li>
<li class="chapter" data-level="8.4" data-path="policies.html"><a href="policies.html#total-allowable-quota"><i class="fa fa-check"></i><b>8.4</b> Total Allowable Quota</a></li>
<li class="chapter" data-level="8.5" data-path="policies.html"><a href="policies.html#individual-tradeable-quotas"><i class="fa fa-check"></i><b>8.5</b> Individual Tradeable Quotas</a></li>
<li class="chapter" data-level="8.6" data-path="policies.html"><a href="policies.html#fines"><i class="fa fa-check"></i><b>8.6</b> Fines</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="changing-policies-within-the-simulation.html"><a href="changing-policies-within-the-simulation.html"><i class="fa fa-check"></i><b>9</b> Changing policies within the simulation</a><ul>
<li class="chapter" data-level="9.1" data-path="changing-policies-within-the-simulation.html"><a href="changing-policies-within-the-simulation.html#dynamic-changes"><i class="fa fa-check"></i><b>9.1</b> Dynamic changes</a></li>
<li class="chapter" data-level="9.2" data-path="changing-policies-within-the-simulation.html"><a href="changing-policies-within-the-simulation.html#switch-to-quotas-2-years-in-the-simulation"><i class="fa fa-check"></i><b>9.2</b> Switch to quotas 2 years in the simulation</a></li>
<li class="chapter" data-level="9.3" data-path="changing-policies-within-the-simulation.html"><a href="changing-policies-within-the-simulation.html#closed-season"><i class="fa fa-check"></i><b>9.3</b> Closed Season</a></li>
<li class="chapter" data-level="9.4" data-path="changing-policies-within-the-simulation.html"><a href="changing-policies-within-the-simulation.html#draw-mpas-on-the-fly"><i class="fa fa-check"></i><b>9.4</b> Draw MPAs on the fly</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="applying-poseidon.html"><a href="applying-poseidon.html"><i class="fa fa-check"></i><b>10</b> Applying POSEIDON</a><ul>
<li class="chapter" data-level="10.1" data-path="applying-poseidon.html"><a href="applying-poseidon.html#flexible-scenario"><i class="fa fa-check"></i><b>10.1</b> Flexible Scenario</a></li>
<li class="chapter" data-level="10.2" data-path="applying-poseidon.html"><a href="applying-poseidon.html#how-to-use-data-in-poseidon"><i class="fa fa-check"></i><b>10.2</b> How to use data in POSEIDON</a></li>
<li class="chapter" data-level="10.3" data-path="applying-poseidon.html"><a href="applying-poseidon.html#the-peter-snapper-fishery"><i class="fa fa-check"></i><b>10.3</b> The Peter Snapper Fishery</a></li>
<li class="chapter" data-level="10.4" data-path="applying-poseidon.html"><a href="applying-poseidon.html#adding-boats-to-the-right-ports"><i class="fa fa-check"></i><b>10.4</b> Adding boats to the right ports</a></li>
<li class="chapter" data-level="10.5" data-path="applying-poseidon.html"><a href="applying-poseidon.html#adding-knowledge-about-boat-operations"><i class="fa fa-check"></i><b>10.5</b> Adding knowledge about boat operations</a></li>
<li class="chapter" data-level="10.6" data-path="applying-poseidon.html"><a href="applying-poseidon.html#the-simplest-possible-biology-input"><i class="fa fa-check"></i><b>10.6</b> The simplest possible biology input</a></li>
<li class="chapter" data-level="10.7" data-path="applying-poseidon.html"><a href="applying-poseidon.html#calibrating-catchability"><i class="fa fa-check"></i><b>10.7</b> Calibrating Catchability</a></li>
<li class="chapter" data-level="10.8" data-path="applying-poseidon.html"><a href="applying-poseidon.html#validation"><i class="fa fa-check"></i><b>10.8</b> Validation</a></li>
<li class="chapter" data-level="10.9" data-path="applying-poseidon.html"><a href="applying-poseidon.html#references"><i class="fa fa-check"></i><b>10.9</b> References</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://link.springer.com/article/10.1007/s11625-018-0579-9" target="blank">Read about POSEIDON here</a></li>
<li><a href="https://github.com/CarrKnight/POSEIDON" target="blank">Get POSEIDON here</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">POSEIDON tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="applying-poseidon" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Applying POSEIDON</h1>
<div id="flexible-scenario" class="section level2">
<h2><span class="header-section-number">10.1</span> Flexible Scenario</h2>
<p>In this section we go through a proper attempt at using POSEIDON straight from translating data and knowledge about the fishery to calibration and validation. It is still all fake data, of course, but I hope it is useful as an exercise.</p>
<p>In this section we will focus on the <code>Flexible</code> scenario. It is very similar to the <code>Abstract</code> scenario we have dealt with in the previous chapters but it has a few modifications to make it easy to add multiple populations, regulations and ports.<br />
The downside of it is that these modifications are still unsupported by the GUI, so most of the edits will have to be done on the YAML file themselves.</p>
<p>You can run the <code>Flexible</code> scenario just by selecting it in the scenario screen.</p>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/flexible_1.mp4" type="video/mp4">
</video>
</div>
<p>When started it looks and feels much like the <code>Abstract</code> example except for having two ports on by default.</p>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/flexible_2.mp4" type="video/mp4">
</video>
</div>
<p>It pays to take a look at the YAML file of the scenario since we are supposed to work primarily on this:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="fu">Flexible:</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2">  <span class="fu">allowFriendshipsAcrossPorts:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4">    <span class="fu">Diffusing Logistic:</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;5000.0&#39;</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">        <span class="fu">Independent Logistic Grower:</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9">          <span class="fu">steepness:</span><span class="at"> uniform 0.6 0.8</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10">      <span class="fu">maxInitialCapacity:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11">      <span class="fu">minInitialCapacity:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13">      <span class="fu">speciesName:</span><span class="at"> Species 0</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14">  <span class="fu">cheaters:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15">  <span class="fu">fisherDefinitions:</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16">  <span class="kw">-</span> <span class="fu">departingStrategy:</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17">      <span class="fu">Fixed Rest:</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18">        <span class="fu">hoursBetweenEachDeparture:</span><span class="at"> </span><span class="st">&#39;12.0&#39;</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19">    <span class="fu">destinationStrategy:</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20">      <span class="fu">Imitator-Explorator:</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21">        <span class="fu">alwaysCopyBest:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22">        <span class="fu">automaticallyIgnoreAreasWhereFishNeverGrows:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23">        <span class="fu">automaticallyIgnoreMPAs:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24">        <span class="fu">backtracksOnBadExploration:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25">        <span class="fu">dropInUtilityNeededForUnfriend:</span><span class="at"> </span><span class="st">&#39;-1.0&#39;</span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26">        <span class="fu">ignoreEdgeDirection:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27">        <span class="fu">ignoreFailedTrips:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28">        <span class="fu">maxInitialDistance:</span><span class="at"> -1.0</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29">        <span class="fu">objectiveFunction:</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30">          <span class="fu">Hourly Profit Objective:</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31">            <span class="fu">opportunityCosts:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32">        <span class="fu">probability:</span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33">          <span class="fu">Adaptive Probability:</span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34">            <span class="fu">explorationProbability:</span><span class="at"> </span><span class="st">&#39;0.2&#39;</span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35">            <span class="fu">explorationProbabilityMinimum:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36">            <span class="fu">imitationProbability:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37">            <span class="fu">incrementMultiplier:</span><span class="at"> </span><span class="st">&#39;0.02&#39;</span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38">        <span class="fu">stepSize:</span><span class="at"> uniform 1.0 10.0</span></a>
<a class="sourceLine" id="cb12-39" data-line-number="39">    <span class="fu">discardingStrategy:</span><span class="at"> No Discarding</span></a>
<a class="sourceLine" id="cb12-40" data-line-number="40">    <span class="fu">fishingStrategy:</span></a>
<a class="sourceLine" id="cb12-41" data-line-number="41">      <span class="fu">Until Full With Day Limit:</span></a>
<a class="sourceLine" id="cb12-42" data-line-number="42">        <span class="fu">daysAtSea:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb12-43" data-line-number="43">    <span class="fu">fuelTankSize:</span><span class="at"> </span><span class="st">&#39;100000.0&#39;</span></a>
<a class="sourceLine" id="cb12-44" data-line-number="44">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb12-45" data-line-number="45">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb12-46" data-line-number="46">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb12-47" data-line-number="47">        <span class="fu">meanCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb12-48" data-line-number="48">        <span class="fu">meanCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb12-49" data-line-number="49">        <span class="fu">standardDeviationCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb12-50" data-line-number="50">        <span class="fu">standardDeviationCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb12-51" data-line-number="51">    <span class="fu">gearStrategy:</span><span class="at"> Never Change Gear</span></a>
<a class="sourceLine" id="cb12-52" data-line-number="52">    <span class="fu">holdSize:</span><span class="at"> </span><span class="st">&#39;100.0&#39;</span></a>
<a class="sourceLine" id="cb12-53" data-line-number="53">    <span class="fu">hourlyVariableCost:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb12-54" data-line-number="54">    <span class="fu">initialFishersPerPort:</span></a>
<a class="sourceLine" id="cb12-55" data-line-number="55">      <span class="fu">Port 0:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb12-56" data-line-number="56">      <span class="fu">Port 1:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb12-57" data-line-number="57">    <span class="fu">literPerKilometer:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb12-58" data-line-number="58">    <span class="fu">logbook:</span><span class="at"> No Logbook</span></a>
<a class="sourceLine" id="cb12-59" data-line-number="59">    <span class="fu">regulation:</span><span class="at"> Anarchy</span></a>
<a class="sourceLine" id="cb12-60" data-line-number="60">    <span class="fu">speedInKmh:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb12-61" data-line-number="61">    <span class="fu">tags:</span><span class="at"> </span><span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb12-62" data-line-number="62">    <span class="fu">usePredictors:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-63" data-line-number="63">    <span class="fu">weatherStrategy:</span><span class="at"> Ignore Weather</span></a>
<a class="sourceLine" id="cb12-64" data-line-number="64">  <span class="fu">gasPricePerLiter:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb12-65" data-line-number="65">  <span class="fu">habitatInitializer:</span><span class="at"> All Sand</span></a>
<a class="sourceLine" id="cb12-66" data-line-number="66">  <span class="fu">mapInitializer:</span></a>
<a class="sourceLine" id="cb12-67" data-line-number="67">    <span class="fu">Simple Map:</span></a>
<a class="sourceLine" id="cb12-68" data-line-number="68">      <span class="fu">cellSizeInKilometers:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb12-69" data-line-number="69">      <span class="fu">coastalRoughness:</span><span class="at"> </span><span class="st">&#39;4.0&#39;</span></a>
<a class="sourceLine" id="cb12-70" data-line-number="70">      <span class="fu">depthSmoothing:</span><span class="at"> </span><span class="st">&#39;1000000.0&#39;</span></a>
<a class="sourceLine" id="cb12-71" data-line-number="71">      <span class="fu">height:</span><span class="at"> </span><span class="st">&#39;50.0&#39;</span></a>
<a class="sourceLine" id="cb12-72" data-line-number="72">      <span class="fu">maxLandWidth:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb12-73" data-line-number="73">      <span class="fu">width:</span><span class="at"> </span><span class="st">&#39;50.0&#39;</span></a>
<a class="sourceLine" id="cb12-74" data-line-number="74">  <span class="fu">mapMakerDedicatedRandomSeed:</span><span class="at"> </span><span class="dt">null</span></a>
<a class="sourceLine" id="cb12-75" data-line-number="75">  <span class="fu">market:</span></a>
<a class="sourceLine" id="cb12-76" data-line-number="76">    <span class="fu">Fixed Price Market:</span></a>
<a class="sourceLine" id="cb12-77" data-line-number="77">      <span class="fu">marketPrice:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb12-78" data-line-number="78">  <span class="fu">networkBuilder:</span></a>
<a class="sourceLine" id="cb12-79" data-line-number="79">    <span class="fu">Equal Out Degree:</span></a>
<a class="sourceLine" id="cb12-80" data-line-number="80">      <span class="fu">allowMutualFriendships:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb12-81" data-line-number="81">      <span class="fu">degree:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb12-82" data-line-number="82">      <span class="fu">equalOutDegree:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb12-83" data-line-number="83">  <span class="fu">plugins:</span><span class="at"> </span><span class="kw">[</span></a>
<a class="sourceLine" id="cb12-84" data-line-number="84">    <span class="kw">]</span></a>
<a class="sourceLine" id="cb12-85" data-line-number="85">  <span class="fu">portInitializer:</span></a>
<a class="sourceLine" id="cb12-86" data-line-number="86">    <span class="fu">Random Ports:</span></a>
<a class="sourceLine" id="cb12-87" data-line-number="87">      <span class="fu">numberOfPorts:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb12-88" data-line-number="88">  <span class="fu">portSwitching:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb12-89" data-line-number="89">  <span class="fu">weatherInitializer:</span></a>
<a class="sourceLine" id="cb12-90" data-line-number="90">    <span class="fu">Constant Weather:</span></a>
<a class="sourceLine" id="cb12-91" data-line-number="91">      <span class="fu">temperature:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb12-92" data-line-number="92">      <span class="fu">windOrientation:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb12-93" data-line-number="93">      <span class="fu">windSpeed:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a></code></pre></div>
<p>The main difference from the <code>Abstract</code> scenario is the presence of <code>fisherDefinitions</code> which is just a list (in yaml you can tell it’s a list because each item starts with <code>-</code>) of populations.
A population is described by the usual behavioural rules (strategies) as well as their number by port listed in <code>initialFishersPerPort</code>.</p>
</div>
<div id="how-to-use-data-in-poseidon" class="section level2">
<h2><span class="header-section-number">10.2</span> How to use data in POSEIDON</h2>
<p>As with all models, there are 3 basic uses for data in POSEIDON. It can be used either as:</p>
<ul>
<li><strong>Input</strong>: basically by using what we know to set some parameters directly (number of boats, geography, port locations and the like)</li>
<li><strong>Calibration</strong>: we use the data to select some parameters indirectly. For example we know how much was landed for the past 5 years and we want to find the catchability parameter that generate the same time series.</li>
<li><strong>Validation</strong>: we don’t use the data to set any parameters, we only use it after everything else is set to make sure the model makes sense (basically “out-of-sample” prediction error from statistics)</li>
</ul>
<p>Sometimes the way to use a particular datum is clear, other times it is up to the modeller to figure it out.</p>
<p>It should be said that often we just don’t have enough data. There are three basic approaches on how to setup the model when data doesn’t exist:</p>
<ul>
<li><strong>Guess</strong>: use expert knowledge or some basic theoretical result to model certain parameters. This is of course a much weaker parametrization than using real data but it is sometimes necessary</li>
<li><strong>Sensitivity Analysis</strong>: run the model multiple times for a large enough confidence interval around the parameters you do not know much about. This tends to be hard to do when there are a lot of uknowns unless you use a smart search strategy</li>
<li><strong>Worst Case Scenario</strong>: like sensitivity analysis but looking specifically for the worst possible combination of parameters. This is useful when we need to provide policy suggestions. It’s at least a way to know whether we can be sure not to make things worse off by intervening.</li>
</ul>
<p>POSEIDON of course has a lot of variables (say, boat speed or fuel consumption) and one might wonder why using it in data poor scenarios where a bio-economic model would only require at most a guess on global fishing mortality.<br />
Three reasons.<br />
First, it is often the case that we do have some knowledge about some details of the fishery which we wouldn’t be able to use when aggregating everything back to global fishing mortality (perhaps the overall number of boats, the price premium for plate-size fish or which port catches most of what).
Second, we might care deeply about the distribution of benefits and costs both in terms of human populations as well as geographical effects on the biology which call for a model that at least tracks these details.<br />
Third, a global fishing mortality guess papers over all the actual things we need to make a guess about. POSEIDON, when presented with absolute lack of any knowledge, forces you to be explicit about everything you do not know.<br />
At its simplest POSEIDON need to have some knowledge about the following:</p>
<ol style="list-style-type: decimal">
<li>Market
<ul>
<li>The ex-vessel price of fish caught</li>
</ul></li>
<li>Geography:
<ul>
<li>A decent enough bathymetry to distribute the fish in</li>
</ul></li>
<li>Management:
<ul>
<li>The policies in place (and if calibrating then also the changes in policies over time)</li>
</ul></li>
<li>Fishing Fleet:
<ul>
<li># of vessels, vessel capacity and speed</li>
<li>Gear type/catchability (usually by calibration)</li>
<li>Operational costs (fuel, logistics)</li>
<li>Maximum possible effort (max number of days out, max length of a trip)</li>
</ul></li>
<li>Biology:
<ul>
<li>For each species at least
<ul>
<li>Some form of carrying capacity</li>
<li>Current biomass</li>
<li>Some depth ranges where these fish live</li>
</ul></li>
</ul></li>
</ol>
</div>
<div id="the-peter-snapper-fishery" class="section level2">
<h2><span class="header-section-number">10.3</span> The Peter Snapper Fishery</h2>
<p>Let’s assume we want to study a basic made-up fishery: the Indonesian Petern Snapper fishery.
I would classify this as a medium-data fishery, since we have a decent knowledge of its human side while knowing basically nothing biologically <span class="citation">(after all, 80% of the catch comes from unassessed fisheries according to Costello et al. <a href="#ref-Costello2012">2012</a>)</span>.
Let’s start with some very basic knowledge:</p>
<ul>
<li>The fishery is located around Bali, say between lat-long <span class="math inline">\((114.5,-6.9)\)</span> and (127.6, -12.85)</li>
<li>It’s a single species fishery</li>
<li>We know too little about age structure so this will be a biomass-only model</li>
</ul>
<p>We can already add some of this knowledge in.
First, we want to add the right map. We have seen how to download maps in section <a href="map.html#map">5</a>; fortunately this particular map comes with POSEIDON in directory: <code>inputs/indonesia/indonesia_latlong.csv</code>. Let’s modify the mapInitializer:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb13-1" data-line-number="1">  <span class="fu">mapInitializer:</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">    <span class="fu">From File Map:</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3">      <span class="fu">gridWidthInCell:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">      <span class="fu">header:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5">      <span class="fu">latLong:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6">      <span class="fu">mapFile:</span><span class="at"> /home/carrknight/code/POSEIDON/inputs/indonesia/indonesia_latlong.csv</span></a></code></pre></div>
<p>The number of cells is set to 70 since that generates cells approximately 30km wide. This is useful as it allows us to ignore things like congestion or boats moving between cells as they fish.</p>
<p>We can also use a more detailed biology parameter; we still don’t know its parameters but we can prepare for them:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb14-1" data-line-number="1">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;500000000&#39;</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.5&#39;</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;1&#39;</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;0&#39;</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14">        <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15">          <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18">      <span class="fu">unfishable:</span><span class="at"> false</span></a></code></pre></div>
<p>This biology initializer looks complicated but it just involves a few things:</p>
<ul>
<li><code>carryingCapacity</code> controls the <span class="math inline">\(K\)</span> of the overall fishery.</li>
<li><code>Common Logistic Grower</code> means that recruitment is global (a single logistic growth for all the cells).</li>
<li><code>steepness</code> is the malthusian growth of the fish</li>
<li><code>initialBiomassAllocator</code> defines the current biomass ratio <span class="math inline">\(\frac{\text{Biomass Now}}{K}\)</span></li>
<li><code>initialCapacityAllocator</code> defines which areas of the ocean are habitable by this species</li>
<li><code>differentialPercentageToMove</code> and <code>percentageLimitOnDailyMovement</code> define the speed of fish movement. These numbers imply a very slow moving fish</li>
</ul>
<p>So far we don’t know enough to fill any of them.</p>
<p>Finally, since we don’t have the resources to field a serious behavioural survey, let’s stick with agents acting as simple explore-exploit-imitate agents with a flat 20% chance of exploration. It proved quite effective in our West Coast application.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb15-1" data-line-number="1">    <span class="fu">destinationStrategy:</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">      <span class="fu">Imitator-Explorator:</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3">        <span class="fu">alwaysCopyBest:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4">        <span class="fu">automaticallyIgnoreAreasWhereFishNeverGrows:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5">        <span class="fu">automaticallyIgnoreMPAs:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6">        <span class="fu">backtracksOnBadExploration:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7">        <span class="fu">dropInUtilityNeededForUnfriend:</span><span class="at"> </span><span class="st">&#39;-1.0&#39;</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8">        <span class="fu">ignoreEdgeDirection:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9">        <span class="fu">ignoreFailedTrips:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10">        <span class="fu">maxInitialDistance:</span><span class="at"> -1.0</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11">        <span class="fu">objectiveFunction:</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12">          <span class="fu">Hourly Profit Objective:</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13">            <span class="fu">opportunityCosts:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14">        <span class="fu">probability:</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15">          <span class="fu">Fixed Probability:</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16">            <span class="fu">explorationProbability:</span><span class="at"> </span><span class="st">&#39;0.2&#39;</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17">            <span class="fu">imitationProbability:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18">        <span class="fu">stepSize:</span><span class="at"> uniform 1.0 10.0</span></a></code></pre></div>
<p>Notice that we set <code>automaticallyIgnoreAreasWhereFishNeverGrows</code> to <code>true</code>. This has no effect now, but what it does is that it prevents fishers from wasting time exploring areas where the depth or habitat makes it impossible for Peter Snapper to live.<br />
Once all those modifications are done, the model looks like this:</p>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/start.mp4" type="video/mp4">
</video>
</div>
<p>This is yaml file now:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="fu">Flexible:</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">  <span class="fu">allowFriendshipsAcrossPorts:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;500000000&#39;</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.5&#39;</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;1&#39;</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;0&#39;</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16">        <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17">          <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20">      <span class="fu">unfishable:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21">  <span class="fu">cheaters:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-22" data-line-number="22">  <span class="fu">fisherDefinitions:</span></a>
<a class="sourceLine" id="cb16-23" data-line-number="23">  <span class="kw">-</span> <span class="fu">departingStrategy:</span></a>
<a class="sourceLine" id="cb16-24" data-line-number="24">      <span class="fu">Fixed Rest:</span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25">        <span class="fu">hoursBetweenEachDeparture:</span><span class="at"> </span><span class="st">&#39;12.0&#39;</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26">    <span class="fu">destinationStrategy:</span></a>
<a class="sourceLine" id="cb16-27" data-line-number="27">      <span class="fu">Imitator-Explorator:</span></a>
<a class="sourceLine" id="cb16-28" data-line-number="28">        <span class="fu">alwaysCopyBest:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-29" data-line-number="29">        <span class="fu">automaticallyIgnoreAreasWhereFishNeverGrows:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-30" data-line-number="30">        <span class="fu">automaticallyIgnoreMPAs:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-31" data-line-number="31">        <span class="fu">backtracksOnBadExploration:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-32" data-line-number="32">        <span class="fu">dropInUtilityNeededForUnfriend:</span><span class="at"> </span><span class="st">&#39;-1.0&#39;</span></a>
<a class="sourceLine" id="cb16-33" data-line-number="33">        <span class="fu">ignoreEdgeDirection:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-34" data-line-number="34">        <span class="fu">ignoreFailedTrips:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-35" data-line-number="35">        <span class="fu">maxInitialDistance:</span><span class="at"> -1.0</span></a>
<a class="sourceLine" id="cb16-36" data-line-number="36">        <span class="fu">objectiveFunction:</span></a>
<a class="sourceLine" id="cb16-37" data-line-number="37">          <span class="fu">Hourly Profit Objective:</span></a>
<a class="sourceLine" id="cb16-38" data-line-number="38">            <span class="fu">opportunityCosts:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-39" data-line-number="39">        <span class="fu">probability:</span></a>
<a class="sourceLine" id="cb16-40" data-line-number="40">          <span class="fu">Fixed Probability:</span></a>
<a class="sourceLine" id="cb16-41" data-line-number="41">            <span class="fu">explorationProbability:</span><span class="at"> </span><span class="st">&#39;0.2&#39;</span></a>
<a class="sourceLine" id="cb16-42" data-line-number="42">            <span class="fu">imitationProbability:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb16-43" data-line-number="43">        <span class="fu">stepSize:</span><span class="at"> uniform 1.0 10.0</span></a>
<a class="sourceLine" id="cb16-44" data-line-number="44">    <span class="fu">discardingStrategy:</span><span class="at"> No Discarding</span></a>
<a class="sourceLine" id="cb16-45" data-line-number="45">    <span class="fu">fishingStrategy:</span></a>
<a class="sourceLine" id="cb16-46" data-line-number="46">      <span class="fu">Until Full With Day Limit:</span></a>
<a class="sourceLine" id="cb16-47" data-line-number="47">        <span class="fu">daysAtSea:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb16-48" data-line-number="48">    <span class="fu">fuelTankSize:</span><span class="at"> </span><span class="st">&#39;100000.0&#39;</span></a>
<a class="sourceLine" id="cb16-49" data-line-number="49">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb16-50" data-line-number="50">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb16-51" data-line-number="51">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb16-52" data-line-number="52">        <span class="fu">meanCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb16-53" data-line-number="53">        <span class="fu">meanCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb16-54" data-line-number="54">        <span class="fu">standardDeviationCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb16-55" data-line-number="55">        <span class="fu">standardDeviationCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb16-56" data-line-number="56">    <span class="fu">gearStrategy:</span><span class="at"> Never Change Gear</span></a>
<a class="sourceLine" id="cb16-57" data-line-number="57">    <span class="fu">holdSize:</span><span class="at"> </span><span class="st">&#39;100.0&#39;</span></a>
<a class="sourceLine" id="cb16-58" data-line-number="58">    <span class="fu">hourlyVariableCost:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb16-59" data-line-number="59">    <span class="fu">initialFishersPerPort:</span></a>
<a class="sourceLine" id="cb16-60" data-line-number="60">      <span class="fu">Port 0:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb16-61" data-line-number="61">      <span class="fu">Port 1:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb16-62" data-line-number="62">    <span class="fu">literPerKilometer:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb16-63" data-line-number="63">    <span class="fu">logbook:</span><span class="at"> No Logbook</span></a>
<a class="sourceLine" id="cb16-64" data-line-number="64">    <span class="fu">regulation:</span><span class="at"> Anarchy</span></a>
<a class="sourceLine" id="cb16-65" data-line-number="65">    <span class="fu">speedInKmh:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb16-66" data-line-number="66">    <span class="fu">tags:</span><span class="at"> </span><span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb16-67" data-line-number="67">    <span class="fu">usePredictors:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-68" data-line-number="68">    <span class="fu">weatherStrategy:</span><span class="at"> Ignore Weather</span></a>
<a class="sourceLine" id="cb16-69" data-line-number="69">  <span class="fu">gasPricePerLiter:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb16-70" data-line-number="70">  <span class="fu">habitatInitializer:</span><span class="at"> All Sand</span></a>
<a class="sourceLine" id="cb16-71" data-line-number="71">  <span class="fu">mapInitializer:</span></a>
<a class="sourceLine" id="cb16-72" data-line-number="72">    <span class="fu">From File Map:</span></a>
<a class="sourceLine" id="cb16-73" data-line-number="73">      <span class="fu">gridWidthInCell:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb16-74" data-line-number="74">      <span class="fu">header:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-75" data-line-number="75">      <span class="fu">latLong:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-76" data-line-number="76">      <span class="fu">mapFile:</span><span class="at"> /home/carrknight/code/oxfish/inputs/indonesia/indonesia_latlong.csv</span></a>
<a class="sourceLine" id="cb16-77" data-line-number="77">  <span class="fu">mapMakerDedicatedRandomSeed:</span><span class="at"> </span><span class="dt">null</span></a>
<a class="sourceLine" id="cb16-78" data-line-number="78">  <span class="fu">market:</span></a>
<a class="sourceLine" id="cb16-79" data-line-number="79">    <span class="fu">Fixed Price Market:</span></a>
<a class="sourceLine" id="cb16-80" data-line-number="80">      <span class="fu">marketPrice:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb16-81" data-line-number="81">  <span class="fu">networkBuilder:</span></a>
<a class="sourceLine" id="cb16-82" data-line-number="82">    <span class="fu">Equal Out Degree:</span></a>
<a class="sourceLine" id="cb16-83" data-line-number="83">      <span class="fu">allowMutualFriendships:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-84" data-line-number="84">      <span class="fu">degree:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb16-85" data-line-number="85">      <span class="fu">equalOutDegree:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb16-86" data-line-number="86">  <span class="fu">plugins:</span><span class="at"> </span><span class="kw">[</span></a>
<a class="sourceLine" id="cb16-87" data-line-number="87">    <span class="kw">]</span></a>
<a class="sourceLine" id="cb16-88" data-line-number="88">  <span class="fu">portInitializer:</span></a>
<a class="sourceLine" id="cb16-89" data-line-number="89">    <span class="fu">Random Ports:</span></a>
<a class="sourceLine" id="cb16-90" data-line-number="90">      <span class="fu">numberOfPorts:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb16-91" data-line-number="91">  <span class="fu">portSwitching:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb16-92" data-line-number="92">  <span class="fu">weatherInitializer:</span></a>
<a class="sourceLine" id="cb16-93" data-line-number="93">    <span class="fu">Constant Weather:</span></a>
<a class="sourceLine" id="cb16-94" data-line-number="94">      <span class="fu">temperature:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb16-95" data-line-number="95">      <span class="fu">windOrientation:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb16-96" data-line-number="96">      <span class="fu">windSpeed:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a></code></pre></div>
</div>
<div id="adding-boats-to-the-right-ports" class="section level2">
<h2><span class="header-section-number">10.4</span> Adding boats to the right ports</h2>
<p>The fleet is the major component of POSEIDON and the one that require the most knowledge. There are a several ways to learn about it:</p>
<ul>
<li>Surveys: interviewing fishers (or, more likely, interviewing people who interview fishers)</li>
<li>Logbook data: if reliable, logbook data contains basically all the possible human data observable</li>
<li>VMS / Satellite: an alternative when logbook data is unreliable or not available</li>
<li>Formulas: there are quite a lot of handrules about how much a boat is expected to catch given its size or consume in gas according to their engine power, these could be used in the model.</li>
</ul>
<p>There are some basic facts about snapper fisheries in Indonesia we can use immediately:</p>
<ol style="list-style-type: decimal">
<li>Snapper sells on average for about 40,000 IDR per kg</li>
<li>Diesel costs about 10,000 IDR per liter</li>
</ol>
<p>Let’s also assume the Peter Snapper fishery is a licensed fishery and that:</p>
<ul>
<li>25 boats fish from Benoa</li>
<li>50 boats fish from Kupang</li>
</ul>
<p>Let’s add this to the model. First, let’s just agree to use IDR as currency. We want to add prices and gas costs:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb17-1" data-line-number="1">  <span class="fu">gasPricePerLiter:</span><span class="at"> </span><span class="st">&#39;10000&#39;</span></a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb18-1" data-line-number="1">  <span class="fu">market:</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">    <span class="fu">Fixed Price Market:</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">      <span class="fu">marketPrice:</span><span class="at"> </span><span class="st">&#39;40000.0&#39;</span></a></code></pre></div>
<p>Let’s define the ports now, in lat-long coordinates. You can grab them from google maps (an advantage in using lat-long coordinates). POSEIDON tries to place the port correctly if the coordinates are slightly too far inland or at sea, so there is no reason to worry about too much precision. POSEIDON however will throw an error if two ports share the same cell. In that case, merge the ports or increase the map resolution.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb19-1" data-line-number="1">  <span class="fu">portInitializer:</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">    <span class="fu">List of Ports:</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3">      <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4">        <span class="fu">Benoa:</span><span class="at"> 115.238843,-8.799605</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">        <span class="fu">Kupang:</span><span class="at"> 123.586249,-10.148044</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6">      <span class="fu">usingGridCoordinates:</span><span class="at"> false</span></a></code></pre></div>
<p>Notice <code>usingGridCoordinates</code> is set to false. When that is set to true you are to provide the coordinates in terms of POSEIDON grid instead of lat-long.<br />
Finally, let’s place fishers in the right port:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb20-1" data-line-number="1">    <span class="fu">initialFishersPerPort:</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">      <span class="fu">Benoa :</span><span class="at"> 25</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3">      <span class="fu">Kupang:</span><span class="at"> 50</span></a></code></pre></div>
<p>We can run the model now; it’s still very incomplete but at least there are the right number of boats and ports.</p>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/step1.mp4" type="video/mp4">
</video>
</div>
<p>This the YAML file so far:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="fu">Flexible:</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;500000000&#39;</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.5&#39;</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb21-12" data-line-number="12">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;1&#39;</span></a>
<a class="sourceLine" id="cb21-13" data-line-number="13">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;0&#39;</span></a>
<a class="sourceLine" id="cb21-14" data-line-number="14">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb21-15" data-line-number="15">        <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb21-16" data-line-number="16">          <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb21-17" data-line-number="17">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb21-18" data-line-number="18">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb21-19" data-line-number="19">      <span class="fu">unfishable:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-20" data-line-number="20">  <span class="fu">cheaters:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-21" data-line-number="21">  <span class="fu">fisherDefinitions:</span></a>
<a class="sourceLine" id="cb21-22" data-line-number="22">  <span class="kw">-</span> <span class="fu">departingStrategy:</span></a>
<a class="sourceLine" id="cb21-23" data-line-number="23">      <span class="fu">Fixed Rest:</span></a>
<a class="sourceLine" id="cb21-24" data-line-number="24">        <span class="fu">hoursBetweenEachDeparture:</span><span class="at"> </span><span class="st">&#39;12.0&#39;</span></a>
<a class="sourceLine" id="cb21-25" data-line-number="25">    <span class="fu">destinationStrategy:</span></a>
<a class="sourceLine" id="cb21-26" data-line-number="26">      <span class="fu">Imitator-Explorator:</span></a>
<a class="sourceLine" id="cb21-27" data-line-number="27">        <span class="fu">alwaysCopyBest:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-28" data-line-number="28">        <span class="fu">automaticallyIgnoreAreasWhereFishNeverGrows:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-29" data-line-number="29">        <span class="fu">automaticallyIgnoreMPAs:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-30" data-line-number="30">        <span class="fu">backtracksOnBadExploration:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-31" data-line-number="31">        <span class="fu">dropInUtilityNeededForUnfriend:</span><span class="at"> </span><span class="st">&#39;-1.0&#39;</span></a>
<a class="sourceLine" id="cb21-32" data-line-number="32">        <span class="fu">ignoreEdgeDirection:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-33" data-line-number="33">        <span class="fu">ignoreFailedTrips:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-34" data-line-number="34">        <span class="fu">maxInitialDistance:</span><span class="at"> -1.0</span></a>
<a class="sourceLine" id="cb21-35" data-line-number="35">        <span class="fu">objectiveFunction:</span></a>
<a class="sourceLine" id="cb21-36" data-line-number="36">          <span class="fu">Hourly Profit Objective:</span></a>
<a class="sourceLine" id="cb21-37" data-line-number="37">            <span class="fu">opportunityCosts:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-38" data-line-number="38">        <span class="fu">probability:</span></a>
<a class="sourceLine" id="cb21-39" data-line-number="39">          <span class="fu">Fixed Probability:</span></a>
<a class="sourceLine" id="cb21-40" data-line-number="40">            <span class="fu">explorationProbability:</span><span class="at"> </span><span class="st">&#39;0.2&#39;</span></a>
<a class="sourceLine" id="cb21-41" data-line-number="41">            <span class="fu">imitationProbability:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb21-42" data-line-number="42">        <span class="fu">stepSize:</span><span class="at"> uniform 1.0 10.0</span></a>
<a class="sourceLine" id="cb21-43" data-line-number="43">    <span class="fu">discardingStrategy:</span><span class="at"> No Discarding</span></a>
<a class="sourceLine" id="cb21-44" data-line-number="44">    <span class="fu">fishingStrategy:</span></a>
<a class="sourceLine" id="cb21-45" data-line-number="45">      <span class="fu">Until Full With Day Limit:</span></a>
<a class="sourceLine" id="cb21-46" data-line-number="46">        <span class="fu">daysAtSea:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb21-47" data-line-number="47">    <span class="fu">fuelTankSize:</span><span class="at"> </span><span class="st">&#39;100000.0&#39;</span></a>
<a class="sourceLine" id="cb21-48" data-line-number="48">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb21-49" data-line-number="49">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb21-50" data-line-number="50">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb21-51" data-line-number="51">        <span class="fu">meanCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb21-52" data-line-number="52">        <span class="fu">meanCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb21-53" data-line-number="53">        <span class="fu">standardDeviationCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb21-54" data-line-number="54">        <span class="fu">standardDeviationCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb21-55" data-line-number="55">    <span class="fu">gearStrategy:</span><span class="at"> Never Change Gear</span></a>
<a class="sourceLine" id="cb21-56" data-line-number="56">    <span class="fu">holdSize:</span><span class="at"> </span><span class="st">&#39;100.0&#39;</span></a>
<a class="sourceLine" id="cb21-57" data-line-number="57">    <span class="fu">hourlyVariableCost:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb21-58" data-line-number="58">    <span class="fu">initialFishersPerPort:</span></a>
<a class="sourceLine" id="cb21-59" data-line-number="59">      <span class="fu">Benoa :</span><span class="at"> 25</span></a>
<a class="sourceLine" id="cb21-60" data-line-number="60">      <span class="fu">Kupang:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb21-61" data-line-number="61">    <span class="fu">literPerKilometer:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb21-62" data-line-number="62">    <span class="fu">logbook:</span><span class="at"> No Logbook</span></a>
<a class="sourceLine" id="cb21-63" data-line-number="63">    <span class="fu">regulation:</span><span class="at"> Anarchy</span></a>
<a class="sourceLine" id="cb21-64" data-line-number="64">    <span class="fu">speedInKmh:</span><span class="at"> </span><span class="st">&#39;5.0&#39;</span></a>
<a class="sourceLine" id="cb21-65" data-line-number="65">    <span class="fu">tags:</span><span class="at"> </span><span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb21-66" data-line-number="66">    <span class="fu">usePredictors:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-67" data-line-number="67">    <span class="fu">weatherStrategy:</span><span class="at"> Ignore Weather</span></a>
<a class="sourceLine" id="cb21-68" data-line-number="68">  <span class="fu">gasPricePerLiter:</span><span class="at"> </span><span class="st">&#39;10000&#39;</span></a>
<a class="sourceLine" id="cb21-69" data-line-number="69">  <span class="fu">habitatInitializer:</span><span class="at"> All Sand</span></a>
<a class="sourceLine" id="cb21-70" data-line-number="70">  <span class="fu">mapInitializer:</span></a>
<a class="sourceLine" id="cb21-71" data-line-number="71">    <span class="fu">From File Map:</span></a>
<a class="sourceLine" id="cb21-72" data-line-number="72">      <span class="fu">gridWidthInCell:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb21-73" data-line-number="73">      <span class="fu">header:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-74" data-line-number="74">      <span class="fu">latLong:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-75" data-line-number="75">      <span class="fu">mapFile:</span><span class="at"> /home/carrknight/code/oxfish/inputs/indonesia/indonesia_latlong.csv</span></a>
<a class="sourceLine" id="cb21-76" data-line-number="76">  <span class="fu">mapMakerDedicatedRandomSeed:</span><span class="at"> </span><span class="dt">null</span></a>
<a class="sourceLine" id="cb21-77" data-line-number="77">  <span class="fu">market:</span></a>
<a class="sourceLine" id="cb21-78" data-line-number="78">    <span class="fu">Fixed Price Market:</span></a>
<a class="sourceLine" id="cb21-79" data-line-number="79">      <span class="fu">marketPrice:</span><span class="at"> </span><span class="st">&#39;40000.0&#39;</span></a>
<a class="sourceLine" id="cb21-80" data-line-number="80">  <span class="fu">networkBuilder:</span></a>
<a class="sourceLine" id="cb21-81" data-line-number="81">    <span class="fu">Equal Out Degree:</span></a>
<a class="sourceLine" id="cb21-82" data-line-number="82">      <span class="fu">allowMutualFriendships:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-83" data-line-number="83">      <span class="fu">degree:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb21-84" data-line-number="84">      <span class="fu">equalOutDegree:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb21-85" data-line-number="85">  <span class="fu">plugins:</span><span class="at"> </span><span class="kw">[</span></a>
<a class="sourceLine" id="cb21-86" data-line-number="86">    <span class="kw">]</span></a>
<a class="sourceLine" id="cb21-87" data-line-number="87">  <span class="fu">portInitializer:</span></a>
<a class="sourceLine" id="cb21-88" data-line-number="88">    <span class="fu">List of Ports:</span></a>
<a class="sourceLine" id="cb21-89" data-line-number="89">      <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb21-90" data-line-number="90">        <span class="fu">Benoa:</span><span class="at"> 115.238843,-8.799605</span></a>
<a class="sourceLine" id="cb21-91" data-line-number="91">        <span class="fu">Kupang:</span><span class="at"> 123.586249,-10.148044</span></a>
<a class="sourceLine" id="cb21-92" data-line-number="92">      <span class="fu">usingGridCoordinates:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-93" data-line-number="93">  <span class="fu">portSwitching:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb21-94" data-line-number="94">  <span class="fu">weatherInitializer:</span></a>
<a class="sourceLine" id="cb21-95" data-line-number="95">    <span class="fu">Constant Weather:</span></a>
<a class="sourceLine" id="cb21-96" data-line-number="96">      <span class="fu">temperature:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb21-97" data-line-number="97">      <span class="fu">windOrientation:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb21-98" data-line-number="98">      <span class="fu">windSpeed:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a></code></pre></div>
</div>
<div id="adding-knowledge-about-boat-operations" class="section level2">
<h2><span class="header-section-number">10.5</span> Adding knowledge about boat operations</h2>
<p>Imagine that we get hold of an expert and get some basic answers on how boats in the fishery work. In particular:</p>
<ul>
<li>Boats can hold at most 15t of fish before being too full to continue</li>
<li>Trips never last more than 10 days (when families back to port start getting angry or the boat runs out of cigarettes)</li>
<li>Boats cruise at about 8.5 knots (about 16kph)</li>
<li>Fishing is done by <a href="http://fisheriesjlr.com/wp-content/uploads/2014/03/drop-line-fishing.png">droplining</a></li>
</ul>
<p>Let’s also assume we manage to back out (by formula, by asking the expert or by sheer guess) some logistics about the fishery:</p>
<ul>
<li>Boats consume about 3<span class="math inline">\(\frac {l}{\text{km}}\)</span> of diesel when cruising</li>
<li>Each hour spent fishing consumes 70l of diesel (keeping boat steady and so on)</li>
</ul>
<p>We can add all these informations in. Start with the boat information in the <code>fisherDefinitions</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb22-1" data-line-number="1">    <span class="fu">fishingStrategy:</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2">      <span class="fu">Until Full With Day Limit:</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3">        <span class="fu">daysAtSea:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb23-1" data-line-number="1">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb24-1" data-line-number="1">    <span class="fu">holdSize:</span><span class="at"> </span><span class="st">&#39;15000.0&#39;</span></a></code></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb25-1" data-line-number="1">    <span class="fu">literPerKilometer:</span><span class="at"> </span><span class="st">&#39;3.0&#39;</span></a></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb26-1" data-line-number="1">    <span class="fu">speedInKmh:</span><span class="at"> </span><span class="st">&#39;16.0&#39;</span></a></code></pre></div>
<p>We can run the model again. We have pretty realistic boats now but unfortunately we still have no idea about what the biology looks like.</p>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/step2.mp4" type="video/mp4">
</video>
</div>
</div>
<div id="the-simplest-possible-biology-input" class="section level2">
<h2><span class="header-section-number">10.6</span> The simplest possible biology input</h2>
<p>Trevor A. Branch lists 15 “fisheries controversies” on <a href="https://sites.google.com/a/uw.edu/most-cited-fisheries/controversies">his website</a>. Number 2 is <a href="https://sites.google.com/a/uw.edu/most-cited-fisheries/controversies/status-from-catches">Can we use catch data alone to make inferences about fishery stock status?</a>.
This is in contrast to the standard way of assessing stocks which requiers the time series of both landings and effort, as in chapter 11 of <span class="citation">Haddon (<a href="#ref-Haddon2011">2011</a>)</span>.</p>
<p>The classic technique for those brave enough, like us for the Peter Snapper fishery, to do stock assessment with landings alone is by using the <em>catch-MSY</em> method <span class="citation">(Martell and Froese <a href="#ref-Martell2013a">2013</a>)</span>.<br />
The basic idea is that if you have some landings and some prior on what the stock looks like now, there are only a few combinations of <span class="math inline">\(K\)</span> (carrying capacity) and <span class="math inline">\(r\)</span> (malthusian growth) that qualify.<br />
Let’s try our best with what we have (がんばれ).</p>
<p>Imagine having decent landing data (in kg) for the past 10 years.</p>
<pre><code>## # A tibble: 10 x 1
##     Landings
##        &lt;dbl&gt;
##  1 30765238.
##  2 23983452.
##  3 19843028.
##  4 16148729.
##  5 13046744.
##  6 10867591.
##  7  9221522.
##  8  7628867.
##  9  7041957.
## 10  6200139.</code></pre>
<p>Looks like a nasty drop from a 30,000t fishery to a 6,200t fishery in the span of 10 years.</p>
<p>We can go lookup on <a href="https://www.fishbase.de/">FishBase</a> the properties of the Peter Snapper (except of course that it’s an imaginary fish). Let’s just pretend it claims the Peter Snapper to be of <code>Low</code> resilience (like, say, the <a href="https://www.fishbase.de/Summary/SpeciesSummary.php?ID=1385&amp;AT=Flame+Snapper">flame snapper</a>). This is useful because it means we can probably bound the malthusian growth parameter <span class="math inline">\(r \in (.2,.5)\)</span>
While we are on FishBase we can also take a look at the depth range of the fish. Let’s say it gives us a range between 30 and 800 meters.</p>
<p>To use catch-MSY we need some bounds on the current and initial (10 years ago) depletion rate. Let’s say 10 years ago we guess the biomass was at 70-80% of <span class="math inline">\(K\)</span> as the fishery was still young. Given the big drop in landings we assume the biomass remaining somewhere between 5-25% of <span class="math inline">\(K\)</span>.<br />
These are all the inputs we need for catch-MSY. There are many R libraries implementing the method but I like the original code that came with the paper the most.<br />
It looks something like this:</p>
<p>and when run it gives us a guessed <span class="math inline">\(K\)</span> and <span class="math inline">\(r\)</span>:</p>
<pre><code>geom. mean r = 0.372 
geom. mean k = 110749315 </code></pre>
<p>Which we can put in the model. We add <span class="math inline">\(k\)</span> as carrying capacity, <span class="math inline">\(r\)</span> as steepness and depth ranges in the initial capacity allocation (which defines which areas are livable, more precisely: it defines how carrying capacity is to be distributed geographically).<br />
The <code>initialBiomassAllocator</code> object contains our current biomass ratio guess: <span class="math inline">\(\frac{B_t}{K}\)</span>. We argued before that number is <span class="math inline">\(\frac{B_t}{K} \in (.2,.05)\)</span> now and $ (.8,.7)$ ten years ago.<br />
We will start with the 10 year old guess which will be helpful for calibration later.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb29-1" data-line-number="1">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;110749315&#39;</span></a>
<a class="sourceLine" id="cb29-5" data-line-number="5">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb29-6" data-line-number="6">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb29-7" data-line-number="7">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb29-8" data-line-number="8">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.372&#39;</span></a>
<a class="sourceLine" id="cb29-9" data-line-number="9">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb29-10" data-line-number="10">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb29-11" data-line-number="11">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;.8&#39;</span></a>
<a class="sourceLine" id="cb29-12" data-line-number="12">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;.7&#39;</span></a>
<a class="sourceLine" id="cb29-13" data-line-number="13">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb29-14" data-line-number="14">        <span class="fu">Depth Allocator:</span></a>
<a class="sourceLine" id="cb29-15" data-line-number="15">          <span class="fu">delegate:</span></a>
<a class="sourceLine" id="cb29-16" data-line-number="16">            <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb29-17" data-line-number="17">              <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb29-18" data-line-number="18">          <span class="fu">maxDepth:</span><span class="at"> </span><span class="st">&#39;800.0&#39;</span></a>
<a class="sourceLine" id="cb29-19" data-line-number="19">          <span class="fu">minDepth:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb29-20" data-line-number="20">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb29-21" data-line-number="21">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb29-22" data-line-number="22">      <span class="fu">unfishable:</span><span class="at"> false</span></a></code></pre></div>
<p>Here’s how the input file looks like now:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="fu">Flexible:</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb30-4" data-line-number="4">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-5" data-line-number="5">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;110749315&#39;</span></a>
<a class="sourceLine" id="cb30-6" data-line-number="6">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb30-7" data-line-number="7">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb30-8" data-line-number="8">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb30-9" data-line-number="9">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.372&#39;</span></a>
<a class="sourceLine" id="cb30-10" data-line-number="10">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb30-11" data-line-number="11">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb30-12" data-line-number="12">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;.8&#39;</span></a>
<a class="sourceLine" id="cb30-13" data-line-number="13">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;.7&#39;</span></a>
<a class="sourceLine" id="cb30-14" data-line-number="14">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb30-15" data-line-number="15">        <span class="fu">Depth Allocator:</span></a>
<a class="sourceLine" id="cb30-16" data-line-number="16">          <span class="fu">delegate:</span></a>
<a class="sourceLine" id="cb30-17" data-line-number="17">            <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb30-18" data-line-number="18">              <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb30-19" data-line-number="19">          <span class="fu">maxDepth:</span><span class="at"> </span><span class="st">&#39;800.0&#39;</span></a>
<a class="sourceLine" id="cb30-20" data-line-number="20">          <span class="fu">minDepth:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb30-21" data-line-number="21">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb30-22" data-line-number="22">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb30-23" data-line-number="23">      <span class="fu">unfishable:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-24" data-line-number="24">  <span class="fu">cheaters:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-25" data-line-number="25">  <span class="fu">fisherDefinitions:</span></a>
<a class="sourceLine" id="cb30-26" data-line-number="26">  <span class="kw">-</span> <span class="fu">departingStrategy:</span></a>
<a class="sourceLine" id="cb30-27" data-line-number="27">      <span class="fu">Fixed Rest:</span></a>
<a class="sourceLine" id="cb30-28" data-line-number="28">        <span class="fu">hoursBetweenEachDeparture:</span><span class="at"> </span><span class="st">&#39;12.0&#39;</span></a>
<a class="sourceLine" id="cb30-29" data-line-number="29">    <span class="fu">destinationStrategy:</span></a>
<a class="sourceLine" id="cb30-30" data-line-number="30">      <span class="fu">Imitator-Explorator:</span></a>
<a class="sourceLine" id="cb30-31" data-line-number="31">        <span class="fu">alwaysCopyBest:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-32" data-line-number="32">        <span class="fu">automaticallyIgnoreAreasWhereFishNeverGrows:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-33" data-line-number="33">        <span class="fu">automaticallyIgnoreMPAs:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-34" data-line-number="34">        <span class="fu">backtracksOnBadExploration:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-35" data-line-number="35">        <span class="fu">dropInUtilityNeededForUnfriend:</span><span class="at"> </span><span class="st">&#39;-1.0&#39;</span></a>
<a class="sourceLine" id="cb30-36" data-line-number="36">        <span class="fu">ignoreEdgeDirection:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-37" data-line-number="37">        <span class="fu">ignoreFailedTrips:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-38" data-line-number="38">        <span class="fu">maxInitialDistance:</span><span class="at"> -1.0</span></a>
<a class="sourceLine" id="cb30-39" data-line-number="39">        <span class="fu">objectiveFunction:</span></a>
<a class="sourceLine" id="cb30-40" data-line-number="40">          <span class="fu">Hourly Profit Objective:</span></a>
<a class="sourceLine" id="cb30-41" data-line-number="41">            <span class="fu">opportunityCosts:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-42" data-line-number="42">        <span class="fu">probability:</span></a>
<a class="sourceLine" id="cb30-43" data-line-number="43">          <span class="fu">Fixed Probability:</span></a>
<a class="sourceLine" id="cb30-44" data-line-number="44">            <span class="fu">explorationProbability:</span><span class="at"> </span><span class="st">&#39;0.2&#39;</span></a>
<a class="sourceLine" id="cb30-45" data-line-number="45">            <span class="fu">imitationProbability:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb30-46" data-line-number="46">        <span class="fu">stepSize:</span><span class="at"> uniform 1.0 10.0</span></a>
<a class="sourceLine" id="cb30-47" data-line-number="47">    <span class="fu">discardingStrategy:</span><span class="at"> No Discarding</span></a>
<a class="sourceLine" id="cb30-48" data-line-number="48">    <span class="fu">fishingStrategy:</span></a>
<a class="sourceLine" id="cb30-49" data-line-number="49">      <span class="fu">Until Full With Day Limit:</span></a>
<a class="sourceLine" id="cb30-50" data-line-number="50">        <span class="fu">daysAtSea:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb30-51" data-line-number="51">    <span class="fu">fuelTankSize:</span><span class="at"> </span><span class="st">&#39;100000.0&#39;</span></a>
<a class="sourceLine" id="cb30-52" data-line-number="52">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb30-53" data-line-number="53">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb30-54" data-line-number="54">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb30-55" data-line-number="55">        <span class="fu">meanCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb30-56" data-line-number="56">        <span class="fu">meanCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb30-57" data-line-number="57">        <span class="fu">standardDeviationCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb30-58" data-line-number="58">        <span class="fu">standardDeviationCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb30-59" data-line-number="59">    <span class="fu">gearStrategy:</span><span class="at"> Never Change Gear</span></a>
<a class="sourceLine" id="cb30-60" data-line-number="60">    <span class="fu">holdSize:</span><span class="at"> </span><span class="st">&#39;15000.0&#39;</span></a>
<a class="sourceLine" id="cb30-61" data-line-number="61">    <span class="fu">hourlyVariableCost:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb30-62" data-line-number="62">    <span class="fu">initialFishersPerPort:</span></a>
<a class="sourceLine" id="cb30-63" data-line-number="63">      <span class="fu">Benoa :</span><span class="at"> 25</span></a>
<a class="sourceLine" id="cb30-64" data-line-number="64">      <span class="fu">Kupang:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb30-65" data-line-number="65">    <span class="fu">literPerKilometer:</span><span class="at"> </span><span class="st">&#39;3.0&#39;</span></a>
<a class="sourceLine" id="cb30-66" data-line-number="66">    <span class="fu">logbook:</span><span class="at"> No Logbook</span></a>
<a class="sourceLine" id="cb30-67" data-line-number="67">    <span class="fu">regulation:</span><span class="at"> Anarchy</span></a>
<a class="sourceLine" id="cb30-68" data-line-number="68">    <span class="fu">speedInKmh:</span><span class="at"> </span><span class="st">&#39;16.0&#39;</span></a>
<a class="sourceLine" id="cb30-69" data-line-number="69">    <span class="fu">tags:</span><span class="at"> </span><span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb30-70" data-line-number="70">    <span class="fu">usePredictors:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-71" data-line-number="71">    <span class="fu">weatherStrategy:</span><span class="at"> Ignore Weather</span></a>
<a class="sourceLine" id="cb30-72" data-line-number="72">  <span class="fu">gasPricePerLiter:</span><span class="at"> </span><span class="st">&#39;10000&#39;</span></a>
<a class="sourceLine" id="cb30-73" data-line-number="73">  <span class="fu">habitatInitializer:</span><span class="at"> All Sand</span></a>
<a class="sourceLine" id="cb30-74" data-line-number="74">  <span class="fu">mapInitializer:</span></a>
<a class="sourceLine" id="cb30-75" data-line-number="75">    <span class="fu">From File Map:</span></a>
<a class="sourceLine" id="cb30-76" data-line-number="76">      <span class="fu">gridWidthInCell:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb30-77" data-line-number="77">      <span class="fu">header:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-78" data-line-number="78">      <span class="fu">latLong:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-79" data-line-number="79">      <span class="fu">mapFile:</span><span class="at"> /home/carrknight/code/oxfish/inputs/indonesia/indonesia_latlong.csv</span></a>
<a class="sourceLine" id="cb30-80" data-line-number="80">  <span class="fu">mapMakerDedicatedRandomSeed:</span><span class="at"> </span><span class="dt">null</span></a>
<a class="sourceLine" id="cb30-81" data-line-number="81">  <span class="fu">market:</span></a>
<a class="sourceLine" id="cb30-82" data-line-number="82">    <span class="fu">Fixed Price Market:</span></a>
<a class="sourceLine" id="cb30-83" data-line-number="83">      <span class="fu">marketPrice:</span><span class="at"> </span><span class="st">&#39;40000.0&#39;</span></a>
<a class="sourceLine" id="cb30-84" data-line-number="84">  <span class="fu">networkBuilder:</span></a>
<a class="sourceLine" id="cb30-85" data-line-number="85">    <span class="fu">Equal Out Degree:</span></a>
<a class="sourceLine" id="cb30-86" data-line-number="86">      <span class="fu">allowMutualFriendships:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-87" data-line-number="87">      <span class="fu">degree:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb30-88" data-line-number="88">      <span class="fu">equalOutDegree:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb30-89" data-line-number="89">  <span class="fu">plugins:</span><span class="at"> </span><span class="kw">[</span></a>
<a class="sourceLine" id="cb30-90" data-line-number="90">    <span class="kw">]</span></a>
<a class="sourceLine" id="cb30-91" data-line-number="91">  <span class="fu">portInitializer:</span></a>
<a class="sourceLine" id="cb30-92" data-line-number="92">    <span class="fu">List of Ports:</span></a>
<a class="sourceLine" id="cb30-93" data-line-number="93">      <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb30-94" data-line-number="94">        <span class="fu">Benoa:</span><span class="at"> 115.238843,-8.799605</span></a>
<a class="sourceLine" id="cb30-95" data-line-number="95">        <span class="fu">Kupang:</span><span class="at"> 123.586249,-10.148044</span></a>
<a class="sourceLine" id="cb30-96" data-line-number="96">      <span class="fu">usingGridCoordinates:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-97" data-line-number="97">  <span class="fu">portSwitching:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb30-98" data-line-number="98">  <span class="fu">weatherInitializer:</span></a>
<a class="sourceLine" id="cb30-99" data-line-number="99">    <span class="fu">Constant Weather:</span></a>
<a class="sourceLine" id="cb30-100" data-line-number="100">      <span class="fu">temperature:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb30-101" data-line-number="101">      <span class="fu">windOrientation:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb30-102" data-line-number="102">      <span class="fu">windSpeed:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a></code></pre></div>
</div>
<div id="calibrating-catchability" class="section level2">
<h2><span class="header-section-number">10.7</span> Calibrating Catchability</h2>
<p>One key parameter for any fishery model is catchability: the percentage of fish available in an area caught by one hour of effort. You can’t get this from surveys and you can’t use stock assessment estimates (since they are usually not geographical or at least not at the level we care about).<br />
Catchability needs to be calibrated.</p>
<p>Calibration simply mean that we want to tune some parameters (catchability) to minimize the distance between model output and reality.
In our case, the only data we have is 10 years of landings. We want to modify catchability (<span class="math inline">\(q\)</span>) until the landings in the model are as close as possible to the data.
This is a minimization problem:
<span class="math display">\[ q^* = \arg \min_q \sum^{10}_{t=1} \text{Landings}_t-\text{ModelLandings}_t \]</span></p>
<p>Now, there are a million different minimization routines one can use and feel free to use any of them. Currently in POSEIDON I am experimenting with EVA which is in java and distributed together with POSEIDON. You can use it by calling (in linux/mac):</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="ex">./gradlew</span> optimizer</a></code></pre></div>
<p>while in Windows:</p>
<pre class="posh"><code>gradlew.bat optimizer</code></pre>
<p>I will however immediately confess that most optimization so far in POSEIDON have happened through by coding them in Java rather than using the gui so the options here are quite limited.</p>
<ol style="list-style-type: decimal">
<li>We need to choose an optimization method. For simple non-linear problems I select NelderMeadSimplex and set its population size to 5 (which makes it faster but only good at local searches).</li>
</ol>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/calibration1.mp4" type="video/mp4">
</video>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Eva is a multi-purpose optimization platform. We need to feed it a POSEIDON problem. Select in <code>Problem</code> the <code>SimpleProblemWrapper</code> and from there select <code>Simple Problem</code>. From there you can select (by looking for the “open file” icon) and look in the POSEIDON folder for <code>/eva/flexible.yaml</code><br />

<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/calibration2.mp4" type="video/mp4">
</video>
</div></li>
<li>We need to:
<ul>
<li>point the scenario towards a <code>csv</code> file containing the landings observed, in <code>Landing Data</code></li>
<li>set catchability bounds (keeping the default <span class="math inline">\(\in (0.00001,0.005)\)</span>)</li>
<li>point to the scenario file we want to calibrate, in <code>Scenario File</code></li>
<li>set up how many different kind of agents we need to calibrate (just 1 in our case), in <code>Populations</code></li>
<li>define the name of the species, in <code>Species Name</code></li>
<li>point to where to store all our runs and associated errors for debugging purposes, in <code>Summary File</code></li>
</ul></li>
</ol>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/calibration3.mp4" type="video/mp4">
</video>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Set up a few details before running the calibration
<ul>
<li>Collect best and solution at each time step in the <code>Statistics</code> tab</li>
<li>In the <code>Problem</code>, <code>SimpleProblemWrapper</code> set up how many simulations to run in parallel if your computer can handle them</li>
</ul></li>
</ol>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/calibration4.mp4" type="video/mp4">
</video>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Finally run the calibration and wait</li>
</ol>
<div>
<video width="100%" controls="true"  >
<source src="./videos/peter_snapper/calibration5.mp4" type="video/mp4">
</video>
</div>
<p>Each calibration runs somewhat differently but I’d expect a result such as this:<br />
<img src="videos/peter_snapper/calibration6.png" /><!-- --></p>
<p>The <code>fitness</code> represents the distance between the two time series (about 10,000t off over 10 years). The <code>solution</code> in the log is the catchability value we are looking for. Eva scales it between -10 and 10. The catchability <span class="math inline">\(q\)</span> given Eva suggestion <span class="math inline">\(x\)</span> then is:
<span class="math display">\[ q = \frac{(x+10)}{20} \times (0.005-0.00001)  \]</span>
Since the solution quoted by Eva is −7.427 the catchability guessed is: <span class="math inline">\(0.000641964\)</span></p>
<p>Finally we can add this number in the scenario:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb33-1" data-line-number="1">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb33-4" data-line-number="4">        <span class="fu">meanCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.000641964&#39;</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5">        <span class="fu">meanCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb33-6" data-line-number="6">        <span class="fu">standardDeviationCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb33-7" data-line-number="7">        <span class="fu">standardDeviationCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a></code></pre></div>
<p>Giving us the final scenario:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="fu">Flexible:</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb34-4" data-line-number="4">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-5" data-line-number="5">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;110749315&#39;</span></a>
<a class="sourceLine" id="cb34-6" data-line-number="6">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb34-7" data-line-number="7">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb34-8" data-line-number="8">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb34-9" data-line-number="9">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.372&#39;</span></a>
<a class="sourceLine" id="cb34-10" data-line-number="10">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb34-11" data-line-number="11">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb34-12" data-line-number="12">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;.8&#39;</span></a>
<a class="sourceLine" id="cb34-13" data-line-number="13">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;.7&#39;</span></a>
<a class="sourceLine" id="cb34-14" data-line-number="14">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb34-15" data-line-number="15">        <span class="fu">Depth Allocator:</span></a>
<a class="sourceLine" id="cb34-16" data-line-number="16">          <span class="fu">delegate:</span></a>
<a class="sourceLine" id="cb34-17" data-line-number="17">            <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb34-18" data-line-number="18">              <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb34-19" data-line-number="19">          <span class="fu">maxDepth:</span><span class="at"> </span><span class="st">&#39;800.0&#39;</span></a>
<a class="sourceLine" id="cb34-20" data-line-number="20">          <span class="fu">minDepth:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb34-21" data-line-number="21">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb34-22" data-line-number="22">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb34-23" data-line-number="23">      <span class="fu">unfishable:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-24" data-line-number="24">  <span class="fu">cheaters:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-25" data-line-number="25">  <span class="fu">fisherDefinitions:</span></a>
<a class="sourceLine" id="cb34-26" data-line-number="26">  <span class="kw">-</span> <span class="fu">departingStrategy:</span></a>
<a class="sourceLine" id="cb34-27" data-line-number="27">      <span class="fu">Fixed Rest:</span></a>
<a class="sourceLine" id="cb34-28" data-line-number="28">        <span class="fu">hoursBetweenEachDeparture:</span><span class="at"> </span><span class="st">&#39;12.0&#39;</span></a>
<a class="sourceLine" id="cb34-29" data-line-number="29">    <span class="fu">destinationStrategy:</span></a>
<a class="sourceLine" id="cb34-30" data-line-number="30">      <span class="fu">Imitator-Explorator:</span></a>
<a class="sourceLine" id="cb34-31" data-line-number="31">        <span class="fu">alwaysCopyBest:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-32" data-line-number="32">        <span class="fu">automaticallyIgnoreAreasWhereFishNeverGrows:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-33" data-line-number="33">        <span class="fu">automaticallyIgnoreMPAs:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-34" data-line-number="34">        <span class="fu">backtracksOnBadExploration:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-35" data-line-number="35">        <span class="fu">dropInUtilityNeededForUnfriend:</span><span class="at"> </span><span class="st">&#39;-1.0&#39;</span></a>
<a class="sourceLine" id="cb34-36" data-line-number="36">        <span class="fu">ignoreEdgeDirection:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-37" data-line-number="37">        <span class="fu">ignoreFailedTrips:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-38" data-line-number="38">        <span class="fu">maxInitialDistance:</span><span class="at"> -1.0</span></a>
<a class="sourceLine" id="cb34-39" data-line-number="39">        <span class="fu">objectiveFunction:</span></a>
<a class="sourceLine" id="cb34-40" data-line-number="40">          <span class="fu">Hourly Profit Objective:</span></a>
<a class="sourceLine" id="cb34-41" data-line-number="41">            <span class="fu">opportunityCosts:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-42" data-line-number="42">        <span class="fu">probability:</span></a>
<a class="sourceLine" id="cb34-43" data-line-number="43">          <span class="fu">Fixed Probability:</span></a>
<a class="sourceLine" id="cb34-44" data-line-number="44">            <span class="fu">explorationProbability:</span><span class="at"> </span><span class="st">&#39;0.2&#39;</span></a>
<a class="sourceLine" id="cb34-45" data-line-number="45">            <span class="fu">imitationProbability:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb34-46" data-line-number="46">        <span class="fu">stepSize:</span><span class="at"> uniform 1.0 10.0</span></a>
<a class="sourceLine" id="cb34-47" data-line-number="47">    <span class="fu">discardingStrategy:</span><span class="at"> No Discarding</span></a>
<a class="sourceLine" id="cb34-48" data-line-number="48">    <span class="fu">fishingStrategy:</span></a>
<a class="sourceLine" id="cb34-49" data-line-number="49">      <span class="fu">Until Full With Day Limit:</span></a>
<a class="sourceLine" id="cb34-50" data-line-number="50">        <span class="fu">daysAtSea:</span><span class="at"> </span><span class="st">&#39;10.0&#39;</span></a>
<a class="sourceLine" id="cb34-51" data-line-number="51">    <span class="fu">fuelTankSize:</span><span class="at"> </span><span class="st">&#39;100000.0&#39;</span></a>
<a class="sourceLine" id="cb34-52" data-line-number="52">    <span class="fu">gear:</span></a>
<a class="sourceLine" id="cb34-53" data-line-number="53">      <span class="fu">Random Catchability:</span></a>
<a class="sourceLine" id="cb34-54" data-line-number="54">        <span class="fu">gasPerHourFished:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb34-55" data-line-number="55">        <span class="fu">meanCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.000641964&#39;</span></a>
<a class="sourceLine" id="cb34-56" data-line-number="56">        <span class="fu">meanCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb34-57" data-line-number="57">        <span class="fu">standardDeviationCatchabilityFirstSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb34-58" data-line-number="58">        <span class="fu">standardDeviationCatchabilityOtherSpecies:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb34-59" data-line-number="59">    <span class="fu">gearStrategy:</span><span class="at"> Never Change Gear</span></a>
<a class="sourceLine" id="cb34-60" data-line-number="60">    <span class="fu">holdSize:</span><span class="at"> </span><span class="st">&#39;15000.0&#39;</span></a>
<a class="sourceLine" id="cb34-61" data-line-number="61">    <span class="fu">hourlyVariableCost:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb34-62" data-line-number="62">    <span class="fu">initialFishersPerPort:</span></a>
<a class="sourceLine" id="cb34-63" data-line-number="63">      <span class="fu">Benoa :</span><span class="at"> 25</span></a>
<a class="sourceLine" id="cb34-64" data-line-number="64">      <span class="fu">Kupang:</span><span class="at"> 50</span></a>
<a class="sourceLine" id="cb34-65" data-line-number="65">    <span class="fu">literPerKilometer:</span><span class="at"> </span><span class="st">&#39;3.0&#39;</span></a>
<a class="sourceLine" id="cb34-66" data-line-number="66">    <span class="fu">logbook:</span><span class="at"> No Logbook</span></a>
<a class="sourceLine" id="cb34-67" data-line-number="67">    <span class="fu">regulation:</span><span class="at"> Anarchy</span></a>
<a class="sourceLine" id="cb34-68" data-line-number="68">    <span class="fu">speedInKmh:</span><span class="at"> </span><span class="st">&#39;16.0&#39;</span></a>
<a class="sourceLine" id="cb34-69" data-line-number="69">    <span class="fu">tags:</span><span class="at"> </span><span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb34-70" data-line-number="70">    <span class="fu">usePredictors:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-71" data-line-number="71">    <span class="fu">weatherStrategy:</span><span class="at"> Ignore Weather</span></a>
<a class="sourceLine" id="cb34-72" data-line-number="72">  <span class="fu">gasPricePerLiter:</span><span class="at"> </span><span class="st">&#39;10000&#39;</span></a>
<a class="sourceLine" id="cb34-73" data-line-number="73">  <span class="fu">habitatInitializer:</span><span class="at"> All Sand</span></a>
<a class="sourceLine" id="cb34-74" data-line-number="74">  <span class="fu">mapInitializer:</span></a>
<a class="sourceLine" id="cb34-75" data-line-number="75">    <span class="fu">From File Map:</span></a>
<a class="sourceLine" id="cb34-76" data-line-number="76">      <span class="fu">gridWidthInCell:</span><span class="at"> </span><span class="st">&#39;70.0&#39;</span></a>
<a class="sourceLine" id="cb34-77" data-line-number="77">      <span class="fu">header:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-78" data-line-number="78">      <span class="fu">latLong:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-79" data-line-number="79">      <span class="fu">mapFile:</span><span class="at"> /home/carrknight/code/oxfish/inputs/indonesia/indonesia_latlong.csv</span></a>
<a class="sourceLine" id="cb34-80" data-line-number="80">  <span class="fu">mapMakerDedicatedRandomSeed:</span><span class="at"> </span><span class="dt">null</span></a>
<a class="sourceLine" id="cb34-81" data-line-number="81">  <span class="fu">market:</span></a>
<a class="sourceLine" id="cb34-82" data-line-number="82">    <span class="fu">Fixed Price Market:</span></a>
<a class="sourceLine" id="cb34-83" data-line-number="83">      <span class="fu">marketPrice:</span><span class="at"> </span><span class="st">&#39;40000.0&#39;</span></a>
<a class="sourceLine" id="cb34-84" data-line-number="84">  <span class="fu">networkBuilder:</span></a>
<a class="sourceLine" id="cb34-85" data-line-number="85">    <span class="fu">Equal Out Degree:</span></a>
<a class="sourceLine" id="cb34-86" data-line-number="86">      <span class="fu">allowMutualFriendships:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-87" data-line-number="87">      <span class="fu">degree:</span><span class="at"> </span><span class="st">&#39;2.0&#39;</span></a>
<a class="sourceLine" id="cb34-88" data-line-number="88">      <span class="fu">equalOutDegree:</span><span class="at"> true</span></a>
<a class="sourceLine" id="cb34-89" data-line-number="89">  <span class="fu">plugins:</span><span class="at"> </span><span class="kw">[</span></a>
<a class="sourceLine" id="cb34-90" data-line-number="90">    <span class="kw">]</span></a>
<a class="sourceLine" id="cb34-91" data-line-number="91">  <span class="fu">portInitializer:</span></a>
<a class="sourceLine" id="cb34-92" data-line-number="92">    <span class="fu">List of Ports:</span></a>
<a class="sourceLine" id="cb34-93" data-line-number="93">      <span class="fu">ports:</span></a>
<a class="sourceLine" id="cb34-94" data-line-number="94">        <span class="fu">Benoa:</span><span class="at"> 115.238843,-8.799605</span></a>
<a class="sourceLine" id="cb34-95" data-line-number="95">        <span class="fu">Kupang:</span><span class="at"> 123.586249,-10.148044</span></a>
<a class="sourceLine" id="cb34-96" data-line-number="96">      <span class="fu">usingGridCoordinates:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-97" data-line-number="97">  <span class="fu">portSwitching:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb34-98" data-line-number="98">  <span class="fu">weatherInitializer:</span></a>
<a class="sourceLine" id="cb34-99" data-line-number="99">    <span class="fu">Constant Weather:</span></a>
<a class="sourceLine" id="cb34-100" data-line-number="100">      <span class="fu">temperature:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb34-101" data-line-number="101">      <span class="fu">windOrientation:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a>
<a class="sourceLine" id="cb34-102" data-line-number="102">      <span class="fu">windSpeed:</span><span class="at"> </span><span class="st">&#39;0.0&#39;</span></a></code></pre></div>
<p>We can look at our calibration now by running it in batch 100 times and plotting its landings. We saw how to run batches in chapter <a href="batch.html#batch">7</a>. This is just a straightforward application of it.</p>
<p><img src="videos/peter_snapper/batch.png" /><!-- --></p>
<p>And here’s how the model output (grey lines) compares to the “real world” (bold black line).
It’s quite close in the later years but not so much very early on.</p>
<p><img src="tutorial_files/figure-html/unnamed-chunk-23-1.png" width="1000" /></p>
<p>I can now reveal that the “real” 10 years of landings were actually also coming from POSEIDON and we can check how far off the real values were from the “real” scenario:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb35-1" data-line-number="1">  <span class="fu">biologyInitializer:</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2">    <span class="fu">Single Species Biomass Normalized:</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3">      <span class="fu">biomassSuppliedPerCell:</span><span class="at"> false</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4">      <span class="fu">carryingCapacity:</span><span class="at"> </span><span class="st">&#39;1.25E8&#39;</span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5">      <span class="fu">differentialPercentageToMove:</span><span class="at"> </span><span class="st">&#39;0.001&#39;</span></a>
<a class="sourceLine" id="cb35-6" data-line-number="6">      <span class="fu">grower:</span></a>
<a class="sourceLine" id="cb35-7" data-line-number="7">        <span class="fu">Common Logistic Grower:</span></a>
<a class="sourceLine" id="cb35-8" data-line-number="8">          <span class="fu">steepness:</span><span class="at"> </span><span class="st">&#39;0.33&#39;</span></a>
<a class="sourceLine" id="cb35-9" data-line-number="9">      <span class="fu">initialBiomassAllocator:</span></a>
<a class="sourceLine" id="cb35-10" data-line-number="10">        <span class="fu">Random Allocator:</span></a>
<a class="sourceLine" id="cb35-11" data-line-number="11">          <span class="fu">maximum:</span><span class="at"> </span><span class="st">&#39;.8&#39;</span></a>
<a class="sourceLine" id="cb35-12" data-line-number="12">          <span class="fu">minimum:</span><span class="at"> </span><span class="st">&#39;.7&#39;</span></a>
<a class="sourceLine" id="cb35-13" data-line-number="13">      <span class="fu">initialCapacityAllocator:</span></a>
<a class="sourceLine" id="cb35-14" data-line-number="14">        <span class="fu">Depth Allocator:</span></a>
<a class="sourceLine" id="cb35-15" data-line-number="15">          <span class="fu">delegate:</span></a>
<a class="sourceLine" id="cb35-16" data-line-number="16">            <span class="fu">Equal Allocation:</span></a>
<a class="sourceLine" id="cb35-17" data-line-number="17">              <span class="fu">constantValue:</span><span class="at"> </span><span class="st">&#39;1.0&#39;</span></a>
<a class="sourceLine" id="cb35-18" data-line-number="18">          <span class="fu">maxDepth:</span><span class="at"> </span><span class="st">&#39;800.0&#39;</span></a>
<a class="sourceLine" id="cb35-19" data-line-number="19">          <span class="fu">minDepth:</span><span class="at"> </span><span class="st">&#39;30.0&#39;</span></a>
<a class="sourceLine" id="cb35-20" data-line-number="20">      <span class="fu">percentageLimitOnDailyMovement:</span><span class="at"> </span><span class="st">&#39;0.01&#39;</span></a>
<a class="sourceLine" id="cb35-21" data-line-number="21">      <span class="fu">speciesName:</span><span class="at"> Peter Snapper</span></a>
<a class="sourceLine" id="cb35-22" data-line-number="22">      <span class="fu">unfishable:</span><span class="at"> false</span></a></code></pre></div>
<pre><code>    gear:
      Random Catchability:
        gasPerHourFished: &#39;72.0&#39;
        meanCatchabilityFirstSpecies: &#39;6.2E-4&#39;
        meanCatchabilityOtherSpecies: &#39;0.01&#39;
        standardDeviationCatchabilityFirstSpecies: &#39;0.0&#39;
        standardDeviationCatchabilityOtherSpecies: &#39;0.0&#39;
    gearStrategy: Never Change Gear
    holdSize: &#39;15000.0&#39;
    hourlyVariableCost: &#39;0.0&#39;
    initialFishersPerPort:
      Benoa : 25
      Kupang: 50
    literPerKilometer: &#39;3.5&#39;</code></pre>
<p>As you can see <span class="math inline">\(K\)</span> and <span class="math inline">\(r\)</span> were not perfectly estimated (in particular for <span class="math inline">\(K\)</span> we are about 10,000t too low which explains the gap between real and calibrated output). We also had errors in gas consumption, mileage and catchability although all these were minor.
Overall, quite a nice match given how little data we used.</p>
</div>
<div id="validation" class="section level2">
<h2><span class="header-section-number">10.8</span> Validation</h2>
<p>Validation refers to the model matching data for which it was not calibrated against. This gives us an intuitively more honest prediction error estimation. It is particularly useful for two reasons:</p>
<ol style="list-style-type: decimal">
<li>We are afraid of over-fitting to the data we have</li>
<li>We have multiple valid assumptions and want to choose the one that predicts best</li>
</ol>
<p>In this example we used up all the data for calibration so we can’t do validation without gathering more. An alternative would have been finding <span class="math inline">\(K\)</span>, <span class="math inline">\(r\)</span> and <span class="math inline">\(q\)</span> on a subset of the data (say, the first 8 years) and check the quality of the model by its prediction of year 9 and 10.</p>
</div>
<div id="references" class="section level2">
<h2><span class="header-section-number">10.9</span> References</h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Costello2012">
<p>Costello, Christopher, Daniel Ovando, Ray Hilborn, Steven D. Gaines, Olivier Deschenes, and Sarah E. Lester. 2012. “Status and solutions for the world’s unassessed fisheries.” <em>Science</em> 338 (6106): 517–20. <a href="https://doi.org/10.1126/science.1223389" class="uri">https://doi.org/10.1126/science.1223389</a>.</p>
</div>
<div id="ref-Haddon2011">
<p>Haddon, Malcolm. 2011. <em>Modelling and Quantitative Methods in Fisheries</em>. 2nd ed. Boca Raton, FL: Crc Press-Taylor &amp; Francis Group.</p>
</div>
<div id="ref-Martell2013a">
<p>Martell, Steven, and Rainer Froese. 2013. “A simple method for estimating MSY from catch and resilience.” <em>Fish and Fisheries</em> 14 (4): 504–14. <a href="https://doi.org/10.1111/j.1467-2979.2012.00485.x" class="uri">https://doi.org/10.1111/j.1467-2979.2012.00485.x</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="changing-policies-within-the-simulation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": ["tutorial.pdf", "tutorial.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
