<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://carrknight.github.io/css/pure.css">
    <link rel="stylesheet" href="https://carrknight.github.io/css/main.css">
    <link rel="stylesheet" href="https://carrknight.github.io/css/blog.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,200" />
    <link rel="stylesheet" href="./index.css">

    <script src="./index.js"></script>

    <title>Table test</title>
</head>
<body>

<div id="intro" style ="margin: 0 auto; width: 80%">
    <h2> Introduction </h2>
    <p>This page is a simulator for the experiments we want to run with the hotels for Nordic Choice.
        We want to make sure that:</p>
    <ul>
        <li>We have enough weeks and hotels observed that it&#39;s likely we will observe a significant result</li>
        <li>We choose the right schedule to randomize experiments in order to avoid spurious results</li>
    </ul>
    <p>In practice here we pretend to know the <em>true</em> parameters of the world, then we run simulations and check whether the experiment we have devised could actually discover the true effects.</p>



</div>

<div id="hotel_table_div" style ="margin: 0 auto; width: 80%" >
    <h4> Hotels in the experiment: </h4>
    <p>In this <em>editable</em> table you can add/remove hotels or change their
        basic parameters. These are the average and coefficient of variations
        for waste of daily guests, the probability that a guest would attend
        the buffet and average waste per customer.</p>

    <table id="hotel_table"  class="pure-table pure-table-bordered">
        <thead>
        <tr>
            <th>Name</th>
            <th>Average # of guests</th>
            <th>CV # of guests</th>
            <th>Average kg of waste per guest</th>
            <th>CV kg of waste per guest</th>
            <th>% of guests that dine</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <button id="export-btn" class="btn btn-primary">Export Data
        <span class="material-symbols-outlined">
delete
</span>
    </button>
    <p id="export"></p>
</div>


<div id="stimulus_table_div" style ="margin: 0 auto; width: 80%" >
    <h4> Type of experiments to run: </h4>
    <p>In this <em>editable</em> table you can change both the number of experimental conditions we are going to test and their <strong>true</strong> effects.<br>Obviously the whole point of the experiments is to discover what the effect is. The point of these simulations however is to discover how the strength of the effect makes it easier or harder to discover.</p>
    <p>20% (0.2) is what is quoted as the reduction in the old hotel study.</p>
    <span class="table-add glyphicon glyphicon-plus"></span>
    <table id="stimulus_table"  class="pure-table pure-table-bordered">
        <thead>
        <tr>
            <th>Name</th>
            <th>Change of food waste, average in %</th>
            <th>Change of food waste, CV in %</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <button id="export-btn2" class="btn btn-primary">Export Data
        <span class="material-symbols-outlined">
delete
</span>
    </button>
</div>

<div style ="margin: 0 auto; width: 80%">
    <h2> Simulation </h2>
    <p id="weekparagraph">

        <form id="randomassignmentform">
            <p> First we need to select the way we are going to 
                assign hotels to experimental conditions: </p>
                
        </form>

        We will sample all these hotels for <input id="weekssampled" type="number" value="14" min="1" max="20" /> weeks. <br>
        Each day, each hotel may fail to record their food waste. We assume this happens with probability of <input type="number" id="narate" min="0" max="1" value="0.1" step="0.01">
        <br>

        
        <form id="analysisform">
            <p> We also need to choose what kind of analysis we are going to run on the data once it is generated: </p>
                
        </form>


        We may expect different customers different weeks, we can modify the relative presence of guests by <strong>dragging points</strong> in the chart below:
        <br>
        <div style="height: 600px; width: 800px;">
        <canvas id="weekChartContainer" style="height: 200px; width: 300px;">

        </canvas>
</div>

    </p>

    <p>
        To run simulation simply press:
        <button id="run_simulation_btn" class="btn">here
            <span class="material-symbols-outlined" style="font-size:60px;">
    rocket_launch
</span>
        </button>
    </p>

    <p>
        Or we can try running the simulation 1000 times and check the power of our analysis, by pressing here
        <button id="run_power_btn" class="btn">here
            <span class="material-symbols-outlined" style="font-size:60px;">
    dataset
</span>
        </button>
    </p>
</div>
<p>

</p>
<div id="results">

</div>

</body>
</html>