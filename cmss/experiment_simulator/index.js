(()=>{var pr=Object.create;var Bn=Object.defineProperty;var mr=Object.getOwnPropertyDescriptor;var br=Object.getOwnPropertyNames;var vr=Object.getPrototypeOf,_r=Object.prototype.hasOwnProperty;var xr=(n,t,e)=>t in n?Bn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ki=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var yr=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of br(t))!_r.call(n,o)&&o!==e&&Bn(n,o,{get:()=>t[o],enumerable:!(i=mr(t,o))||i.enumerable});return n};var Xi=(n,t,e)=>(e=n!=null?pr(vr(n)):{},yr(t||!n||!n.__esModule?Bn(e,"default",{value:n,enumerable:!0}):e,n));var O=(n,t,e)=>(xr(n,typeof t!="symbol"?t+"":t,e),e);var Zi=Ki((Hn,Qi)=>{(function(n,t){typeof Hn=="object"?Qi.exports=t():typeof define=="function"&&define.amd?define(t):n.jStat=t()})(Hn,function(){var n=function(t,e){var i=Array.prototype.concat,o=Array.prototype.slice,a=Object.prototype.toString;function c(b,m){var v=b>m?b:m;return t.pow(10,17-~~(t.log(v>0?v:-v)*t.LOG10E))}var r=Array.isArray||function(m){return a.call(m)==="[object Array]"};function s(b){return a.call(b)==="[object Function]"}function l(b){return typeof b=="number"?b-b===0:!1}function u(b){return i.apply([],b)}function h(){return new h._init(arguments)}h.fn=h.prototype,h._init=function(m){if(r(m[0]))if(r(m[0][0])){s(m[1])&&(m[0]=h.map(m[0],m[1]));for(var v=0;v<m[0].length;v++)this[v]=m[0][v];this.length=m[0].length}else this[0]=s(m[1])?h.map(m[0],m[1]):m[0],this.length=1;else if(l(m[0]))this[0]=h.seq.apply(null,m),this.length=1;else{if(m[0]instanceof h)return h(m[0].toArray());this[0]=[],this.length=1}return this},h._init.prototype=h.prototype,h._init.constructor=h,h.utils={calcRdx:c,isArray:r,isFunction:s,isNumber:l,toVector:u},h._random_fn=t.random,h.setRandom=function(m){if(typeof m!="function")throw new TypeError("fn is not a function");h._random_fn=m},h.extend=function(m){var v,_;if(arguments.length===1){for(_ in m)h[_]=m[_];return this}for(v=1;v<arguments.length;v++)for(_ in arguments[v])m[_]=arguments[v][_];return m},h.rows=function(m){return m.length||1},h.cols=function(m){return m[0].length||1},h.dimensions=function(m){return{rows:h.rows(m),cols:h.cols(m)}},h.row=function(m,v){return r(v)?v.map(function(_){return h.row(m,_)}):m[v]},h.rowa=function(m,v){return h.row(m,v)},h.col=function(m,v){if(r(v)){var _=h.arange(m.length).map(function(){return new Array(v.length)});return v.forEach(function(w,k){h.arange(m.length).forEach(function(P){_[P][k]=m[P][w]})}),_}for(var x=new Array(m.length),y=0;y<m.length;y++)x[y]=[m[y][v]];return x},h.cola=function(m,v){return h.col(m,v).map(function(_){return _[0]})},h.diag=function(m){for(var v=h.rows(m),_=new Array(v),x=0;x<v;x++)_[x]=[m[x][x]];return _},h.antidiag=function(m){for(var v=h.rows(m)-1,_=new Array(v),x=0;v>=0;v--,x++)_[x]=[m[x][v]];return _},h.transpose=function(m){var v=[],_,x,y,w,k;for(r(m[0])||(m=[m]),x=m.length,y=m[0].length,k=0;k<y;k++){for(_=new Array(x),w=0;w<x;w++)_[w]=m[w][k];v.push(_)}return v.length===1?v[0]:v},h.map=function(m,v,_){var x,y,w,k,P;for(r(m[0])||(m=[m]),y=m.length,w=m[0].length,k=_?m:new Array(y),x=0;x<y;x++)for(k[x]||(k[x]=new Array(w)),P=0;P<w;P++)k[x][P]=v(m[x][P],x,P);return k.length===1?k[0]:k},h.cumreduce=function(m,v,_){var x,y,w,k,P;for(r(m[0])||(m=[m]),y=m.length,w=m[0].length,k=_?m:new Array(y),x=0;x<y;x++)for(k[x]||(k[x]=new Array(w)),w>0&&(k[x][0]=m[x][0]),P=1;P<w;P++)k[x][P]=v(k[x][P-1],m[x][P]);return k.length===1?k[0]:k},h.alter=function(m,v){return h.map(m,v,!0)},h.create=function(m,v,_){var x=new Array(m),y,w;for(s(v)&&(_=v,v=m),y=0;y<m;y++)for(x[y]=new Array(v),w=0;w<v;w++)x[y][w]=_(y,w);return x};function f(){return 0}h.zeros=function(m,v){return l(v)||(v=m),h.create(m,v,f)};function d(){return 1}h.ones=function(m,v){return l(v)||(v=m),h.create(m,v,d)},h.rand=function(m,v){return l(v)||(v=m),h.create(m,v,h._random_fn)};function g(b,m){return b===m?1:0}h.identity=function(m,v){return l(v)||(v=m),h.create(m,v,g)},h.symmetric=function(m){var v=m.length,_,x;if(m.length!==m[0].length)return!1;for(_=0;_<v;_++)for(x=0;x<v;x++)if(m[x][_]!==m[_][x])return!1;return!0},h.clear=function(m){return h.alter(m,f)},h.seq=function(m,v,_,x){s(x)||(x=!1);var y=[],w=c(m,v),k=(v*w-m*w)/((_-1)*w),P=m,C;for(C=0;P<=v&&C<_;C++,P=(m*w+k*w*C)/w)y.push(x?x(P,C):P);return y},h.arange=function(m,v,_){var x=[],y;if(_=_||1,v===e&&(v=m,m=0),m===v||_===0)return[];if(m<v&&_<0)return[];if(m>v&&_>0)return[];if(_>0)for(y=m;y<v;y+=_)x.push(y);else for(y=m;y>v;y+=_)x.push(y);return x},h.slice=function(){function b(v,_,x,y){var w,k=[],P=v.length;if(_===e&&x===e&&y===e)return h.copy(v);if(_=_||0,x=x||v.length,_=_>=0?_:P+_,x=x>=0?x:P+x,y=y||1,_===x||y===0)return[];if(_<x&&y<0)return[];if(_>x&&y>0)return[];if(y>0)for(w=_;w<x;w+=y)k.push(v[w]);else for(w=_;w>x;w+=y)k.push(v[w]);return k}function m(v,_){var x,y;if(_=_||{},l(_.row)){if(l(_.col))return v[_.row][_.col];var w=h.rowa(v,_.row);return x=_.col||{},b(w,x.start,x.end,x.step)}if(l(_.col)){var k=h.cola(v,_.col);return y=_.row||{},b(k,y.start,y.end,y.step)}y=_.row||{},x=_.col||{};var P=b(v,y.start,y.end,y.step);return P.map(function(C){return b(C,x.start,x.end,x.step)})}return m}(),h.sliceAssign=function(m,v,_){var x,y;if(l(v.row)){if(l(v.col))return m[v.row][v.col]=_;v.col=v.col||{},v.col.start=v.col.start||0,v.col.end=v.col.end||m[0].length,v.col.step=v.col.step||1,x=h.arange(v.col.start,t.min(m.length,v.col.end),v.col.step);var w=v.row;return x.forEach(function(P,C){m[w][P]=_[C]}),m}if(l(v.col)){v.row=v.row||{},v.row.start=v.row.start||0,v.row.end=v.row.end||m.length,v.row.step=v.row.step||1,y=h.arange(v.row.start,t.min(m[0].length,v.row.end),v.row.step);var k=v.col;return y.forEach(function(P,C){m[P][k]=_[C]}),m}return _[0].length===e&&(_=[_]),v.row.start=v.row.start||0,v.row.end=v.row.end||m.length,v.row.step=v.row.step||1,v.col.start=v.col.start||0,v.col.end=v.col.end||m[0].length,v.col.step=v.col.step||1,y=h.arange(v.row.start,t.min(m.length,v.row.end),v.row.step),x=h.arange(v.col.start,t.min(m[0].length,v.col.end),v.col.step),y.forEach(function(P,C){x.forEach(function(A,T){m[P][A]=_[C][T]})}),m},h.diagonal=function(m){var v=h.zeros(m.length,m.length);return m.forEach(function(_,x){v[x][x]=_}),v},h.copy=function(m){return m.map(function(v){return l(v)?v:v.map(function(_){return _})})};var p=h.prototype;return p.length=0,p.push=Array.prototype.push,p.sort=Array.prototype.sort,p.splice=Array.prototype.splice,p.slice=Array.prototype.slice,p.toArray=function(){return this.length>1?o.call(this):o.call(this)[0]},p.map=function(m,v){return h(h.map(this,m,v))},p.cumreduce=function(m,v){return h(h.cumreduce(this,m,v))},p.alter=function(m){return h.alter(this,m),this},function(b){for(var m=0;m<b.length;m++)(function(v){p[v]=function(_){var x=this,y;return _?(setTimeout(function(){_.call(x,p[v].call(x))}),this):(y=h[v](this),r(y)?h(y):y)}})(b[m])}("transpose clear symmetric rows cols dimensions diag antidiag".split(" ")),function(b){for(var m=0;m<b.length;m++)(function(v){p[v]=function(_,x){var y=this;return x?(setTimeout(function(){x.call(y,p[v].call(y,_))}),this):h(h[v](this,_))}})(b[m])}("row col".split(" ")),function(b){for(var m=0;m<b.length;m++)(function(v){p[v]=function(){return h(h[v].apply(null,arguments))}})(b[m])}("create zeros ones rand identity".split(" ")),h}(Math);return function(t,e){var i=t.utils.isFunction;function o(r,s){return r-s}function a(r,s,l){return e.max(s,e.min(r,l))}t.sum=function(s){for(var l=0,u=s.length;--u>=0;)l+=s[u];return l},t.sumsqrd=function(s){for(var l=0,u=s.length;--u>=0;)l+=s[u]*s[u];return l},t.sumsqerr=function(s){for(var l=t.mean(s),u=0,h=s.length,f;--h>=0;)f=s[h]-l,u+=f*f;return u},t.sumrow=function(s){for(var l=0,u=s.length;--u>=0;)l+=s[u];return l},t.product=function(s){for(var l=1,u=s.length;--u>=0;)l*=s[u];return l},t.min=function(s){for(var l=s[0],u=0;++u<s.length;)s[u]<l&&(l=s[u]);return l},t.max=function(s){for(var l=s[0],u=0;++u<s.length;)s[u]>l&&(l=s[u]);return l},t.unique=function(s){for(var l={},u=[],h=0;h<s.length;h++)l[s[h]]||(l[s[h]]=!0,u.push(s[h]));return u},t.mean=function(s){return t.sum(s)/s.length},t.meansqerr=function(s){return t.sumsqerr(s)/s.length},t.geomean=function(s){var l=s.map(e.log),u=t.mean(l);return e.exp(u)},t.median=function(s){var l=s.length,u=s.slice().sort(o);return l&1?u[l/2|0]:(u[l/2-1]+u[l/2])/2},t.cumsum=function(s){return t.cumreduce(s,function(l,u){return l+u})},t.cumprod=function(s){return t.cumreduce(s,function(l,u){return l*u})},t.diff=function(s){var l=[],u=s.length,h;for(h=1;h<u;h++)l.push(s[h]-s[h-1]);return l},t.rank=function(r){var s,l=[],u={};for(s=0;s<r.length;s++){var h=r[s];u[h]?u[h]++:(u[h]=1,l.push(h))}var f=l.sort(o),d={},g=1;for(s=0;s<f.length;s++){var h=f[s],p=u[h],b=g,m=g+p-1,v=(b+m)/2;d[h]=v,g+=p}return r.map(function(_){return d[_]})},t.mode=function(s){var l=s.length,u=s.slice().sort(o),h=1,f=0,d=0,g=[],p;for(p=0;p<l;p++)u[p]===u[p+1]?h++:(h>f?(g=[u[p]],f=h,d=0):h===f&&(g.push(u[p]),d++),h=1);return d===0?g[0]:g},t.range=function(s){return t.max(s)-t.min(s)},t.variance=function(s,l){return t.sumsqerr(s)/(s.length-(l?1:0))},t.pooledvariance=function(s){var l=s.reduce(function(h,f){return h+t.sumsqerr(f)},0),u=s.reduce(function(h,f){return h+f.length},0);return l/(u-s.length)},t.deviation=function(r){for(var s=t.mean(r),l=r.length,u=new Array(l),h=0;h<l;h++)u[h]=r[h]-s;return u},t.stdev=function(s,l){return e.sqrt(t.variance(s,l))},t.pooledstdev=function(s){return e.sqrt(t.pooledvariance(s))},t.meandev=function(s){for(var l=t.mean(s),u=[],h=s.length-1;h>=0;h--)u.push(e.abs(s[h]-l));return t.mean(u)},t.meddev=function(s){for(var l=t.median(s),u=[],h=s.length-1;h>=0;h--)u.push(e.abs(s[h]-l));return t.median(u)},t.coeffvar=function(s){return t.stdev(s)/t.mean(s)},t.quartiles=function(s){var l=s.length,u=s.slice().sort(o);return[u[e.round(l/4)-1],u[e.round(l/2)-1],u[e.round(l*3/4)-1]]},t.quantiles=function(s,l,u,h){var f=s.slice().sort(o),d=[l.length],g=s.length,p,b,m,v,_,x;for(typeof u>"u"&&(u=3/8),typeof h>"u"&&(h=3/8),p=0;p<l.length;p++)b=l[p],m=u+b*(1-u-h),v=g*b+m,_=e.floor(a(v,1,g-1)),x=a(v-_,0,1),d[p]=(1-x)*f[_-1]+x*f[_];return d},t.percentile=function(s,l,u){var h=s.slice().sort(o),f=l*(h.length+(u?1:-1))+(u?0:1),d=parseInt(f),g=f-d;return d+1<h.length?h[d-1]+g*(h[d]-h[d-1]):h[d-1]},t.percentileOfScore=function(s,l,u){var h=0,f=s.length,d=!1,g,p;for(u==="strict"&&(d=!0),p=0;p<f;p++)g=s[p],(d&&g<l||!d&&g<=l)&&h++;return h/f},t.histogram=function(s,l){l=l||4;var u=t.min(s),h=(t.max(s)-u)/l,f=s.length,d=[],g;for(g=0;g<l;g++)d[g]=0;for(g=0;g<f;g++)d[e.min(e.floor((s[g]-u)/h),l-1)]+=1;return d},t.covariance=function(s,l){var u=t.mean(s),h=t.mean(l),f=s.length,d=new Array(f),g;for(g=0;g<f;g++)d[g]=(s[g]-u)*(l[g]-h);return t.sum(d)/(f-1)},t.corrcoeff=function(s,l){return t.covariance(s,l)/t.stdev(s,1)/t.stdev(l,1)},t.spearmancoeff=function(r,s){return r=t.rank(r),s=t.rank(s),t.corrcoeff(r,s)},t.stanMoment=function(s,l){for(var u=t.mean(s),h=t.stdev(s),f=s.length,d=0,g=0;g<f;g++)d+=e.pow((s[g]-u)/h,l);return d/s.length},t.skewness=function(s){return t.stanMoment(s,3)},t.kurtosis=function(s){return t.stanMoment(s,4)-3};var c=t.prototype;(function(r){for(var s=0;s<r.length;s++)(function(l){c[l]=function(u,h){var f=[],d=0,g=this;if(i(u)&&(h=u,u=!1),h)return setTimeout(function(){h.call(g,c[l].call(g,u))}),this;if(this.length>1){for(g=u===!0?this:this.transpose();d<g.length;d++)f[d]=t[l](g[d]);return f}return t[l](this[0],u)}})(r[s])})("cumsum cumprod".split(" ")),function(r){for(var s=0;s<r.length;s++)(function(l){c[l]=function(u,h){var f=[],d=0,g=this;if(i(u)&&(h=u,u=!1),h)return setTimeout(function(){h.call(g,c[l].call(g,u))}),this;if(this.length>1){for(l!=="sumrow"&&(g=u===!0?this:this.transpose());d<g.length;d++)f[d]=t[l](g[d]);return u===!0?t[l](t.utils.toVector(f)):f}return t[l](this[0],u)}})(r[s])}("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" ")),function(r){for(var s=0;s<r.length;s++)(function(l){c[l]=function(){var u=[],h=0,f=this,d=Array.prototype.slice.call(arguments),g;if(i(d[d.length-1])){g=d[d.length-1];var p=d.slice(0,d.length-1);return setTimeout(function(){g.call(f,c[l].apply(f,p))}),this}else{g=void 0;var b=function(v){return t[l].apply(f,[v].concat(d))}}if(this.length>1){for(f=f.transpose();h<f.length;h++)u[h]=b(f[h]);return u}return b(this[0])}})(r[s])}("quantiles percentileOfScore".split(" "))}(n,Math),function(t,e){t.gammaln=function(o){var a=0,c=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,s,l,u;for(u=(l=s=o)+5.5,u-=(s+.5)*e.log(u);a<6;a++)r+=c[a]/++l;return e.log(2.5066282746310007*r/s)-u},t.loggam=function(o){var a,c,r,s,l,u,h,f=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(a=o,h=0,o==1||o==2)return 0;for(o<=7&&(h=e.floor(7-o),a=o+h),c=1/(a*a),r=2*e.PI,l=f[9],u=8;u>=0;u--)l*=c,l+=f[u];if(s=l/a+.5*e.log(r)+(a-.5)*e.log(a)-a,o<=7)for(u=1;u<=h;u++)s-=e.log(a-1),a-=1;return s},t.gammafn=function(o){var a=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],c=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],r=!1,s=0,l=0,u=0,h=o,f,d,g,p;if(o>171.6243769536076)return 1/0;if(h<=0)if(p=h%1+36e-17,p)r=(h&1?-1:1)*e.PI/e.sin(e.PI*p),h=1-h;else return 1/0;for(g=h,h<1?d=h++:d=(h-=s=(h|0)-1)-1,f=0;f<8;++f)u=(u+a[f])*d,l=l*d+c[f];if(p=u/l+1,g<h)p/=g;else if(g>h)for(f=0;f<s;++f)p*=h,h++;return r&&(p=r/p),p},t.gammap=function(o,a){return t.lowRegGamma(o,a)*t.gammafn(o)},t.lowRegGamma=function(o,a){var c=t.gammaln(o),r=o,s=1/o,l=s,u=a+1-o,h=1/1e-30,f=1/u,d=f,g=1,p=-~(e.log(o>=1?o:1/o)*8.5+o*.4+17),b;if(a<0||o<=0)return NaN;if(a<o+1){for(;g<=p;g++)s+=l*=a/++r;return s*e.exp(-a+o*e.log(a)-c)}for(;g<=p;g++)b=-g*(g-o),u+=2,f=b*f+u,h=u+b/h,f=1/f,d*=f*h;return 1-d*e.exp(-a+o*e.log(a)-c)},t.factorialln=function(o){return o<0?NaN:t.gammaln(o+1)},t.factorial=function(o){return o<0?NaN:t.gammafn(o+1)},t.combination=function(o,a){return o>170||a>170?e.exp(t.combinationln(o,a)):t.factorial(o)/t.factorial(a)/t.factorial(o-a)},t.combinationln=function(o,a){return t.factorialln(o)-t.factorialln(a)-t.factorialln(o-a)},t.permutation=function(o,a){return t.factorial(o)/t.factorial(o-a)},t.betafn=function(o,a){if(!(o<=0||a<=0))return o+a>170?e.exp(t.betaln(o,a)):t.gammafn(o)*t.gammafn(a)/t.gammafn(o+a)},t.betaln=function(o,a){return t.gammaln(o)+t.gammaln(a)-t.gammaln(o+a)},t.betacf=function(o,a,c){var r=1e-30,s=1,l=a+c,u=a+1,h=a-1,f=1,d=1-l*o/u,g,p,b,m;for(e.abs(d)<r&&(d=r),d=1/d,m=d;s<=100&&(g=2*s,p=s*(c-s)*o/((h+g)*(a+g)),d=1+p*d,e.abs(d)<r&&(d=r),f=1+p/f,e.abs(f)<r&&(f=r),d=1/d,m*=d*f,p=-(a+s)*(l+s)*o/((a+g)*(u+g)),d=1+p*d,e.abs(d)<r&&(d=r),f=1+p/f,e.abs(f)<r&&(f=r),d=1/d,b=d*f,m*=b,!(e.abs(b-1)<3e-7));s++);return m},t.gammapinv=function(o,a){var c=0,r=a-1,s=1e-8,l=t.gammaln(a),u,h,f,d,g,p,b;if(o>=1)return e.max(100,a+100*e.sqrt(a));if(o<=0)return 0;for(a>1?(p=e.log(r),b=e.exp(r*(p-1)-l),g=o<.5?o:1-o,f=e.sqrt(-2*e.log(g)),u=(2.30753+f*.27061)/(1+f*(.99229+f*.04481))-f,o<.5&&(u=-u),u=e.max(.001,a*e.pow(1-1/(9*a)-u/(3*e.sqrt(a)),3))):(f=1-a*(.253+a*.12),o<f?u=e.pow(o/f,1/a):u=1-e.log(1-(o-f)/(1-f)));c<12;c++){if(u<=0)return 0;if(h=t.lowRegGamma(a,u)-o,a>1?f=b*e.exp(-(u-r)+r*(e.log(u)-p)):f=e.exp(-u+r*e.log(u)-l),d=h/f,u-=f=d/(1-.5*e.min(1,d*((a-1)/u-1))),u<=0&&(u=.5*(u+f)),e.abs(f)<s*u)break}return u},t.erf=function(o){var a=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],c=a.length-1,r=!1,s=0,l=0,u,h,f,d;for(o<0&&(o=-o,r=!0),u=2/(2+o),h=4*u-2;c>0;c--)f=s,s=h*s-l+a[c],l=f;return d=u*e.exp(-o*o+.5*(a[0]+h*s)-l),r?d-1:1-d},t.erfc=function(o){return 1-t.erf(o)},t.erfcinv=function(o){var a=0,c,r,s,l;if(o>=2)return-100;if(o<=0)return 100;for(l=o<1?o:2-o,s=e.sqrt(-2*e.log(l/2)),c=-.70711*((2.30753+s*.27061)/(1+s*(.99229+s*.04481))-s);a<2;a++)r=t.erfc(c)-l,c+=r/(1.1283791670955126*e.exp(-c*c)-c*r);return o<1?c:-c},t.ibetainv=function(o,a,c){var r=1e-8,s=a-1,l=c-1,u=0,h,f,d,g,p,b,m,v,_,x,y;if(o<=0)return 0;if(o>=1)return 1;for(a>=1&&c>=1?(d=o<.5?o:1-o,g=e.sqrt(-2*e.log(d)),m=(2.30753+g*.27061)/(1+g*(.99229+g*.04481))-g,o<.5&&(m=-m),v=(m*m-3)/6,_=2/(1/(2*a-1)+1/(2*c-1)),x=m*e.sqrt(v+_)/_-(1/(2*c-1)-1/(2*a-1))*(v+5/6-2/(3*_)),m=a/(a+c*e.exp(2*x))):(h=e.log(a/(a+c)),f=e.log(c/(a+c)),g=e.exp(a*h)/a,p=e.exp(c*f)/c,x=g+p,o<g/x?m=e.pow(a*x*o,1/a):m=1-e.pow(c*x*(1-o),1/c)),y=-t.gammaln(a)-t.gammaln(c)+t.gammaln(a+c);u<10;u++){if(m===0||m===1)return m;if(b=t.ibeta(m,a,c)-o,g=e.exp(s*e.log(m)+l*e.log(1-m)+y),p=b/g,m-=g=p/(1-.5*e.min(1,p*(s/m-l/(1-m)))),m<=0&&(m=.5*(m+g)),m>=1&&(m=.5*(m+g+1)),e.abs(g)<r*m&&u>0)break}return m},t.ibeta=function(o,a,c){var r=o===0||o===1?0:e.exp(t.gammaln(a+c)-t.gammaln(a)-t.gammaln(c)+a*e.log(o)+c*e.log(1-o));return o<0||o>1?!1:o<(a+1)/(a+c+2)?r*t.betacf(o,a,c)/a:1-r*t.betacf(1-o,c,a)/c},t.randn=function(o,a){var c,r,s,l,u;if(a||(a=o),o)return t.create(o,a,function(){return t.randn()});do c=t._random_fn(),r=1.7156*(t._random_fn()-.5),s=c-.449871,l=e.abs(r)+.386595,u=s*s+l*(.196*l-.25472*s);while(u>.27597&&(u>.27846||r*r>-4*e.log(c)*c*c));return r/c},t.randg=function(o,a,c){var r=o,s,l,u,h,f,d;if(c||(c=a),o||(o=1),a)return d=t.zeros(a,c),d.alter(function(){return t.randg(o)}),d;o<1&&(o+=1),s=o-1/3,l=1/e.sqrt(9*s);do{do f=t.randn(),h=1+l*f;while(h<=0);h=h*h*h,u=t._random_fn()}while(u>1-.331*e.pow(f,4)&&e.log(u)>.5*f*f+s*(1-h+e.log(h)));if(o==r)return s*h;do u=t._random_fn();while(u===0);return e.pow(u,1/r)*s*h},function(i){for(var o=0;o<i.length;o++)(function(a){t.fn[a]=function(){return t(t.map(this,function(c){return t[a](c)}))}})(i[o])}("gammaln gammafn factorial factorialln".split(" ")),function(i){for(var o=0;o<i.length;o++)(function(a){t.fn[a]=function(){return t(t[a].apply(null,arguments))}})(i[o])}("randn".split(" "))}(n,Math),function(t,e){(function(r){for(var s=0;s<r.length;s++)(function(l){t[l]=function u(h,f,d){return this instanceof u?(this._a=h,this._b=f,this._c=d,this):new u(h,f,d)},t.fn[l]=function(u,h,f){var d=t[l](u,h,f);return d.data=this,d},t[l].prototype.sample=function(u){var h=this._a,f=this._b,d=this._c;return u?t.alter(u,function(){return t[l].sample(h,f,d)}):t[l].sample(h,f,d)},function(u){for(var h=0;h<u.length;h++)(function(f){t[l].prototype[f]=function(d){var g=this._a,p=this._b,b=this._c;return!d&&d!==0&&(d=this.data),typeof d!="number"?t.fn.map.call(d,function(m){return t[l][f](m,g,p,b)}):t[l][f](d,g,p,b)}})(u[h])}("pdf cdf inv".split(" ")),function(u){for(var h=0;h<u.length;h++)(function(f){t[l].prototype[f]=function(){return t[l][f](this._a,this._b,this._c)}})(u[h])}("mean median mode variance".split(" "))})(r[s])})("beta centralF cauchy chisquare exponential gamma invgamma kumaraswamy laplace lognormal noncentralt normal pareto studentt weibull uniform binomial negbin hypgeom poisson triangular tukey arcsine".split(" ")),t.extend(t.beta,{pdf:function(s,l,u){return s>1||s<0?0:l==1&&u==1?1:l<512&&u<512?e.pow(s,l-1)*e.pow(1-s,u-1)/t.betafn(l,u):e.exp((l-1)*e.log(s)+(u-1)*e.log(1-s)-t.betaln(l,u))},cdf:function(s,l,u){return s>1||s<0?(s>1)*1:t.ibeta(s,l,u)},inv:function(s,l,u){return t.ibetainv(s,l,u)},mean:function(s,l){return s/(s+l)},median:function(s,l){return t.ibetainv(.5,s,l)},mode:function(s,l){return(s-1)/(s+l-2)},sample:function(s,l){var u=t.randg(s);return u/(u+t.randg(l))},variance:function(s,l){return s*l/(e.pow(s+l,2)*(s+l+1))}}),t.extend(t.centralF,{pdf:function(s,l,u){var h,f,d;return s<0?0:l<=2?s===0&&l<2?1/0:s===0&&l===2?1:1/t.betafn(l/2,u/2)*e.pow(l/u,l/2)*e.pow(s,l/2-1)*e.pow(1+l/u*s,-(l+u)/2):(h=l*s/(u+s*l),f=u/(u+s*l),d=l*f/2,d*t.binomial.pdf((l-2)/2,(l+u-2)/2,h))},cdf:function(s,l,u){return s<0?0:t.ibeta(l*s/(l*s+u),l/2,u/2)},inv:function(s,l,u){return u/(l*(1/t.ibetainv(s,l/2,u/2)-1))},mean:function(s,l){return l>2?l/(l-2):void 0},mode:function(s,l){return s>2?l*(s-2)/(s*(l+2)):void 0},sample:function(s,l){var u=t.randg(s/2)*2,h=t.randg(l/2)*2;return u/s/(h/l)},variance:function(s,l){if(!(l<=4))return 2*l*l*(s+l-2)/(s*(l-2)*(l-2)*(l-4))}}),t.extend(t.cauchy,{pdf:function(s,l,u){return u<0?0:u/(e.pow(s-l,2)+e.pow(u,2))/e.PI},cdf:function(s,l,u){return e.atan((s-l)/u)/e.PI+.5},inv:function(r,s,l){return s+l*e.tan(e.PI*(r-.5))},median:function(s){return s},mode:function(s){return s},sample:function(s,l){return t.randn()*e.sqrt(1/(2*t.randg(.5)))*l+s}}),t.extend(t.chisquare,{pdf:function(s,l){return s<0?0:s===0&&l===2?.5:e.exp((l/2-1)*e.log(s)-s/2-l/2*e.log(2)-t.gammaln(l/2))},cdf:function(s,l){return s<0?0:t.lowRegGamma(l/2,s/2)},inv:function(r,s){return 2*t.gammapinv(r,.5*s)},mean:function(r){return r},median:function(s){return s*e.pow(1-2/(9*s),3)},mode:function(s){return s-2>0?s-2:0},sample:function(s){return t.randg(s/2)*2},variance:function(s){return 2*s}}),t.extend(t.exponential,{pdf:function(s,l){return s<0?0:l*e.exp(-l*s)},cdf:function(s,l){return s<0?0:1-e.exp(-l*s)},inv:function(r,s){return-e.log(1-r)/s},mean:function(r){return 1/r},median:function(r){return 1/r*e.log(2)},mode:function(){return 0},sample:function(s){return-1/s*e.log(t._random_fn())},variance:function(r){return e.pow(r,-2)}}),t.extend(t.gamma,{pdf:function(s,l,u){return s<0?0:s===0&&l===1?1/u:e.exp((l-1)*e.log(s)-s/u-t.gammaln(l)-l*e.log(u))},cdf:function(s,l,u){return s<0?0:t.lowRegGamma(l,s/u)},inv:function(r,s,l){return t.gammapinv(r,s)*l},mean:function(r,s){return r*s},mode:function(s,l){if(s>1)return(s-1)*l},sample:function(s,l){return t.randg(s)*l},variance:function(s,l){return s*l*l}}),t.extend(t.invgamma,{pdf:function(s,l,u){return s<=0?0:e.exp(-(l+1)*e.log(s)-u/s-t.gammaln(l)+l*e.log(u))},cdf:function(s,l,u){return s<=0?0:1-t.lowRegGamma(l,u/s)},inv:function(r,s,l){return l/t.gammapinv(1-r,s)},mean:function(r,s){return r>1?s/(r-1):void 0},mode:function(s,l){return l/(s+1)},sample:function(s,l){return l/t.randg(s)},variance:function(s,l){if(!(s<=2))return l*l/((s-1)*(s-1)*(s-2))}}),t.extend(t.kumaraswamy,{pdf:function(s,l,u){return s===0&&l===1?u:s===1&&u===1?l:e.exp(e.log(l)+e.log(u)+(l-1)*e.log(s)+(u-1)*e.log(1-e.pow(s,l)))},cdf:function(s,l,u){return s<0?0:s>1?1:1-e.pow(1-e.pow(s,l),u)},inv:function(s,l,u){return e.pow(1-e.pow(1-s,1/u),1/l)},mean:function(r,s){return s*t.gammafn(1+1/r)*t.gammafn(s)/t.gammafn(1+1/r+s)},median:function(s,l){return e.pow(1-e.pow(2,-1/l),1/s)},mode:function(s,l){if(s>=1&&l>=1&&s!==1&&l!==1)return e.pow((s-1)/(s*l-1),1/s)},variance:function(){throw new Error("variance not yet implemented")}}),t.extend(t.lognormal,{pdf:function(s,l,u){return s<=0?0:e.exp(-e.log(s)-.5*e.log(2*e.PI)-e.log(u)-e.pow(e.log(s)-l,2)/(2*u*u))},cdf:function(s,l,u){return s<0?0:.5+.5*t.erf((e.log(s)-l)/e.sqrt(2*u*u))},inv:function(r,s,l){return e.exp(-1.4142135623730951*l*t.erfcinv(2*r)+s)},mean:function(s,l){return e.exp(s+l*l/2)},median:function(s){return e.exp(s)},mode:function(s,l){return e.exp(s-l*l)},sample:function(s,l){return e.exp(t.randn()*l+s)},variance:function(s,l){return(e.exp(l*l)-1)*e.exp(2*s+l*l)}}),t.extend(t.noncentralt,{pdf:function(s,l,u){var h=1e-14;return e.abs(u)<h?t.studentt.pdf(s,l):e.abs(s)<h?e.exp(t.gammaln((l+1)/2)-u*u/2-.5*e.log(e.PI*l)-t.gammaln(l/2)):l/s*(t.noncentralt.cdf(s*e.sqrt(1+2/l),l+2,u)-t.noncentralt.cdf(s,l,u))},cdf:function(s,l,u){var h=1e-14,f=200;if(e.abs(u)<h)return t.studentt.cdf(s,l);var d=!1;s<0&&(d=!0,u=-u);for(var g=t.normal.cdf(-u,0,1),p=h+1,b=p,m=s*s/(s*s+l),v=0,_=e.exp(-u*u/2),x=e.exp(-u*u/2-.5*e.log(2)-t.gammaln(3/2))*u;v<f||b>h||p>h;)b=p,v>0&&(_*=u*u/(2*v),x*=u*u/(2*(v+1/2))),p=_*t.beta.cdf(m,v+.5,l/2)+x*t.beta.cdf(m,v+1,l/2),g+=.5*p,v++;return d?1-g:g}}),t.extend(t.normal,{pdf:function(s,l,u){return e.exp(-.5*e.log(2*e.PI)-e.log(u)-e.pow(s-l,2)/(2*u*u))},cdf:function(s,l,u){return .5*(1+t.erf((s-l)/e.sqrt(2*u*u)))},inv:function(r,s,l){return-1.4142135623730951*l*t.erfcinv(2*r)+s},mean:function(r){return r},median:function(s){return s},mode:function(r){return r},sample:function(s,l){return t.randn()*l+s},variance:function(r,s){return s*s}}),t.extend(t.pareto,{pdf:function(s,l,u){return s<l?0:u*e.pow(l,u)/e.pow(s,u+1)},cdf:function(s,l,u){return s<l?0:1-e.pow(l/s,u)},inv:function(s,l,u){return l/e.pow(1-s,1/u)},mean:function(s,l){if(!(l<=1))return l*e.pow(s,l)/(l-1)},median:function(s,l){return s*(l*e.SQRT2)},mode:function(s){return s},variance:function(r,s){if(!(s<=2))return r*r*s/(e.pow(s-1,2)*(s-2))}}),t.extend(t.studentt,{pdf:function(s,l){return l=l>1e100?1e100:l,1/(e.sqrt(l)*t.betafn(.5,l/2))*e.pow(1+s*s/l,-((l+1)/2))},cdf:function(s,l){var u=l/2;return t.ibeta((s+e.sqrt(s*s+l))/(2*e.sqrt(s*s+l)),u,u)},inv:function(r,s){var l=t.ibetainv(2*e.min(r,1-r),.5*s,.5);return l=e.sqrt(s*(1-l)/l),r>.5?l:-l},mean:function(s){return s>1?0:void 0},median:function(){return 0},mode:function(){return 0},sample:function(s){return t.randn()*e.sqrt(s/(2*t.randg(s/2)))},variance:function(s){return s>2?s/(s-2):s>1?1/0:void 0}}),t.extend(t.weibull,{pdf:function(s,l,u){return s<0||l<0||u<0?0:u/l*e.pow(s/l,u-1)*e.exp(-e.pow(s/l,u))},cdf:function(s,l,u){return s<0?0:1-e.exp(-e.pow(s/l,u))},inv:function(r,s,l){return s*e.pow(-e.log(1-r),1/l)},mean:function(r,s){return r*t.gammafn(1+1/s)},median:function(s,l){return s*e.pow(e.log(2),1/l)},mode:function(s,l){return l<=1?0:s*e.pow((l-1)/l,1/l)},sample:function(s,l){return s*e.pow(-e.log(t._random_fn()),1/l)},variance:function(s,l){return s*s*t.gammafn(1+2/l)-e.pow(t.weibull.mean(s,l),2)}}),t.extend(t.uniform,{pdf:function(s,l,u){return s<l||s>u?0:1/(u-l)},cdf:function(s,l,u){return s<l?0:s<u?(s-l)/(u-l):1},inv:function(r,s,l){return s+r*(l-s)},mean:function(s,l){return .5*(s+l)},median:function(s,l){return t.mean(s,l)},mode:function(){throw new Error("mode is not yet implemented")},sample:function(s,l){return s/2+l/2+(l/2-s/2)*(2*t._random_fn()-1)},variance:function(s,l){return e.pow(l-s,2)/12}});function i(r,s,l,u){for(var h=0,f=1,d=1,g=1,p=0,b=0,m;e.abs((d-b)/d)>u;)b=d,m=-(s+p)*(s+l+p)*r/(s+2*p)/(s+2*p+1),h=d+m*h,f=g+m*f,p=p+1,m=p*(l-p)*r/(s+2*p-1)/(s+2*p),d=h+m*d,g=f+m*g,h=h/g,f=f/g,d=d/g,g=1;return d/s}t.extend(t.binomial,{pdf:function(s,l,u){return u===0||u===1?l*u===s?1:0:t.combination(l,s)*e.pow(u,s)*e.pow(1-u,l-s)},cdf:function(s,l,u){var h,f=1e-10;if(s<0)return 0;if(s>=l)return 1;if(u<0||u>1||l<=0)return NaN;s=e.floor(s);var d=u,g=s+1,p=l-s,b=g+p,m=e.exp(t.gammaln(b)-t.gammaln(p)-t.gammaln(g)+g*e.log(d)+p*e.log(1-d));return d<(g+1)/(b+2)?h=m*i(d,g,p,f):h=1-m*i(1-d,p,g,f),e.round((1-h)*(1/f))/(1/f)}}),t.extend(t.negbin,{pdf:function(s,l,u){return s!==s>>>0?!1:s<0?0:t.combination(s+l-1,l-1)*e.pow(1-u,s)*e.pow(u,l)},cdf:function(s,l,u){var h=0,f=0;if(s<0)return 0;for(;f<=s;f++)h+=t.negbin.pdf(f,l,u);return h}}),t.extend(t.hypgeom,{pdf:function(s,l,u,h){if(s!==s|0)return!1;if(s<0||s<u-(l-h))return 0;if(s>h||s>u)return 0;if(u*2>l)return h*2>l?t.hypgeom.pdf(l-u-h+s,l,l-u,l-h):t.hypgeom.pdf(h-s,l,l-u,h);if(h*2>l)return t.hypgeom.pdf(u-s,l,u,l-h);if(u<h)return t.hypgeom.pdf(s,l,h,u);for(var f=1,d=0,g=0;g<s;g++){for(;f>1&&d<h;)f*=1-u/(l-d),d++;f*=(h-g)*(u-g)/((g+1)*(l-u-h+g+1))}for(;d<h;d++)f*=1-u/(l-d);return e.min(1,e.max(0,f))},cdf:function(s,l,u,h){if(s<0||s<u-(l-h))return 0;if(s>=h||s>=u)return 1;if(u*2>l)return h*2>l?t.hypgeom.cdf(l-u-h+s,l,l-u,l-h):1-t.hypgeom.cdf(h-s-1,l,l-u,h);if(h*2>l)return 1-t.hypgeom.cdf(u-s-1,l,u,l-h);if(u<h)return t.hypgeom.cdf(s,l,h,u);for(var f=1,d=1,g=0,p=0;p<s;p++){for(;f>1&&g<h;){var b=1-u/(l-g);d*=b,f*=b,g++}d*=(h-p)*(u-p)/((p+1)*(l-u-h+p+1)),f+=d}for(;g<h;g++)f*=1-u/(l-g);return e.min(1,e.max(0,f))}}),t.extend(t.poisson,{pdf:function(s,l){return l<0||s%1!==0||s<0?0:e.pow(l,s)*e.exp(-l)/t.factorial(s)},cdf:function(s,l){var u=[],h=0;if(s<0)return 0;for(;h<=s;h++)u.push(t.poisson.pdf(h,l));return t.sum(u)},mean:function(r){return r},variance:function(r){return r},sampleSmall:function(s){var l=1,u=0,h=e.exp(-s);do u++,l*=t._random_fn();while(l>h);return u-1},sampleLarge:function(s){var l=s,u,h,f,d,g,p,b,m,v,_;for(d=e.sqrt(l),g=e.log(l),b=.931+2.53*d,p=-.059+.02483*b,m=1.1239+1.1328/(b-3.4),v=.9277-3.6224/(b-2);;){if(h=e.random()-.5,f=e.random(),_=.5-e.abs(h),u=e.floor((2*p/_+b)*h+l+.43),_>=.07&&f<=v)return u;if(!(u<0||_<.013&&f>_)&&e.log(f)+e.log(m)-e.log(p/(_*_)+b)<=-l+u*g-t.loggam(u+1))return u}},sample:function(s){return s<10?this.sampleSmall(s):this.sampleLarge(s)}}),t.extend(t.triangular,{pdf:function(s,l,u,h){return u<=l||h<l||h>u?NaN:s<l||s>u?0:s<h?2*(s-l)/((u-l)*(h-l)):s===h?2/(u-l):2*(u-s)/((u-l)*(u-h))},cdf:function(s,l,u,h){return u<=l||h<l||h>u?NaN:s<=l?0:s>=u?1:s<=h?e.pow(s-l,2)/((u-l)*(h-l)):1-e.pow(u-s,2)/((u-l)*(u-h))},inv:function(s,l,u,h){return u<=l||h<l||h>u?NaN:s<=(h-l)/(u-l)?l+(u-l)*e.sqrt(s*((h-l)/(u-l))):l+(u-l)*(1-e.sqrt((1-s)*(1-(h-l)/(u-l))))},mean:function(s,l,u){return(s+l+u)/3},median:function(s,l,u){if(u<=(s+l)/2)return l-e.sqrt((l-s)*(l-u))/e.sqrt(2);if(u>(s+l)/2)return s+e.sqrt((l-s)*(u-s))/e.sqrt(2)},mode:function(s,l,u){return u},sample:function(s,l,u){var h=t._random_fn();return h<(u-s)/(l-s)?s+e.sqrt(h*(l-s)*(u-s)):l-e.sqrt((1-h)*(l-s)*(l-u))},variance:function(s,l,u){return(s*s+l*l+u*u-s*l-s*u-l*u)/18}}),t.extend(t.arcsine,{pdf:function(s,l,u){return u<=l?NaN:s<=l||s>=u?0:2/e.PI*e.pow(e.pow(u-l,2)-e.pow(2*s-l-u,2),-.5)},cdf:function(s,l,u){return s<l?0:s<u?2/e.PI*e.asin(e.sqrt((s-l)/(u-l))):1},inv:function(r,s,l){return s+(.5-.5*e.cos(e.PI*r))*(l-s)},mean:function(s,l){return l<=s?NaN:(s+l)/2},median:function(s,l){return l<=s?NaN:(s+l)/2},mode:function(){throw new Error("mode is not yet implemented")},sample:function(s,l){return(s+l)/2+(l-s)/2*e.sin(2*e.PI*t.uniform.sample(0,1))},variance:function(s,l){return l<=s?NaN:e.pow(l-s,2)/8}});function o(r){return r/e.abs(r)}t.extend(t.laplace,{pdf:function(s,l,u){return u<=0?0:e.exp(-e.abs(s-l)/u)/(2*u)},cdf:function(s,l,u){return u<=0?0:s<l?.5*e.exp((s-l)/u):1-.5*e.exp(-(s-l)/u)},mean:function(r){return r},median:function(r){return r},mode:function(r){return r},variance:function(r,s){return 2*s*s},sample:function(s,l){var u=t._random_fn()-.5;return s-l*o(u)*e.log(1-2*e.abs(u))}});function a(r,s,l){var u=12,h=6,f=-30,d=-50,g=60,p=8,b=3,m=2,v=3,_=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],x=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],y=r*.5;if(y>=p)return 1;var w=2*t.normal.cdf(y,0,1,1,0)-1;w>=e.exp(d/l)?w=e.pow(w,l):w=0;var k;r>b?k=m:k=v;for(var P=y,C=(p-y)/k,A=P+C,T=0,E=l-1,V=1;V<=k;V++){for(var G=0,L=.5*(A+P),z=.5*(A-P),M=1;M<=u;M++){var R,H;h<M?(R=u-M+1,H=_[R-1]):(R=M,H=-_[R-1]);var j=z*H,X=L+j,et=X*X;if(et>g)break;var dt=2*t.normal.cdf(X,0,1,1,0),yt=2*t.normal.cdf(X,r,1,1,0),ct=dt*.5-yt*.5;ct>=e.exp(f/E)&&(ct=x[R-1]*e.exp(-(.5*et))*e.pow(ct,E),G+=ct)}G*=2*z*l/e.sqrt(2*e.PI),T+=G,P=A,A+=C}return w+=T,w<=e.exp(f/s)?0:(w=e.pow(w,s),w>=1?1:w)}function c(r,s,l){var u=.322232421088,h=.099348462606,f=-1,d=.588581570495,g=-.342242088547,p=.531103462366,b=-.204231210125,m=.10353775285,v=-453642210148e-16,_=.0038560700634,x=.8832,y=.2368,w=1.214,k=1.208,P=1.4142,C=120,A=.5-.5*r,T=e.sqrt(e.log(1/(A*A))),E=T+((((T*v+b)*T+g)*T+f)*T+u)/((((T*_+m)*T+p)*T+d)*T+h);l<C&&(E+=(E*E*E+E)/l/4);var V=x-y*E;return l<C&&(V+=-w/l+k*E/l),E*(V*e.log(s-1)+P)}t.extend(t.tukey,{cdf:function(s,l,u){var h=1,f=l,d=16,g=8,p=-30,b=1e-14,m=100,v=800,_=5e3,x=25e3,y=1,w=.5,k=.25,P=.125,C=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],A=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(s<=0)return 0;if(u<2||h<1||f<2)return NaN;if(!Number.isFinite(s))return 1;if(u>x)return a(s,h,f);var T=u*.5,E=T*e.log(u)-u*e.log(2)-t.gammaln(T),V=T-1,G=u*.25,L;u<=m?L=y:u<=v?L=w:u<=_?L=k:L=P,E+=e.log(L);for(var z=0,M=1;M<=50;M++){for(var R=0,H=(2*M-1)*L,j=1;j<=d;j++){var X,et;g<j?(X=j-g-1,et=E+V*e.log(H+C[X]*L)-(C[X]*L+H)*G):(X=j-1,et=E+V*e.log(H-C[X]*L)+(C[X]*L-H)*G);var dt;if(et>=p){g<j?dt=s*e.sqrt((C[X]*L+H)*.5):dt=s*e.sqrt((-(C[X]*L)+H)*.5);var yt=a(dt,h,f),ct=yt*A[X]*e.exp(et);R+=ct}}if(M*L>=1&&R<=b)break;z+=R}if(R>b)throw new Error("tukey.cdf failed to converge");return z>1&&(z=1),z},inv:function(r,s,l){var u=1,h=s,f=1e-4,d=50;if(l<2||u<1||h<2)return NaN;if(r<0||r>1)return NaN;if(r===0)return 0;if(r===1)return 1/0;var g=c(r,h,l),p=t.tukey.cdf(g,s,l)-r,b;p>0?b=e.max(0,g-1):b=g+1;for(var m=t.tukey.cdf(b,s,l)-r,v,_=1;_<d;_++){v=b-m*(b-g)/(m-p),p=m,g=b,v<0&&(v=0,m=-r),m=t.tukey.cdf(v,s,l)-r,b=v;var x=e.abs(b-g);if(x<f)return v}throw new Error("tukey.inv failed to converge")}})}(n,Math),function(t,e){var i=Array.prototype.push,o=t.utils.isArray;function a(c){return o(c)||c instanceof t}t.extend({add:function(r,s){return a(s)?(a(s[0])||(s=[s]),t.map(r,function(l,u,h){return l+s[u][h]})):t.map(r,function(l){return l+s})},subtract:function(r,s){return a(s)?(a(s[0])||(s=[s]),t.map(r,function(l,u,h){return l-s[u][h]||0})):t.map(r,function(l){return l-s})},divide:function(r,s){return a(s)?(a(s[0])||(s=[s]),t.multiply(r,t.inv(s))):t.map(r,function(l){return l/s})},multiply:function(r,s){var l,u,h,f,d,g,p,b;if(r.length===void 0&&s.length===void 0)return r*s;if(d=r.length,g=r[0].length,p=t.zeros(d,h=a(s)?s[0].length:g),b=0,a(s)){for(;b<h;b++)for(l=0;l<d;l++){for(f=0,u=0;u<g;u++)f+=r[l][u]*s[u][b];p[l][b]=f}return d===1&&b===1?p[0][0]:p}return t.map(r,function(m){return m*s})},outer:function(r,s){return t.multiply(r.map(function(l){return[l]}),[s])},dot:function(r,s){a(r[0])||(r=[r]),a(s[0])||(s=[s]);for(var l=r[0].length===1&&r.length!==1?t.transpose(r):r,u=s[0].length===1&&s.length!==1?t.transpose(s):s,h=[],f=0,d=l.length,g=l[0].length,p,b;f<d;f++){for(h[f]=[],p=0,b=0;b<g;b++)p+=l[f][b]*u[f][b];h[f]=p}return h.length===1?h[0]:h},pow:function(r,s){return t.map(r,function(l){return e.pow(l,s)})},exp:function(r){return t.map(r,function(s){return e.exp(s)})},log:function(r){return t.map(r,function(s){return e.log(s)})},abs:function(r){return t.map(r,function(s){return e.abs(s)})},norm:function(r,s){var l=0,u=0;for(isNaN(s)&&(s=2),a(r[0])&&(r=r[0]);u<r.length;u++)l+=e.pow(e.abs(r[u]),s);return e.pow(l,1/s)},angle:function(r,s){return e.acos(t.dot(r,s)/(t.norm(r)*t.norm(s)))},aug:function(r,s){var l=[],u;for(u=0;u<r.length;u++)l.push(r[u].slice());for(u=0;u<l.length;u++)i.apply(l[u],s[u]);return l},inv:function(r){for(var s=r.length,l=r[0].length,u=t.identity(s,l),h=t.gauss_jordan(r,u),f=[],d=0,g;d<s;d++)for(f[d]=[],g=l;g<h[0].length;g++)f[d][g-l]=h[d][g];return f},det:function c(r){if(r.length===2)return r[0][0]*r[1][1]-r[0][1]*r[1][0];for(var s=0,l=0;l<r.length;l++){for(var u=[],h=1;h<r.length;h++){u[h-1]=[];for(var f=0;f<r.length;f++)f<l?u[h-1][f]=r[h][f]:f>l&&(u[h-1][f-1]=r[h][f])}var d=l%2?-1:1;s+=c(u)*r[0][l]*d}return s},gauss_elimination:function(r,s){var l=0,u=0,h=r.length,f=r[0].length,d=1,g=0,p=[],b,m,v,_;for(r=t.aug(r,s),b=r[0].length,l=0;l<h;l++){for(m=r[l][l],u=l,_=l+1;_<f;_++)m<e.abs(r[_][l])&&(m=r[_][l],u=_);if(u!=l)for(_=0;_<b;_++)v=r[l][_],r[l][_]=r[u][_],r[u][_]=v;for(u=l+1;u<h;u++)for(d=r[u][l]/r[l][l],_=l;_<b;_++)r[u][_]=r[u][_]-d*r[l][_]}for(l=h-1;l>=0;l--){for(g=0,u=l+1;u<=h-1;u++)g=g+p[u]*r[l][u];p[l]=(r[l][b-1]-g)/r[l][l]}return p},gauss_jordan:function(r,s){var l=t.aug(r,s),u=l.length,h=l[0].length,f=0,d,g,p;for(g=0;g<u;g++){var b=g;for(p=g+1;p<u;p++)e.abs(l[p][g])>e.abs(l[b][g])&&(b=p);var m=l[g];for(l[g]=l[b],l[b]=m,p=g+1;p<u;p++)for(f=l[p][g]/l[g][g],d=g;d<h;d++)l[p][d]-=l[g][d]*f}for(g=u-1;g>=0;g--){for(f=l[g][g],p=0;p<g;p++)for(d=h-1;d>g-1;d--)l[p][d]-=l[g][d]*l[p][g]/f;for(l[g][g]/=f,d=u;d<h;d++)l[g][d]/=f}return l},triaUpSolve:function(r,s){var l=r[0].length,u=t.zeros(1,l)[0],h,f=!1;return s[0].length!=null&&(s=s.map(function(d){return d[0]}),f=!0),t.arange(l-1,-1,-1).forEach(function(d){h=t.arange(d+1,l).map(function(g){return u[g]*r[d][g]}),u[d]=(s[d]-t.sum(h))/r[d][d]}),f?u.map(function(d){return[d]}):u},triaLowSolve:function(r,s){var l=r[0].length,u=t.zeros(1,l)[0],h,f=!1;return s[0].length!=null&&(s=s.map(function(d){return d[0]}),f=!0),t.arange(l).forEach(function(d){h=t.arange(d).map(function(g){return r[d][g]*u[g]}),u[d]=(s[d]-t.sum(h))/r[d][d]}),f?u.map(function(d){return[d]}):u},lu:function(r){var s=r.length,l=t.identity(s),u=t.zeros(r.length,r[0].length),h;return t.arange(s).forEach(function(f){u[0][f]=r[0][f]}),t.arange(1,s).forEach(function(f){t.arange(f).forEach(function(d){h=t.arange(d).map(function(g){return l[f][g]*u[g][d]}),l[f][d]=(r[f][d]-t.sum(h))/u[d][d]}),t.arange(f,s).forEach(function(d){h=t.arange(f).map(function(g){return l[f][g]*u[g][d]}),u[f][d]=r[h.length][d]-t.sum(h)})}),[l,u]},cholesky:function(r){var s=r.length,l=t.zeros(r.length,r[0].length),u;return t.arange(s).forEach(function(h){u=t.arange(h).map(function(f){return e.pow(l[h][f],2)}),l[h][h]=e.sqrt(r[h][h]-t.sum(u)),t.arange(h+1,s).forEach(function(f){u=t.arange(h).map(function(d){return l[h][d]*l[f][d]}),l[f][h]=(r[h][f]-t.sum(u))/l[h][h]})}),l},gauss_jacobi:function(r,s,l,u){for(var h=0,f=0,d=r.length,g=[],p=[],b=[],m,v,_,x;h<d;h++)for(g[h]=[],p[h]=[],b[h]=[],f=0;f<d;f++)h>f?(g[h][f]=r[h][f],p[h][f]=b[h][f]=0):h<f?(p[h][f]=r[h][f],g[h][f]=b[h][f]=0):(b[h][f]=r[h][f],g[h][f]=p[h][f]=0);for(_=t.multiply(t.multiply(t.inv(b),t.add(g,p)),-1),v=t.multiply(t.inv(b),s),m=l,x=t.add(t.multiply(_,l),v),h=2;e.abs(t.norm(t.subtract(x,m)))>u;)m=x,x=t.add(t.multiply(_,m),v),h++;return x},gauss_seidel:function(r,s,l,u){for(var h=0,f=r.length,d=[],g=[],p=[],b,m,v,_,x;h<f;h++)for(d[h]=[],g[h]=[],p[h]=[],b=0;b<f;b++)h>b?(d[h][b]=r[h][b],g[h][b]=p[h][b]=0):h<b?(g[h][b]=r[h][b],d[h][b]=p[h][b]=0):(p[h][b]=r[h][b],d[h][b]=g[h][b]=0);for(_=t.multiply(t.multiply(t.inv(t.add(p,d)),g),-1),v=t.multiply(t.inv(t.add(p,d)),s),m=l,x=t.add(t.multiply(_,l),v),h=2;e.abs(t.norm(t.subtract(x,m)))>u;)m=x,x=t.add(t.multiply(_,m),v),h=h+1;return x},SOR:function(r,s,l,u,h){for(var f=0,d=r.length,g=[],p=[],b=[],m,v,_,x,y;f<d;f++)for(g[f]=[],p[f]=[],b[f]=[],m=0;m<d;m++)f>m?(g[f][m]=r[f][m],p[f][m]=b[f][m]=0):f<m?(p[f][m]=r[f][m],g[f][m]=b[f][m]=0):(b[f][m]=r[f][m],g[f][m]=p[f][m]=0);for(x=t.multiply(t.inv(t.add(b,t.multiply(g,h))),t.subtract(t.multiply(b,1-h),t.multiply(p,h))),_=t.multiply(t.multiply(t.inv(t.add(b,t.multiply(g,h))),s),h),v=l,y=t.add(t.multiply(x,l),_),f=2;e.abs(t.norm(t.subtract(y,v)))>u;)v=y,y=t.add(t.multiply(x,v),_),f++;return y},householder:function(r){for(var s=r.length,l=r[0].length,u=0,h=[],f=[],d,g,p,b,m;u<s-1;u++){for(d=0,b=u+1;b<l;b++)d+=r[b][u]*r[b][u];for(m=r[u+1][u]>0?-1:1,d=m*e.sqrt(d),g=e.sqrt((d*d-r[u+1][u]*d)/2),h=t.zeros(s,1),h[u+1][0]=(r[u+1][u]-d)/(2*g),p=u+2;p<s;p++)h[p][0]=r[p][u]/(2*g);f=t.subtract(t.identity(s,l),t.multiply(t.multiply(h,t.transpose(h)),2)),r=t.multiply(f,t.multiply(r,f))}return r},QR:function(){var c=t.sum,r=t.arange;function s(l){var u=l.length,h=l[0].length,f=t.zeros(h,h);l=t.copy(l);var d,g,p;for(g=0;g<h;g++){for(f[g][g]=e.sqrt(c(r(u).map(function(b){return l[b][g]*l[b][g]}))),d=0;d<u;d++)l[d][g]=l[d][g]/f[g][g];for(p=g+1;p<h;p++)for(f[g][p]=c(r(u).map(function(b){return l[b][g]*l[b][p]})),d=0;d<u;d++)l[d][p]=l[d][p]-l[d][g]*f[g][p]}return[l,f]}return s}(),lstsq:function(){function c(s){s=t.copy(s);var l=s.length,u=t.identity(l);return t.arange(l-1,-1,-1).forEach(function(h){t.sliceAssign(u,{row:h},t.divide(t.slice(u,{row:h}),s[h][h])),t.sliceAssign(s,{row:h},t.divide(t.slice(s,{row:h}),s[h][h])),t.arange(h).forEach(function(f){var d=t.multiply(s[f][h],-1),g=t.slice(s,{row:f}),p=t.multiply(t.slice(s,{row:h}),d);t.sliceAssign(s,{row:f},t.add(g,p));var b=t.slice(u,{row:f}),m=t.multiply(t.slice(u,{row:h}),d);t.sliceAssign(u,{row:f},t.add(b,m))})}),u}function r(s,l){var u=!1;l[0].length===void 0&&(l=l.map(function(x){return[x]}),u=!0);var h=t.QR(s),f=h[0],d=h[1],g=s[0].length,p=t.slice(f,{col:{end:g}}),b=t.slice(d,{row:{end:g}}),m=c(b),v=t.transpose(p);v[0].length===void 0&&(v=[v]);var _=t.multiply(t.multiply(m,v),l);return _.length===void 0&&(_=[[_]]),u?_.map(function(x){return x[0]}):_}return r}(),jacobi:function(r){for(var s=1,l=r.length,u=t.identity(l,l),h=[],f,d,g,p,b,m,v,_;s===1;){for(m=r[0][1],p=0,b=1,d=0;d<l;d++)for(g=0;g<l;g++)d!=g&&m<e.abs(r[d][g])&&(m=e.abs(r[d][g]),p=d,b=g);for(r[p][p]===r[b][b]?v=r[p][b]>0?e.PI/4:-e.PI/4:v=e.atan(2*r[p][b]/(r[p][p]-r[b][b]))/2,_=t.identity(l,l),_[p][p]=e.cos(v),_[p][b]=-e.sin(v),_[b][p]=e.sin(v),_[b][b]=e.cos(v),u=t.multiply(u,_),f=t.multiply(t.multiply(t.inv(_),r),_),r=f,s=0,d=1;d<l;d++)for(g=1;g<l;g++)d!=g&&e.abs(r[d][g])>.001&&(s=1)}for(d=0;d<l;d++)h.push(r[d][d]);return[u,h]},rungekutta:function(r,s,l,u,h,f){var d,g,p,b,m;if(f===2)for(;u<=l;)d=s*r(u,h),g=s*r(u+s,h+d),p=h+(d+g)/2,h=p,u=u+s;if(f===4)for(;u<=l;)d=s*r(u,h),g=s*r(u+s/2,h+d/2),b=s*r(u+s/2,h+g/2),m=s*r(u+s,h+b),p=h+(d+2*g+2*b+m)/6,h=p,u=u+s;return h},romberg:function(r,s,l,u){for(var h=0,f=(l-s)/2,d=[],g=[],p=[],b,m,v,_,x;h<u/2;){for(x=r(s),v=s,_=0;v<=l;v=v+f,_++)d[_]=v;for(b=d.length,v=1;v<b-1;v++)x+=(v%2!==0?4:2)*r(d[v]);x=f/3*(x+r(l)),p[h]=x,f/=2,h++}for(m=p.length,b=1;m!==1;){for(v=0;v<m-1;v++)g[v]=(e.pow(4,b)*p[v+1]-p[v])/(e.pow(4,b)-1);m=g.length,p=g,g=[],b++}return p},richardson:function(r,s,l,u){function h(y,w){for(var k=0,P=y.length,C;k<P;k++)y[k]===w&&(C=k);return C}for(var f=e.abs(l-r[h(r,l)+1]),d=0,g=[],p=[],b,m,v,_,x;u>=f;)b=h(r,l+u),m=h(r,l),g[d]=(s[b]-2*s[m]+s[2*m-b])/(u*u),u/=2,d++;for(_=g.length,v=1;_!=1;){for(x=0;x<_-1;x++)p[x]=(e.pow(4,v)*g[x+1]-g[x])/(e.pow(4,v)-1);_=p.length,g=p,p=[],v++}return g},simpson:function(r,s,l,u){for(var h=(l-s)/u,f=r(s),d=[],g=s,p=0,b=1,m;g<=l;g=g+h,p++)d[p]=g;for(m=d.length;b<m-1;b++)f+=(b%2!==0?4:2)*r(d[b]);return h/3*(f+r(l))},hermite:function(r,s,l,u){for(var h=r.length,f=0,d=0,g=[],p=[],b=[],m=[],v;d<h;d++){for(g[d]=1,v=0;v<h;v++)d!=v&&(g[d]*=(u-r[v])/(r[d]-r[v]));for(p[d]=0,v=0;v<h;v++)d!=v&&(p[d]+=1/(r[d]-r[v]));b[d]=(1-2*(u-r[d])*p[d])*(g[d]*g[d]),m[d]=(u-r[d])*(g[d]*g[d]),f+=b[d]*s[d]+m[d]*l[d]}return f},lagrange:function(r,s,l){for(var u=0,h=0,f,d,g=r.length;h<g;h++){for(d=s[h],f=0;f<g;f++)h!=f&&(d*=(l-r[f])/(r[h]-r[f]));u+=d}return u},cubic_spline:function(r,s,l){for(var u=r.length,h=0,f,d=[],g=[],p=[],b=[],m=[],v=[],_=[];h<u-1;h++)m[h]=r[h+1]-r[h];for(p[0]=0,h=1;h<u-1;h++)p[h]=3/m[h]*(s[h+1]-s[h])-3/m[h-1]*(s[h]-s[h-1]);for(h=1;h<u-1;h++)d[h]=[],g[h]=[],d[h][h-1]=m[h-1],d[h][h]=2*(m[h-1]+m[h]),d[h][h+1]=m[h],g[h][0]=p[h];for(b=t.multiply(t.inv(d),g),f=0;f<u-1;f++)v[f]=(s[f+1]-s[f])/m[f]-m[f]*(b[f+1][0]+2*b[f][0])/3,_[f]=(b[f+1][0]-b[f][0])/(3*m[f]);for(f=0;f<u&&!(r[f]>l);f++);return f-=1,s[f]+(l-r[f])*v[f]+t.sq(l-r[f])*b[f]+(l-r[f])*t.sq(l-r[f])*_[f]},gauss_quadrature:function(){throw new Error("gauss_quadrature not yet implemented")},PCA:function(r){var s=r.length,l=r[0].length,u=0,h,f,d=[],g=[],p=[],b=[],m=[],v=[],_=[],x=[],y=[],w=[];for(u=0;u<s;u++)d[u]=t.sum(r[u])/l;for(u=0;u<l;u++)for(_[u]=[],h=0;h<s;h++)_[u][h]=r[h][u]-d[h];for(_=t.transpose(_),u=0;u<s;u++)for(x[u]=[],h=0;h<s;h++)x[u][h]=t.dot([_[u]],[_[h]])/(l-1);for(p=t.jacobi(x),y=p[0],g=p[1],w=t.transpose(y),u=0;u<g.length;u++)for(h=u;h<g.length;h++)g[u]<g[h]&&(f=g[u],g[u]=g[h],g[h]=f,b=w[u],w[u]=w[h],w[h]=b);for(v=t.transpose(_),u=0;u<s;u++)for(m[u]=[],h=0;h<v.length;h++)m[u][h]=t.dot([w[u]],[v[h]]);return[r,g,w,m]}}),function(c){for(var r=0;r<c.length;r++)(function(s){t.fn[s]=function(l,u){var h=this;return u?(setTimeout(function(){u.call(h,t.fn[s].call(h,l))},15),this):typeof t[s](this,l)=="number"?t[s](this,l):t(t[s](this,l))}})(c[r])}("add divide multiply subtract dot pow exp log abs norm angle".split(" "))}(n,Math),function(t,e){var i=[].slice,o=t.utils.isNumber,a=t.utils.isArray;t.extend({zscore:function(){var s=i.call(arguments);return o(s[1])?(s[0]-s[1])/s[2]:(s[0]-t.mean(s[1]))/t.stdev(s[1],s[2])},ztest:function(){var s=i.call(arguments),l;return a(s[1])?(l=t.zscore(s[0],s[1],s[3]),s[2]===1?t.normal.cdf(-e.abs(l),0,1):t.normal.cdf(-e.abs(l),0,1)*2):s.length>2?(l=t.zscore(s[0],s[1],s[2]),s[3]===1?t.normal.cdf(-e.abs(l),0,1):t.normal.cdf(-e.abs(l),0,1)*2):(l=s[0],s[1]===1?t.normal.cdf(-e.abs(l),0,1):t.normal.cdf(-e.abs(l),0,1)*2)}}),t.extend(t.fn,{zscore:function(s,l){return(s-this.mean())/this.stdev(l)},ztest:function(s,l,u){var h=e.abs(this.zscore(s,u));return l===1?t.normal.cdf(-h,0,1):t.normal.cdf(-h,0,1)*2}}),t.extend({tscore:function(){var s=i.call(arguments);return s.length===4?(s[0]-s[1])/(s[2]/e.sqrt(s[3])):(s[0]-t.mean(s[1]))/(t.stdev(s[1],!0)/e.sqrt(s[1].length))},ttest:function(){var s=i.call(arguments),l;return s.length===5?(l=e.abs(t.tscore(s[0],s[1],s[2],s[3])),s[4]===1?t.studentt.cdf(-l,s[3]-1):t.studentt.cdf(-l,s[3]-1)*2):o(s[1])?(l=e.abs(s[0]),s[2]==1?t.studentt.cdf(-l,s[1]-1):t.studentt.cdf(-l,s[1]-1)*2):(l=e.abs(t.tscore(s[0],s[1])),s[2]==1?t.studentt.cdf(-l,s[1].length-1):t.studentt.cdf(-l,s[1].length-1)*2)}}),t.extend(t.fn,{tscore:function(s){return(s-this.mean())/(this.stdev(!0)/e.sqrt(this.cols()))},ttest:function(s,l){return l===1?1-t.studentt.cdf(e.abs(this.tscore(s)),this.cols()-1):t.studentt.cdf(-e.abs(this.tscore(s)),this.cols()-1)*2}}),t.extend({anovafscore:function(){var s=i.call(arguments),l,u,h,f,d,g,p,b;if(s.length===1){for(d=new Array(s[0].length),p=0;p<s[0].length;p++)d[p]=s[0][p];s=d}for(u=new Array,p=0;p<s.length;p++)u=u.concat(s[p]);for(h=t.mean(u),l=0,p=0;p<s.length;p++)l=l+s[p].length*e.pow(t.mean(s[p])-h,2);for(l/=s.length-1,g=0,p=0;p<s.length;p++)for(f=t.mean(s[p]),b=0;b<s[p].length;b++)g+=e.pow(s[p][b]-f,2);return g/=u.length-s.length,l/g},anovaftest:function(){var s=i.call(arguments),l,u,h,f;if(o(s[0]))return 1-t.centralF.cdf(s[0],s[1],s[2]);var d=t.anovafscore(s);for(l=s.length-1,h=0,f=0;f<s.length;f++)h=h+s[f].length;return u=h-l-1,1-t.centralF.cdf(d,l,u)},ftest:function(s,l,u){return 1-t.centralF.cdf(s,l,u)}}),t.extend(t.fn,{anovafscore:function(){return t.anovafscore(this.toArray())},anovaftes:function(){var s=0,l;for(l=0;l<this.length;l++)s=s+this[l].length;return t.ftest(this.anovafscore(),this.length-1,s-this.length)}}),t.extend({qscore:function(){var s=i.call(arguments),l,u,h,f,d;return o(s[0])?(l=s[0],u=s[1],h=s[2],f=s[3],d=s[4]):(l=t.mean(s[0]),u=t.mean(s[1]),h=s[0].length,f=s[1].length,d=s[2]),e.abs(l-u)/(d*e.sqrt((1/h+1/f)/2))},qtest:function(){var s=i.call(arguments),l;s.length===3?(l=s[0],s=s.slice(1)):s.length===7?(l=t.qscore(s[0],s[1],s[2],s[3],s[4]),s=s.slice(5)):(l=t.qscore(s[0],s[1],s[2]),s=s.slice(3));var u=s[0],h=s[1];return 1-t.tukey.cdf(l,h,u-h)},tukeyhsd:function(s){for(var l=t.pooledstdev(s),u=s.map(function(b){return t.mean(b)}),h=s.reduce(function(b,m){return b+m.length},0),f=[],d=0;d<s.length;++d)for(var g=d+1;g<s.length;++g){var p=t.qtest(u[d],u[g],s[d].length,s[g].length,l,h,s.length);f.push([[d,g],p])}return f}}),t.extend({normalci:function(){var s=i.call(arguments),l=new Array(2),u;return s.length===4?u=e.abs(t.normal.inv(s[1]/2,0,1)*s[2]/e.sqrt(s[3])):u=e.abs(t.normal.inv(s[1]/2,0,1)*t.stdev(s[2])/e.sqrt(s[2].length)),l[0]=s[0]-u,l[1]=s[0]+u,l},tci:function(){var s=i.call(arguments),l=new Array(2),u;return s.length===4?u=e.abs(t.studentt.inv(s[1]/2,s[3]-1)*s[2]/e.sqrt(s[3])):u=e.abs(t.studentt.inv(s[1]/2,s[2].length-1)*t.stdev(s[2],!0)/e.sqrt(s[2].length)),l[0]=s[0]-u,l[1]=s[0]+u,l},significant:function(s,l){return s<l}}),t.extend(t.fn,{normalci:function(s,l){return t.normalci(s,l,this.toArray())},tci:function(s,l){return t.tci(s,l,this.toArray())}});function c(r,s,l,u){if(r>1||l>1||r<=0||l<=0)throw new Error("Proportions should be greater than 0 and less than 1");var h=(r*s+l*u)/(s+u),f=e.sqrt(h*(1-h)*(1/s+1/u));return(r-l)/f}t.extend(t.fn,{oneSidedDifferenceOfProportions:function(s,l,u,h){var f=c(s,l,u,h);return t.ztest(f,1)},twoSidedDifferenceOfProportions:function(s,l,u,h){var f=c(s,l,u,h);return t.ztest(f,2)}})}(n,Math),n.models=function(){function t(c){var r=c[0].length,s=n.arange(r).map(function(l){var u=n.arange(r).filter(function(h){return h!==l});return e(n.col(c,l).map(function(h){return h[0]}),n.col(c,u))});return s}function e(c,r){var s=c.length,l=r[0].length-1,u=s-l-1,h=n.lstsq(r,c),f=n.multiply(r,h.map(function(_){return[_]})).map(function(_){return _[0]}),d=n.subtract(c,f),g=n.mean(c),p=n.sum(f.map(function(_){return Math.pow(_-g,2)})),b=n.sum(c.map(function(_,x){return Math.pow(_-f[x],2)})),m=p+b,v=p/m;return{exog:r,endog:c,nobs:s,df_model:l,df_resid:u,coef:h,predict:f,resid:d,ybar:g,SST:m,SSE:p,SSR:b,R2:v}}function i(c){var r=t(c.exog),s=Math.sqrt(c.SSR/c.df_resid),l=r.map(function(g){var p=g.SST,b=g.R2;return s/Math.sqrt(p*(1-b))}),u=c.coef.map(function(g,p){return(g-0)/l[p]}),h=u.map(function(g){var p=n.studentt.cdf(g,c.df_resid);return(p>.5?1-p:p)*2}),f=n.studentt.inv(.975,c.df_resid),d=c.coef.map(function(g,p){var b=f*l[p];return[g-b,g+b]});return{se:l,t:u,p:h,sigmaHat:s,interval95:d}}function o(c){var r=c.R2/c.df_model/((1-c.R2)/c.df_resid),s=function(u,h,f){return n.beta.cdf(u/(f/h+u),h/2,f/2)},l=1-s(r,c.df_model,c.df_resid);return{F_statistic:r,pvalue:l}}function a(c,r){var s=e(c,r),l=i(s),u=o(s),h=1-(1-s.R2)*((s.nobs-1)/s.df_resid);return s.t=l,s.f=u,s.adjust_R2=h,s}return{ols:a}}(),n.extend({buildxmatrix:function(){for(var e=new Array(arguments.length),i=0;i<arguments.length;i++){var o=[1];e[i]=o.concat(arguments[i])}return n(e)},builddxmatrix:function(){for(var e=new Array(arguments[0].length),i=0;i<arguments[0].length;i++){var o=[1];e[i]=o.concat(arguments[0][i])}return n(e)},buildjxmatrix:function(e){for(var i=new Array(e.length),o=0;o<e.length;o++)i[o]=e[o];return n.builddxmatrix(i)},buildymatrix:function(e){return n(e).transpose()},buildjymatrix:function(e){return e.transpose()},matrixmult:function(e,i){var o,a,c,r,s;if(e.cols()==i.rows()){if(i.rows()>1){for(r=[],o=0;o<e.rows();o++)for(r[o]=[],a=0;a<i.cols();a++){for(s=0,c=0;c<e.cols();c++)s+=e.toArray()[o][c]*i.toArray()[c][a];r[o][a]=s}return n(r)}for(r=[],o=0;o<e.rows();o++)for(r[o]=[],a=0;a<i.cols();a++){for(s=0,c=0;c<e.cols();c++)s+=e.toArray()[o][c]*i.toArray()[a];r[o][a]=s}return n(r)}},regress:function(e,i){var o=n.xtranspxinv(e),a=e.transpose(),c=n.matrixmult(n(o),a);return n.matrixmult(c,i)},regresst:function(e,i,o){var a=n.regress(e,i),c={};c.anova={};var r=n.jMatYBar(e,a);c.yBar=r;var s=i.mean();c.anova.residuals=n.residuals(i,r),c.anova.ssr=n.ssr(r,s),c.anova.msr=c.anova.ssr/(e[0].length-1),c.anova.sse=n.sse(i,r),c.anova.mse=c.anova.sse/(i.length-(e[0].length-1)-1),c.anova.sst=n.sst(i,s),c.anova.mst=c.anova.sst/(i.length-1),c.anova.r2=1-c.anova.sse/c.anova.sst,c.anova.r2<0&&(c.anova.r2=0),c.anova.fratio=c.anova.msr/c.anova.mse,c.anova.pvalue=n.anovaftest(c.anova.fratio,e[0].length-1,i.length-(e[0].length-1)-1),c.anova.rmse=Math.sqrt(c.anova.mse),c.anova.r2adj=1-c.anova.mse/c.anova.mst,c.anova.r2adj<0&&(c.anova.r2adj=0),c.stats=new Array(e[0].length);for(var l=n.xtranspxinv(e),u,h,f,d=0;d<a.length;d++)u=Math.sqrt(c.anova.mse*Math.abs(l[d][d])),h=Math.abs(a[d]/u),f=n.ttest(h,i.length-e[0].length-1,o),c.stats[d]=[a[d],u,h,f];return c.regress=a,c},xtranspx:function(e){return n.matrixmult(e.transpose(),e)},xtranspxinv:function(e){var i=n.matrixmult(e.transpose(),e),o=n.inv(i);return o},jMatYBar:function(e,i){var o=n.matrixmult(e,i);return new n(o)},residuals:function(e,i){return n.matrixsubtract(e,i)},ssr:function(e,i){for(var o=0,a=0;a<e.length;a++)o+=Math.pow(e[a]-i,2);return o},sse:function(e,i){for(var o=0,a=0;a<e.length;a++)o+=Math.pow(e[a]-i[a],2);return o},sst:function(e,i){for(var o=0,a=0;a<e.length;a++)o+=Math.pow(e[a]-i,2);return o},matrixsubtract:function(e,i){for(var o=new Array(e.length),a=0;a<e.length;a++){o[a]=new Array(e[a].length);for(var c=0;c<e[a].length;c++)o[a][c]=e[a][c]-i[a][c]}return n(o)}}),n.jStat=n,n})});var ji=Ki((ih,Wn)=>{(function(n,t){typeof Wn<"u"?Wn.exports=t():typeof define=="function"&&typeof define.amd=="object"?define(t):this[n]=t()})("Clusterize",function(){"use strict";var n=function(){for(var r=3,s=document.createElement("b"),l=s.all||[];s.innerHTML="<!--[if gt IE "+ ++r+"]><i><![endif]-->",l[0];);return r>4?r:document.documentMode}(),t=navigator.platform.toLowerCase().indexOf("mac")+1,e=function(r){if(!(this instanceof e))return new e(r);var s=this,l={rows_in_block:50,blocks_in_cluster:4,tag:null,show_no_data_row:!0,no_data_class:"clusterize-no-data",no_data_text:"No data",keep_parity:!0,callbacks:{}};s.options={};for(var u=["rows_in_block","blocks_in_cluster","show_no_data_row","no_data_class","no_data_text","keep_parity","tag","callbacks"],h=0,f;f=u[h];h++)s.options[f]=typeof r[f]<"u"&&r[f]!=null?r[f]:l[f];for(var d=["scroll","content"],h=0,g;g=d[h];h++)if(s[g+"_elem"]=r[g+"Id"]?document.getElementById(r[g+"Id"]):r[g+"Elem"],!s[g+"_elem"])throw new Error("Error! Could not find "+g+" element");s.content_elem.hasAttribute("tabindex")||s.content_elem.setAttribute("tabindex",0);var p=a(r.rows)?r.rows:s.fetchMarkup(),b={},m=s.scroll_elem.scrollTop;s.insertToDOM(p,b),s.scroll_elem.scrollTop=m;var v=!1,_=0,x=!1,y=function(){t&&(x||(s.content_elem.style.pointerEvents="none"),x=!0,clearTimeout(_),_=setTimeout(function(){s.content_elem.style.pointerEvents="auto",x=!1},50)),v!=(v=s.getClusterNum(p))&&s.insertToDOM(p,b),s.options.callbacks.scrollingProgress&&s.options.callbacks.scrollingProgress(s.getScrollProgress())},w=0,k=function(){clearTimeout(w),w=setTimeout(s.refresh,100)};i("scroll",s.scroll_elem,y),i("resize",window,k),s.destroy=function(C){o("scroll",s.scroll_elem,y),o("resize",window,k),s.html((C?s.generateEmptyRow():p).join(""))},s.refresh=function(C){(s.getRowsHeight(p)||C)&&s.update(p)},s.update=function(C){p=a(C)?C:[];var A=s.scroll_elem.scrollTop;p.length*s.options.item_height<A&&(s.scroll_elem.scrollTop=0,v=0),s.insertToDOM(p,b),s.scroll_elem.scrollTop=A},s.clear=function(){s.update([])},s.getRowsAmount=function(){return p.length},s.getScrollProgress=function(){return this.options.scroll_top/(p.length*this.options.item_height)*100||0};var P=function(C,A){var T=a(A)?A:[];T.length&&(p=C=="append"?p.concat(T):T.concat(p),s.insertToDOM(p,b))};s.append=function(C){P("append",C)},s.prepend=function(C){P("prepend",C)}};e.prototype={constructor:e,fetchMarkup:function(){for(var r=[],s=this.getChildNodes(this.content_elem);s.length;)r.push(s.shift().outerHTML);return r},exploreEnvironment:function(r,s){var l=this.options;l.content_tag=this.content_elem.tagName.toLowerCase(),r.length&&(n&&n<=9&&!l.tag&&(l.tag=r[0].match(/<([^>\s/]*)/)[1].toLowerCase()),this.content_elem.children.length<=1&&(s.data=this.html(r[0]+r[0]+r[0])),l.tag||(l.tag=this.content_elem.children[0].tagName.toLowerCase()),this.getRowsHeight(r))},getRowsHeight:function(r){var s=this.options,l=s.item_height;if(s.cluster_height=0,!!r.length){var u=this.content_elem.children;if(u.length){var h=u[Math.floor(u.length/2)];if(s.item_height=h.offsetHeight,s.tag=="tr"&&c("borderCollapse",this.content_elem)!="collapse"&&(s.item_height+=parseInt(c("borderSpacing",this.content_elem),10)||0),s.tag!="tr"){var f=parseInt(c("marginTop",h),10)||0,d=parseInt(c("marginBottom",h),10)||0;s.item_height+=Math.max(f,d)}return s.block_height=s.item_height*s.rows_in_block,s.rows_in_cluster=s.blocks_in_cluster*s.rows_in_block,s.cluster_height=s.blocks_in_cluster*s.block_height,l!=s.item_height}}},getClusterNum:function(r){var s=this.options;s.scroll_top=this.scroll_elem.scrollTop;var l=s.cluster_height-s.block_height,u=Math.floor(s.scroll_top/l),h=Math.floor(r.length*s.item_height/l);return Math.min(u,h)},generateEmptyRow:function(){var r=this.options;if(!r.tag||!r.show_no_data_row)return[];var s=document.createElement(r.tag),l=document.createTextNode(r.no_data_text),u;return s.className=r.no_data_class,r.tag=="tr"&&(u=document.createElement("td"),u.colSpan=100,u.appendChild(l)),s.appendChild(u||l),[s.outerHTML]},generate:function(r){var s=this.options,l=r.length;if(l<s.rows_in_block)return{top_offset:0,bottom_offset:0,rows_above:0,rows:l?r:this.generateEmptyRow()};var u=Math.max((s.rows_in_cluster-s.rows_in_block)*this.getClusterNum(r),0),h=u+s.rows_in_cluster,f=Math.max(u*s.item_height,0),d=Math.max((l-h)*s.item_height,0),g=[],p=u;f<1&&p++;for(var b=u;b<h;b++)r[b]&&g.push(r[b]);return{top_offset:f,bottom_offset:d,rows_above:p,rows:g}},renderExtraTag:function(r,s){var l=document.createElement(this.options.tag),u="clusterize-";return l.className=[u+"extra-row",u+r].join(" "),s&&(l.style.height=s+"px"),l.outerHTML},insertToDOM:function(r,s){this.options.cluster_height||this.exploreEnvironment(r,s);var l=this.generate(r),u=l.rows.join(""),h=this.checkChanges("data",u,s),f=this.checkChanges("top",l.top_offset,s),d=this.checkChanges("bottom",l.bottom_offset,s),g=this.options.callbacks,p=[];h||f?(l.top_offset&&(this.options.keep_parity&&p.push(this.renderExtraTag("keep-parity")),p.push(this.renderExtraTag("top-space",l.top_offset))),p.push(u),l.bottom_offset&&p.push(this.renderExtraTag("bottom-space",l.bottom_offset)),g.clusterWillChange&&g.clusterWillChange(),this.html(p.join("")),this.options.content_tag=="ol"&&this.content_elem.setAttribute("start",l.rows_above),this.content_elem.style["counter-increment"]="clusterize-counter "+(l.rows_above-1),g.clusterChanged&&g.clusterChanged()):d&&(this.content_elem.lastChild.style.height=l.bottom_offset+"px")},html:function(r){var s=this.content_elem;if(n&&n<=9&&this.options.tag=="tr"){var l=document.createElement("div"),u;for(l.innerHTML="<table><tbody>"+r+"</tbody></table>";u=s.lastChild;)s.removeChild(u);for(var h=this.getChildNodes(l.firstChild.firstChild);h.length;)s.appendChild(h.shift())}else s.innerHTML=r},getChildNodes:function(r){for(var s=r.children,l=[],u=0,h=s.length;u<h;u++)l.push(s[u]);return l},checkChanges:function(r,s,l){var u=s!=l[r];return l[r]=s,u}};function i(r,s,l){return s.addEventListener?s.addEventListener(r,l,!1):s.attachEvent("on"+r,l)}function o(r,s,l){return s.removeEventListener?s.removeEventListener(r,l,!1):s.detachEvent("on"+r,l)}function a(r){return Object.prototype.toString.call(r)==="[object Array]"}function c(r,s){return window.getComputedStyle?window.getComputedStyle(s)[r]:s.currentStyle[r]}return e})});var Ji=Xi(Zi(),1),{jStat:ee}=Ji.default,Dt=.15,Mt=.092,Rt=.8,It=.75,wr=6,Te=[{name:"TT",guestsAverage:150,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"CHT",guestsAverage:200,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"QHRS",guestsAverage:200,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"CHUb",guestsAverage:130,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"QAHS",guestsAverage:150,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"CCHT",guestsAverage:100,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"CHCT",guestsAverage:350,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It},{name:"CHCOA",guestsAverage:250,guestsCV:Dt,wastePerGuestAverage:Mt,wastePerGuestCV:Rt,dinerPerGuestProbability:It}],kr={};for(let n of Te)kr[n.name]=n;var ne=[{name:"Control",trueEffectMean:0,trueEffectCV:0,index:0},{name:"Simple Message",trueEffectMean:-.2,trueEffectCV:.1,index:1},{name:"Social Norms Message",trueEffectMean:-.15,trueEffectCV:.01,index:2}];for(let n=0;n<ne.length;n++)ne[n].index=n;function je(n,t,e){return e[Math.floor(ee.uniform.sample(0,e.length))]}function Pr(n,t,e,i){let o=Math.max(0,Math.floor(ee.normal.sample(n.guestsAverage,n.guestsAverage*n.guestsCV))),a=0;for(let r=0;r<o;r++)ee.uniform.sample(0,1)<n.dinerPerGuestProbability&&(a+=1);console.assert(a>=0);let c=0;for(let r=0;r<a;r++){let s;i.trueEffectCV==0?s=1+i.trueEffectMean:s=Math.max(0,1+ee.normal(i.trueEffectMean,i.trueEffectCV*i.trueEffectMean).sample());let l=n.wastePerGuestCV>0?ee.normal.sample(n.wastePerGuestAverage,n.wastePerGuestCV*n.wastePerGuestAverage):n.wastePerGuestAverage;c+=Math.max(l,0)*s}return console.assert(c>=0),{date:t,guests:o,hotel:n,meal:e,stimulus:i,totalFoodWasteObserved:c}}function Vn(n=wr,t=Te,e=je,i=ne){let o=[],a=n*7;console.log(`total days  ${a}`);for(let c=0;c<a;c++)for(let r of t){let s=e(r,c,i);o.push(Pr(r,c,"BREAKFAST",s))}return console.log(o),o}function Nn(n,t){let e={};for(let r of t)e[r.name]=[];for(let r of n)e[r.stimulus.name].push(r.totalFoodWasteObserved);let i={};for(let r of t){let s=e[r.name];i[r.name]=s.reduce((l,u)=>l+u,0)/s.length}console.log(i);var o=[],a=[];for(let r of n){let s=Array(t.length+1).fill(0);s[t.length]=r.guests,s[0]=1,s[r.stimulus.index]=1,o.push(s),a.push(r.totalFoodWasteObserved)}let c=ee.models.ols(a,o);return{averages:i,effects:c.coef,p_values:c.t.p,observations:n}}var gr=Xi(ji(),1);function Ae(n){return n+.5|0}var zt=(n,t,e)=>Math.max(Math.min(n,e),t);function Oe(n){return zt(Ae(n*2.55),0,255)}function Ft(n){return zt(Ae(n*255),0,255)}function wt(n){return zt(Ae(n/2.55)/100,0,1)}function ts(n){return zt(Ae(n*100),0,100)}var ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},qn=[..."0123456789ABCDEF"],Cr=n=>qn[n&15],Tr=n=>qn[(n&240)>>4]+qn[n&15],tn=n=>(n&240)>>4===(n&15),Or=n=>tn(n.r)&&tn(n.g)&&tn(n.b)&&tn(n.a);function Ar(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&ut[n[1]]*17,g:255&ut[n[2]]*17,b:255&ut[n[3]]*17,a:t===5?ut[n[4]]*17:255}:(t===7||t===9)&&(e={r:ut[n[1]]<<4|ut[n[2]],g:ut[n[3]]<<4|ut[n[4]],b:ut[n[5]]<<4|ut[n[6]],a:t===9?ut[n[7]]<<4|ut[n[8]]:255})),e}var Er=(n,t)=>n<255?t(n):"";function Lr(n){var t=Or(n)?Cr:Tr;return n?"#"+t(n.r)+t(n.g)+t(n.b)+Er(n.a,t):void 0}var Dr=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ss(n,t,e){let i=t*Math.min(e,1-e),o=(a,c=(a+n/30)%12)=>e-i*Math.max(Math.min(c-3,9-c,1),-1);return[o(0),o(8),o(4)]}function Mr(n,t,e){let i=(o,a=(o+n/60)%6)=>e-e*t*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function Rr(n,t,e){let i=ss(n,1,.5),o;for(t+e>1&&(o=1/(t+e),t*=o,e*=o),o=0;o<3;o++)i[o]*=1-t-e,i[o]+=t;return i}function Ir(n,t,e,i,o){return n===o?(t-e)/i+(t<e?6:0):t===o?(e-n)/i+2:(n-t)/i+4}function $n(n){let e=n.r/255,i=n.g/255,o=n.b/255,a=Math.max(e,i,o),c=Math.min(e,i,o),r=(a+c)/2,s,l,u;return a!==c&&(u=a-c,l=r>.5?u/(2-a-c):u/(a+c),s=Ir(e,i,o,u,a),s=s*60+.5),[s|0,l||0,r]}function Yn(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(Ft)}function Un(n,t,e){return Yn(ss,n,t,e)}function zr(n,t,e){return Yn(Rr,n,t,e)}function Fr(n,t,e){return Yn(Mr,n,t,e)}function os(n){return(n%360+360)%360}function Br(n){let t=Dr.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Oe(+t[5]):Ft(+t[5]));let o=os(+t[2]),a=+t[3]/100,c=+t[4]/100;return t[1]==="hwb"?i=zr(o,a,c):t[1]==="hsv"?i=Fr(o,a,c):i=Un(o,a,c),{r:i[0],g:i[1],b:i[2],a:e}}function Hr(n,t){var e=$n(n);e[0]=os(e[0]+t),e=Un(e),n.r=e[0],n.g=e[1],n.b=e[2]}function Vr(n){if(!n)return;let t=$n(n),e=t[0],i=ts(t[1]),o=ts(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${o}%, ${wt(n.a)})`:`hsl(${e}, ${i}%, ${o}%)`}var es={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ns={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Nr(){let n={},t=Object.keys(ns),e=Object.keys(es),i,o,a,c,r;for(i=0;i<t.length;i++){for(c=r=t[i],o=0;o<e.length;o++)a=e[o],r=r.replace(a,es[a]);a=parseInt(ns[c],16),n[r]=[a>>16&255,a>>8&255,a&255]}return n}var en;function Wr(n){en||(en=Nr(),en.transparent=[0,0,0,0]);let t=en[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var Sr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qr(n){let t=Sr.exec(n),e=255,i,o,a;if(t){if(t[7]!==i){let c=+t[7];e=t[8]?Oe(c):zt(c*255,0,255)}return i=+t[1],o=+t[3],a=+t[5],i=255&(t[2]?Oe(i):zt(i,0,255)),o=255&(t[4]?Oe(o):zt(o,0,255)),a=255&(t[6]?Oe(a):zt(a,0,255)),{r:i,g:o,b:a,a:e}}}function $r(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${wt(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Sn=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ie=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Yr(n,t,e){let i=ie(wt(n.r)),o=ie(wt(n.g)),a=ie(wt(n.b));return{r:Ft(Sn(i+e*(ie(wt(t.r))-i))),g:Ft(Sn(o+e*(ie(wt(t.g))-o))),b:Ft(Sn(a+e*(ie(wt(t.b))-a))),a:n.a+e*(t.a-n.a)}}function nn(n,t,e){if(n){let i=$n(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=Un(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function rs(n,t){return n&&Object.assign(t||{},n)}function is(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ft(n[3]))):(t=rs(n,{r:0,g:0,b:0,a:1}),t.a=Ft(t.a)),t}function Ur(n){return n.charAt(0)==="r"?qr(n):Br(n)}var Bt=class{constructor(t){if(t instanceof Bt)return t;let e=typeof t,i;e==="object"?i=is(t):e==="string"&&(i=Ar(t)||Wr(t)||Ur(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=rs(this._rgb);return t&&(t.a=wt(t.a)),t}set rgb(t){this._rgb=is(t)}rgbString(){return this._valid?$r(this._rgb):void 0}hexString(){return this._valid?Lr(this._rgb):void 0}hslString(){return this._valid?Vr(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,o=t.rgb,a,c=e===a?.5:e,r=2*c-1,s=i.a-o.a,l=((r*s===-1?r:(r+s)/(1+r*s))+1)/2;a=1-l,i.r=255&l*i.r+a*o.r+.5,i.g=255&l*i.g+a*o.g+.5,i.b=255&l*i.b+a*o.b+.5,i.a=c*i.a+(1-c)*o.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=Yr(this._rgb,t._rgb,e)),this}clone(){return new Bt(this.rgb)}alpha(t){return this._rgb.a=Ft(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=Ae(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return nn(this._rgb,2,t),this}darken(t){return nn(this._rgb,2,-t),this}saturate(t){return nn(this._rgb,1,t),this}desaturate(t){return nn(this._rgb,1,-t),this}rotate(t){return Hr(this._rgb,t),this}};function mt(){}var bs=(()=>{let n=0;return()=>n++})();function F(n){return n===null||typeof n>"u"}function W(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function I(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Y(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function it(n,t){return Y(n)?n:t}function D(n,t){return typeof n>"u"?t:n}var vs=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,Qn=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function N(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function B(n,t,e,i){let o,a,c;if(W(n))if(a=n.length,i)for(o=a-1;o>=0;o--)t.call(e,n[o],o);else for(o=0;o<a;o++)t.call(e,n[o],o);else if(I(n))for(c=Object.keys(n),a=c.length,o=0;o<a;o++)t.call(e,n[c[o]],c[o])}function De(n,t){let e,i,o,a;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(o=n[e],a=t[e],o.datasetIndex!==a.datasetIndex||o.index!==a.index)return!1;return!0}function an(n){if(W(n))return n.map(an);if(I(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,o=0;for(;o<i;++o)t[e[o]]=an(n[e[o]]);return t}return n}function _s(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Gr(n,t,e,i){if(!_s(n))return;let o=t[n],a=e[n];I(o)&&I(a)?oe(o,a,i):t[n]=an(a)}function oe(n,t,e){let i=W(t)?t:[t],o=i.length;if(!I(n))return n;e=e||{};let a=e.merger||Gr,c;for(let r=0;r<o;++r){if(c=i[r],!I(c))continue;let s=Object.keys(c);for(let l=0,u=s.length;l<u;++l)a(s[l],n,c,e)}return n}function le(n,t){return oe(n,t,{merger:Kr})}function Kr(n,t,e){if(!_s(n))return;let i=t[n],o=e[n];I(i)&&I(o)?le(i,o):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=an(o))}var as={"":n=>n,x:n=>n.x,y:n=>n.y};function Xr(n){let t=n.split("."),e=[],i="";for(let o of t)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function Qr(n){let t=Xr(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function Ct(n,t){return(as[t]||(as[t]=Qr(t)))(n)}function hn(n){return n.charAt(0).toUpperCase()+n.slice(1)}var rt=n=>typeof n<"u",kt=n=>typeof n=="function",Zn=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function xs(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var q=Math.PI,S=2*q,Zr=S+q,ln=Number.POSITIVE_INFINITY,Jr=q/180,$=q/2,Yt=q/4,ls=q*2/3,Pt=Math.log10,gt=Math.sign;function ce(n,t,e){return Math.abs(n-t)<e}function Jn(n){let t=Math.round(n);n=ce(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(Pt(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function ys(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((o,a)=>o-a).pop(),t}function Kt(n){return!isNaN(parseFloat(n))&&isFinite(n)}function ws(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function jn(n,t,e){let i,o,a;for(i=0,o=n.length;i<o;i++)a=n[i][e],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function ht(n){return n*(q/180)}function fn(n){return n*(180/q)}function ti(n){if(!Y(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function ei(n,t){let e=t.x-n.x,i=t.y-n.y,o=Math.sqrt(e*e+i*i),a=Math.atan2(i,e);return a<-.5*q&&(a+=S),{angle:a,distance:o}}function cn(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function jr(n,t){return(n-t+Zr)%S-q}function nt(n){return(n%S+S)%S}function ue(n,t,e,i){let o=nt(n),a=nt(t),c=nt(e),r=nt(a-o),s=nt(c-o),l=nt(o-a),u=nt(o-c);return o===a||o===c||i&&a===c||r>s&&l<u}function Q(n,t,e){return Math.max(t,Math.min(e,n))}function ks(n){return Q(n,-32768,32767)}function bt(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function dn(n,t,e){e=e||(c=>n[c]<t);let i=n.length-1,o=0,a;for(;i-o>1;)a=o+i>>1,e(a)?o=a:i=a;return{lo:o,hi:i}}var pt=(n,t,e,i)=>dn(n,e,i?o=>{let a=n[o][t];return a<e||a===e&&n[o+1][t]===e}:o=>n[o][t]<e),Ps=(n,t,e)=>dn(n,e,i=>n[i][t]>=e);function Cs(n,t,e){let i=0,o=n.length;for(;i<o&&n[i]<t;)i++;for(;o>i&&n[o-1]>e;)o--;return i>0||o<n.length?n.slice(i,o):n}var Ts=["push","pop","shift","splice","unshift"];function Os(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Ts.forEach(e=>{let i="_onData"+hn(e),o=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...a){let c=o.apply(this,a);return n._chartjs.listeners.forEach(r=>{typeof r[i]=="function"&&r[i](...a)}),c}})})}function ni(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,o=i.indexOf(t);o!==-1&&i.splice(o,1),!(i.length>0)&&(Ts.forEach(a=>{delete n[a]}),delete n._chartjs)}function ii(n){let t=new Set,e,i;for(e=0,i=n.length;e<i;++e)t.add(n[e]);return t.size===i?n:Array.from(t)}var si=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function oi(n,t){let e=[],i=!1;return function(...o){e=o,i||(i=!0,si.call(window,()=>{i=!1,n.apply(t,e)}))}}function As(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var gn=n=>n==="start"?"left":n==="end"?"right":"center",Z=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,Es=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function ri(n,t,e){let i=t.length,o=0,a=i;if(n._sorted){let{iScale:c,_parsed:r}=n,s=c.axis,{min:l,max:u,minDefined:h,maxDefined:f}=c.getUserBounds();h&&(o=Q(Math.min(pt(r,c.axis,l).lo,e?i:pt(t,s,c.getPixelForValue(l)).lo),0,i-1)),f?a=Q(Math.max(pt(r,c.axis,u,!0).hi+1,e?0:pt(t,s,c.getPixelForValue(u),!0).hi+1),o,i)-o:a=i-o}return{start:o,count:a}}function ai(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,o={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=o,!0;let a=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,o),a}var sn=n=>n===0||n===1,cs=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*S/e)),us=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*S/e)+1,se={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*$)+1,easeOutSine:n=>Math.sin(n*$),easeInOutSine:n=>-.5*(Math.cos(q*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>sn(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>sn(n)?n:cs(n,.075,.3),easeOutElastic:n=>sn(n)?n:us(n,.075,.3),easeInOutElastic(n){return sn(n)?n:n<.5?.5*cs(n*2,.1125,.45):.5+.5*us(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-se.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?se.easeInBounce(n*2)*.5:se.easeOutBounce(n*2-1)*.5+.5};function Ls(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function li(n){return Ls(n)?n:new Bt(n)}function Gn(n){return Ls(n)?n:new Bt(n).saturate(.5).darken(.1).hexString()}var ta=["x","y","borderWidth","radius","tension"],ea=["color","borderColor","backgroundColor"];function na(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:ea},numbers:{type:"number",properties:ta}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ia(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var hs=new Map;function sa(n,t){t=t||{};let e=n+JSON.stringify(t),i=hs.get(e);return i||(i=new Intl.NumberFormat(n,t),hs.set(e,i)),i}function he(n,t,e){return sa(t,e).format(n)}var Ds={values(n){return W(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,o,a=n;if(e.length>1){let l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(o="scientific"),a=oa(n,e)}let c=Pt(Math.abs(a)),r=Math.max(Math.min(-1*Math.floor(c),20),0),s={notation:o,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(s,this.options.ticks.format),he(n,i,s)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(Pt(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?Ds.numeric.call(this,n,t,e):""}};function oa(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var Me={formatters:Ds};function ra(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Me.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Vt=Object.create(null),pn=Object.create(null);function Ee(n,t){if(!t)return n;let e=t.split(".");for(let i=0,o=e.length;i<o;++i){let a=e[i];n=n[a]||(n[a]=Object.create(null))}return n}function Kn(n,t,e){return typeof t=="string"?oe(Ee(n,t),e):oe(Ee(n,""),t)}var Xn=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>Gn(o.backgroundColor),this.hoverBorderColor=(i,o)=>Gn(o.borderColor),this.hoverColor=(i,o)=>Gn(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Kn(this,t,e)}get(t){return Ee(this,t)}describe(t,e){return Kn(pn,t,e)}override(t,e){return Kn(Vt,t,e)}route(t,e,i,o){let a=Ee(this,t),c=Ee(this,i),r="_"+e;Object.defineProperties(a,{[r]:{value:a[e],writable:!0},[e]:{enumerable:!0,get(){let s=this[r],l=c[o];return I(s)?Object.assign({},l,s):D(s,l)},set(s){this[r]=s}}})}apply(t){t.forEach(e=>e(this))}},U=new Xn({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[na,ia,ra]);function aa(n){return!n||F(n.size)||F(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Le(n,t,e,i,o){let a=t[o];return a||(a=t[o]=n.measureText(o).width,e.push(o)),a>i&&(i=a),i}function Ms(n,t,e,i){i=i||{};let o=i.data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(o=i.data={},a=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let c=0,r=e.length,s,l,u,h,f;for(s=0;s<r;s++)if(h=e[s],h!=null&&W(h)!==!0)c=Le(n,o,a,c,h);else if(W(h))for(l=0,u=h.length;l<u;l++)f=h[l],f!=null&&!W(f)&&(c=Le(n,o,a,c,f));n.restore();let d=a.length/2;if(d>e.length){for(s=0;s<d;s++)delete o[a[s]];a.splice(0,d)}return c}function Nt(n,t,e){let i=n.currentDevicePixelRatio,o=e!==0?Math.max(e/2,.5):0;return Math.round((t-o)*i)/i+o}function ci(n,t){t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore()}function mn(n,t,e,i){ui(n,t,e,i,null)}function ui(n,t,e,i,o){let a,c,r,s,l,u,h,f,d=t.pointStyle,g=t.rotation,p=t.radius,b=(g||0)*Jr;if(d&&typeof d=="object"&&(a=d.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(b),n.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),n.restore();return}if(!(isNaN(p)||p<=0)){switch(n.beginPath(),d){default:o?n.ellipse(e,i,o/2,p,0,0,S):n.arc(e,i,p,0,S),n.closePath();break;case"triangle":u=o?o/2:p,n.moveTo(e+Math.sin(b)*u,i-Math.cos(b)*p),b+=ls,n.lineTo(e+Math.sin(b)*u,i-Math.cos(b)*p),b+=ls,n.lineTo(e+Math.sin(b)*u,i-Math.cos(b)*p),n.closePath();break;case"rectRounded":l=p*.516,s=p-l,c=Math.cos(b+Yt)*s,h=Math.cos(b+Yt)*(o?o/2-l:s),r=Math.sin(b+Yt)*s,f=Math.sin(b+Yt)*(o?o/2-l:s),n.arc(e-h,i-r,l,b-q,b-$),n.arc(e+f,i-c,l,b-$,b),n.arc(e+h,i+r,l,b,b+$),n.arc(e-f,i+c,l,b+$,b+q),n.closePath();break;case"rect":if(!g){s=Math.SQRT1_2*p,u=o?o/2:s,n.rect(e-u,i-s,2*u,2*s);break}b+=Yt;case"rectRot":h=Math.cos(b)*(o?o/2:p),c=Math.cos(b)*p,r=Math.sin(b)*p,f=Math.sin(b)*(o?o/2:p),n.moveTo(e-h,i-r),n.lineTo(e+f,i-c),n.lineTo(e+h,i+r),n.lineTo(e-f,i+c),n.closePath();break;case"crossRot":b+=Yt;case"cross":h=Math.cos(b)*(o?o/2:p),c=Math.cos(b)*p,r=Math.sin(b)*p,f=Math.sin(b)*(o?o/2:p),n.moveTo(e-h,i-r),n.lineTo(e+h,i+r),n.moveTo(e+f,i-c),n.lineTo(e-f,i+c);break;case"star":h=Math.cos(b)*(o?o/2:p),c=Math.cos(b)*p,r=Math.sin(b)*p,f=Math.sin(b)*(o?o/2:p),n.moveTo(e-h,i-r),n.lineTo(e+h,i+r),n.moveTo(e+f,i-c),n.lineTo(e-f,i+c),b+=Yt,h=Math.cos(b)*(o?o/2:p),c=Math.cos(b)*p,r=Math.sin(b)*p,f=Math.sin(b)*(o?o/2:p),n.moveTo(e-h,i-r),n.lineTo(e+h,i+r),n.moveTo(e+f,i-c),n.lineTo(e-f,i+c);break;case"line":c=o?o/2:Math.cos(b)*p,r=Math.sin(b)*p,n.moveTo(e-c,i-r),n.lineTo(e+c,i+r);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(b)*(o?o/2:p),i+Math.sin(b)*p);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function re(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Re(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Ie(n){n.restore()}function Rs(n,t,e,i,o){if(!t)return n.lineTo(e.x,e.y);if(o==="middle"){let a=(t.x+e.x)/2;n.lineTo(a,t.y),n.lineTo(a,e.y)}else o==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function Is(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function Wt(n,t,e,i,o,a={}){let c=W(t)?t:[t],r=a.strokeWidth>0&&a.strokeColor!=="",s,l;for(n.save(),n.font=o.string,la(n,a),s=0;s<c.length;++s)l=c[s],a.backdrop&&ua(n,a.backdrop),r&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),F(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(l,e,i,a.maxWidth)),n.fillText(l,e,i,a.maxWidth),ca(n,e,i,l,a),i+=o.lineHeight;n.restore()}function la(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),F(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function ca(n,t,e,i,o){if(o.strikethrough||o.underline){let a=n.measureText(i),c=t-a.actualBoundingBoxLeft,r=t+a.actualBoundingBoxRight,s=e-a.actualBoundingBoxAscent,l=e+a.actualBoundingBoxDescent,u=o.strikethrough?(s+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=o.decorationWidth||2,n.moveTo(c,u),n.lineTo(r,u),n.stroke()}}function ua(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function fe(n,t){let{x:e,y:i,w:o,h:a,radius:c}=t;n.arc(e+c.topLeft,i+c.topLeft,c.topLeft,-$,q,!0),n.lineTo(e,i+a-c.bottomLeft),n.arc(e+c.bottomLeft,i+a-c.bottomLeft,c.bottomLeft,q,$,!0),n.lineTo(e+o-c.bottomRight,i+a),n.arc(e+o-c.bottomRight,i+a-c.bottomRight,c.bottomRight,$,0,!0),n.lineTo(e+o,i+c.topRight),n.arc(e+o-c.topRight,i+c.topRight,c.topRight,0,-$,!0),n.lineTo(e+c.topLeft,i)}var ha=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fa=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function da(n,t){let e=(""+n).match(ha);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var ga=n=>+n||0;function bn(n,t){let e={},i=I(t),o=i?Object.keys(t):t,a=I(n)?i?c=>D(n[c],n[t[c]]):c=>n[c]:()=>n;for(let c of o)e[c]=ga(a(c));return e}function hi(n){return bn(n,{top:"y",right:"x",bottom:"y",left:"x"})}function St(n){return bn(n,["topLeft","topRight","bottomLeft","bottomRight"])}function J(n){let t=hi(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function K(n,t){n=n||{},t=t||U.font;let e=D(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=D(n.style,t.style);i&&!(""+i).match(fa)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let o={family:D(n.family,t.family),lineHeight:da(D(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:D(n.weight,t.weight),string:""};return o.string=aa(o),o}function de(n,t,e,i){let o=!0,a,c,r;for(a=0,c=n.length;a<c;++a)if(r=n[a],r!==void 0&&(t!==void 0&&typeof r=="function"&&(r=r(t),o=!1),e!==void 0&&W(r)&&(r=r[e%r.length],o=!1),r!==void 0))return i&&!o&&(i.cacheable=!1),r}function zs(n,t,e){let{min:i,max:o}=n,a=Qn(t,(o-i)/2),c=(r,s)=>e&&r===0?0:r+s;return{min:c(i,-Math.abs(a)),max:c(o,a)}}function Tt(n,t){return Object.assign(Object.create(n),t)}function vn(n,t=[""],e=n,i,o=()=>n[0]){rt(i)||(i=Hs("_fallback",n));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:e,_fallback:i,_getTarget:o,override:c=>vn([c,...n],t,e,i)};return new Proxy(a,{deleteProperty(c,r){return delete c[r],delete c._keys,delete n[0][r],!0},get(c,r){return Fs(c,r,()=>wa(r,t,n,c))},getOwnPropertyDescriptor(c,r){return Reflect.getOwnPropertyDescriptor(c._scopes[0],r)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(c,r){return ds(c).includes(r)},ownKeys(c){return ds(c)},set(c,r,s){let l=c._storage||(c._storage=o());return c[r]=l[r]=s,delete c._keys,!0}})}function Gt(n,t,e,i){let o={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:fi(n,i),setContext:a=>Gt(n,a,e,i),override:a=>Gt(n.override(a),t,e,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete n[c],!0},get(a,c,r){return Fs(a,c,()=>ma(a,c,r))},getOwnPropertyDescriptor(a,c){return a._descriptors.allKeys?Reflect.has(n,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,c)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,c){return Reflect.has(n,c)},ownKeys(){return Reflect.ownKeys(n)},set(a,c,r){return n[c]=r,delete a[c],!0}})}function fi(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:o=t.allKeys}=n;return{allKeys:o,scriptable:e,indexable:i,isScriptable:kt(e)?e:()=>e,isIndexable:kt(i)?i:()=>i}}var pa=(n,t)=>n?n+hn(t):t,di=(n,t)=>I(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Fs(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t))return n[t];let i=e();return n[t]=i,i}function ma(n,t,e){let{_proxy:i,_context:o,_subProxy:a,_descriptors:c}=n,r=i[t];return kt(r)&&c.isScriptable(t)&&(r=ba(t,r,n,e)),W(r)&&r.length&&(r=va(t,r,n,c.isIndexable)),di(t,r)&&(r=Gt(r,o,a&&a[t],c)),r}function ba(n,t,e,i){let{_proxy:o,_context:a,_subProxy:c,_stack:r}=e;if(r.has(n))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+n);return r.add(n),t=t(a,c||i),r.delete(n),di(n,t)&&(t=gi(o._scopes,o,n,t)),t}function va(n,t,e,i){let{_proxy:o,_context:a,_subProxy:c,_descriptors:r}=e;if(rt(a.index)&&i(n))t=t[a.index%t.length];else if(I(t[0])){let s=t,l=o._scopes.filter(u=>u!==s);t=[];for(let u of s){let h=gi(l,o,n,u);t.push(Gt(h,a,c&&c[n],r))}}return t}function Bs(n,t,e){return kt(n)?n(t,e):n}var _a=(n,t)=>n===!0?t:typeof n=="string"?Ct(t,n):void 0;function xa(n,t,e,i,o){for(let a of t){let c=_a(e,a);if(c){n.add(c);let r=Bs(c._fallback,e,o);if(rt(r)&&r!==e&&r!==i)return r}else if(c===!1&&rt(i)&&e!==i)return null}return!1}function gi(n,t,e,i){let o=t._rootScopes,a=Bs(t._fallback,e,i),c=[...n,...o],r=new Set;r.add(i);let s=fs(r,c,e,a||e,i);return s===null||rt(a)&&a!==e&&(s=fs(r,c,a,s,i),s===null)?!1:vn(Array.from(r),[""],o,a,()=>ya(t,e,i))}function fs(n,t,e,i,o){for(;e;)e=xa(n,t,e,i,o);return e}function ya(n,t,e){let i=n._getTarget();t in i||(i[t]={});let o=i[t];return W(o)&&I(e)?e:o||{}}function wa(n,t,e,i){let o;for(let a of t)if(o=Hs(pa(a,n),e),rt(o))return di(n,o)?gi(e,i,n,o):o}function Hs(n,t){for(let e of t){if(!e)continue;let i=e[n];if(rt(i))return i}}function ds(n){let t=n._keys;return t||(t=n._keys=ka(n._scopes)),t}function ka(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(o=>!o.startsWith("_")))t.add(i);return Array.from(t)}function pi(n,t,e,i){let{iScale:o}=n,{key:a="r"}=this._parsing,c=new Array(i),r,s,l,u;for(r=0,s=i;r<s;++r)l=r+e,u=t[l],c[r]={r:o.parse(Ct(u,a),l)};return c}var Pa=Number.EPSILON||1e-14,ae=(n,t)=>t<n.length&&!n[t].skip&&n[t],Vs=n=>n==="x"?"y":"x";function Ca(n,t,e,i){let o=n.skip?t:n,a=t,c=e.skip?t:e,r=cn(a,o),s=cn(c,a),l=r/(r+s),u=s/(r+s);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let h=i*l,f=i*u;return{previous:{x:a.x-h*(c.x-o.x),y:a.y-h*(c.y-o.y)},next:{x:a.x+f*(c.x-o.x),y:a.y+f*(c.y-o.y)}}}function Ta(n,t,e){let i=n.length,o,a,c,r,s,l=ae(n,0);for(let u=0;u<i-1;++u)if(s=l,l=ae(n,u+1),!(!s||!l)){if(ce(t[u],0,Pa)){e[u]=e[u+1]=0;continue}o=e[u]/t[u],a=e[u+1]/t[u],r=Math.pow(o,2)+Math.pow(a,2),!(r<=9)&&(c=3/Math.sqrt(r),e[u]=o*c*t[u],e[u+1]=a*c*t[u])}}function Oa(n,t,e="x"){let i=Vs(e),o=n.length,a,c,r,s=ae(n,0);for(let l=0;l<o;++l){if(c=r,r=s,s=ae(n,l+1),!r)continue;let u=r[e],h=r[i];c&&(a=(u-c[e])/3,r[`cp1${e}`]=u-a,r[`cp1${i}`]=h-a*t[l]),s&&(a=(s[e]-u)/3,r[`cp2${e}`]=u+a,r[`cp2${i}`]=h+a*t[l])}}function Aa(n,t="x"){let e=Vs(t),i=n.length,o=Array(i).fill(0),a=Array(i),c,r,s,l=ae(n,0);for(c=0;c<i;++c)if(r=s,s=l,l=ae(n,c+1),!!s){if(l){let u=l[t]-s[t];o[c]=u!==0?(l[e]-s[e])/u:0}a[c]=r?l?gt(o[c-1])!==gt(o[c])?0:(o[c-1]+o[c])/2:o[c-1]:o[c]}Ta(n,o,a),Oa(n,a,t)}function on(n,t,e){return Math.max(Math.min(n,e),t)}function Ea(n,t){let e,i,o,a,c,r=re(n[0],t);for(e=0,i=n.length;e<i;++e)c=a,a=r,r=e<i-1&&re(n[e+1],t),a&&(o=n[e],c&&(o.cp1x=on(o.cp1x,t.left,t.right),o.cp1y=on(o.cp1y,t.top,t.bottom)),r&&(o.cp2x=on(o.cp2x,t.left,t.right),o.cp2y=on(o.cp2y,t.top,t.bottom)))}function Ns(n,t,e,i,o){let a,c,r,s;if(t.spanGaps&&(n=n.filter(l=>!l.skip)),t.cubicInterpolationMode==="monotone")Aa(n,o);else{let l=i?n[n.length-1]:n[0];for(a=0,c=n.length;a<c;++a)r=n[a],s=Ca(l,r,n[Math.min(a+1,c-(i?0:1))%c],t.tension),r.cp1x=s.previous.x,r.cp1y=s.previous.y,r.cp2x=s.next.x,r.cp2y=s.next.y,l=r}t.capBezierPoints&&Ea(n,e)}function mi(){return typeof window<"u"&&typeof document<"u"}function _n(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function un(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var xn=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function La(n,t){return xn(n).getPropertyValue(t)}var Da=["top","right","bottom","left"];function Ut(n,t,e){let i={};e=e?"-"+e:"";for(let o=0;o<4;o++){let a=Da[o];i[a]=parseFloat(n[t+"-"+a+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Ma=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Ra(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:o,offsetY:a}=i,c=!1,r,s;if(Ma(o,a,n.target))r=o,s=a;else{let l=t.getBoundingClientRect();r=i.clientX-l.left,s=i.clientY-l.top,c=!0}return{x:r,y:s,box:c}}function qt(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,o=xn(e),a=o.boxSizing==="border-box",c=Ut(o,"padding"),r=Ut(o,"border","width"),{x:s,y:l,box:u}=Ra(n,e),h=c.left+(u&&r.left),f=c.top+(u&&r.top),{width:d,height:g}=t;return a&&(d-=c.width+r.width,g-=c.height+r.height),{x:Math.round((s-h)/d*e.width/i),y:Math.round((l-f)/g*e.height/i)}}function Ia(n,t,e){let i,o;if(t===void 0||e===void 0){let a=_n(n);if(!a)t=n.clientWidth,e=n.clientHeight;else{let c=a.getBoundingClientRect(),r=xn(a),s=Ut(r,"border","width"),l=Ut(r,"padding");t=c.width-l.width-s.width,e=c.height-l.height-s.height,i=un(r.maxWidth,a,"clientWidth"),o=un(r.maxHeight,a,"clientHeight")}}return{width:t,height:e,maxWidth:i||ln,maxHeight:o||ln}}var rn=n=>Math.round(n*10)/10;function Ws(n,t,e,i){let o=xn(n),a=Ut(o,"margin"),c=un(o.maxWidth,n,"clientWidth")||ln,r=un(o.maxHeight,n,"clientHeight")||ln,s=Ia(n,t,e),{width:l,height:u}=s;if(o.boxSizing==="content-box"){let f=Ut(o,"border","width"),d=Ut(o,"padding");l-=d.width+f.width,u-=d.height+f.height}return l=Math.max(0,l-a.width),u=Math.max(0,i?l/i:u-a.height),l=rn(Math.min(l,c,s.maxWidth)),u=rn(Math.min(u,r,s.maxHeight)),l&&!u&&(u=rn(l/2)),(t!==void 0||e!==void 0)&&i&&s.height&&u>s.height&&(u=s.height,l=rn(Math.floor(u*i))),{width:l,height:u}}function bi(n,t,e){let i=t||1,o=Math.floor(n.height*i),a=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let c=n.canvas;return c.style&&(e||!c.style.height&&!c.style.width)&&(c.style.height=`${n.height}px`,c.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||c.height!==o||c.width!==a?(n.currentDevicePixelRatio=i,c.height=o,c.width=a,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var Ss=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return n}();function vi(n,t){let e=La(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ht(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function qs(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function $s(n,t,e,i){let o={x:n.cp2x,y:n.cp2y},a={x:t.cp1x,y:t.cp1y},c=Ht(n,o,e),r=Ht(o,a,e),s=Ht(a,t,e),l=Ht(c,r,e),u=Ht(r,s,e);return Ht(l,u,e)}var za=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},Fa=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function Xt(n,t,e){return n?za(t,e):Fa()}function _i(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function xi(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function Ys(n){return n==="angle"?{between:ue,compare:jr,normalize:nt}:{between:bt,compare:(t,e)=>t-e,normalize:t=>t}}function gs({start:n,end:t,count:e,loop:i,style:o}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:o}}function Ba(n,t,e){let{property:i,start:o,end:a}=e,{between:c,normalize:r}=Ys(i),s=t.length,{start:l,end:u,loop:h}=n,f,d;if(h){for(l+=s,u+=s,f=0,d=s;f<d&&c(r(t[l%s][i]),o,a);++f)l--,u--;l%=s,u%=s}return u<l&&(u+=s),{start:l,end:u,loop:h,style:n.style}}function yi(n,t,e){if(!e)return[n];let{property:i,start:o,end:a}=e,c=t.length,{compare:r,between:s,normalize:l}=Ys(i),{start:u,end:h,loop:f,style:d}=Ba(n,t,e),g=[],p=!1,b=null,m,v,_,x=()=>s(o,_,m)&&r(o,_)!==0,y=()=>r(a,m)===0||s(a,_,m),w=()=>p||x(),k=()=>!p||y();for(let P=u,C=u;P<=h;++P)v=t[P%c],!v.skip&&(m=l(v[i]),m!==_&&(p=s(m,o,a),b===null&&w()&&(b=r(m,o)===0?P:C),b!==null&&k()&&(g.push(gs({start:b,end:P,loop:f,count:c,style:d})),b=null),C=P,_=m));return b!==null&&g.push(gs({start:b,end:h,loop:f,count:c,style:d})),g}function wi(n,t){let e=[],i=n.segments;for(let o=0;o<i.length;o++){let a=yi(i[o],n.points,t);a.length&&e.push(...a)}return e}function Ha(n,t,e,i){let o=0,a=t-1;if(e&&!i)for(;o<t&&!n[o].skip;)o++;for(;o<t&&n[o].skip;)o++;for(o%=t,e&&(a+=o);a>o&&n[a%t].skip;)a--;return a%=t,{start:o,end:a}}function Va(n,t,e,i){let o=n.length,a=[],c=t,r=n[t],s;for(s=t+1;s<=e;++s){let l=n[s%o];l.skip||l.stop?r.skip||(i=!1,a.push({start:t%o,end:(s-1)%o,loop:i}),t=c=l.stop?s:null):(c=s,r.skip&&(t=s)),r=l}return c!==null&&a.push({start:t%o,end:c%o,loop:i}),a}function Us(n,t){let e=n.points,i=n.options.spanGaps,o=e.length;if(!o)return[];let a=!!n._loop,{start:c,end:r}=Ha(e,o,a,i);if(i===!0)return ps(n,[{start:c,end:r,loop:a}],e,t);let s=r<c?r+o:r,l=!!n._fullLoop&&c===0&&r===o-1;return ps(n,Va(e,c,s,l),e,t)}function ps(n,t,e,i){return!i||!i.setContext||!e?t:Na(n,t,e,i)}function Na(n,t,e,i){let o=n._chart.getContext(),a=ms(n.options),{_datasetIndex:c,options:{spanGaps:r}}=n,s=e.length,l=[],u=a,h=t[0].start,f=h;function d(g,p,b,m){let v=r?-1:1;if(g!==p){for(g+=s;e[g%s].skip;)g-=v;for(;e[p%s].skip;)p+=v;g%s!==p%s&&(l.push({start:g%s,end:p%s,loop:b,style:m}),u=m,h=p%s)}}for(let g of t){h=r?h:g.start;let p=e[h%s],b;for(f=h+1;f<=g.end;f++){let m=e[f%s];b=ms(i.setContext(Tt(o,{type:"segment",p0:p,p1:m,p0DataIndex:(f-1)%s,p1DataIndex:f%s,datasetIndex:c}))),Wa(b,u)&&d(h,f-1,g.loop,u),p=m,u=b}h<f-1&&d(h,f-1,g.loop,u)}return l}function ms(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Wa(n,t){return t&&JSON.stringify(n)!==JSON.stringify(t)}var Mi=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,o){let a=e.listeners[o],c=e.duration;a.forEach(r=>r({chart:t,initial:e.initial,numSteps:c,currentStep:Math.min(i-e.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=si.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;let a=i.items,c=a.length-1,r=!1,s;for(;c>=0;--c)s=a[c],s._active?(s._total>i.duration&&(i.duration=s._total),s.tick(t),r=!0):(a[c]=a[a.length-1],a.pop());r&&(o.draw(),this._notify(o,i,t,"progress")),a.length||(i.running=!1,this._notify(o,i,t,"complete"),i.initial=!1),e+=a.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,o=i.length-1;for(;o>=0;--o)i[o].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},Ot=new Mi,Gs="transparent",Sa={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=li(n||Gs),o=i.valid&&li(t||Gs);return o&&o.valid?o.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},Ri=class{constructor(t,e,i,o){let a=e[i];o=de([t.to,o,a,t.from]);let c=de([t.from,a,o]);this._active=!0,this._fn=t.fn||Sa[t.type||typeof c],this._easing=se[t.easing]||se.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=c,this._to=o,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let o=this._target[this._prop],a=i-this._start,c=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(c,t.duration)),this._total+=a,this._loop=!!t.loop,this._to=de([t.to,e,o,t.from]),this._from=de([t.from,o,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,o=this._prop,a=this._from,c=this._loop,r=this._to,s;if(this._active=a!==r&&(c||e<i),!this._active){this._target[o]=r,this._notify(!0);return}if(e<0){this._target[o]=a;return}s=e/i%2,s=c&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[o]=this._fn(a,r,s)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][e]()}},En=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!I(t))return;let e=Object.keys(U.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(o=>{let a=t[o];if(!I(a))return;let c={};for(let r of e)c[r]=a[r];(W(a.properties)&&a.properties||[o]).forEach(r=>{(r===o||!i.has(r))&&i.set(r,c)})})}_animateOptions(t,e){let i=e.options,o=$a(t,i);if(!o)return[];let a=this._createAnimations(o,i);return i.$shared&&qa(t.options.$animations,i).then(()=>{t.options=i},()=>{}),a}_createAnimations(t,e){let i=this._properties,o=[],a=t.$animations||(t.$animations={}),c=Object.keys(e),r=Date.now(),s;for(s=c.length-1;s>=0;--s){let l=c[s];if(l.charAt(0)==="$")continue;if(l==="options"){o.push(...this._animateOptions(t,e));continue}let u=e[l],h=a[l],f=i.get(l);if(h)if(f&&h.active()){h.update(f,u,r);continue}else h.cancel();if(!f||!f.duration){t[l]=u;continue}a[l]=h=new Ri(f,t,l,u),o.push(h)}return o}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return Ot.add(this._chart,i),!0}};function qa(n,t){let e=[],i=Object.keys(t);for(let o=0;o<i.length;o++){let a=n[i[o]];a&&a.active()&&e.push(a.wait())}return Promise.all(e)}function $a(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function Ks(n,t){let e=n&&n.options||{},i=e.reverse,o=e.min===void 0?t:0,a=e.max===void 0?t:0;return{start:i?a:o,end:i?o:a}}function Ya(n,t,e){if(e===!1)return!1;let i=Ks(n,e),o=Ks(t,e);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function Ua(n){let t,e,i,o;return I(n)?(t=n.top,e=n.right,i=n.bottom,o=n.left):t=e=i=o=n,{top:t,right:e,bottom:i,left:o,disabled:n===!1}}function Yo(n,t){let e=[],i=n._getSortedDatasetMetas(t),o,a;for(o=0,a=i.length;o<a;++o)e.push(i[o].index);return e}function Xs(n,t,e,i={}){let o=n.keys,a=i.mode==="single",c,r,s,l;if(t!==null){for(c=0,r=o.length;c<r;++c){if(s=+o[c],s===e){if(i.all)continue;break}l=n.values[s],Y(l)&&(a||t===0||gt(t)===gt(l))&&(t+=l)}return t}}function Ga(n){let t=Object.keys(n),e=new Array(t.length),i,o,a;for(i=0,o=t.length;i<o;++i)a=t[i],e[i]={x:a,y:n[a]};return e}function Qs(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Ka(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Xa(n){let{min:t,max:e,minDefined:i,maxDefined:o}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:o?e:Number.POSITIVE_INFINITY}}function Qa(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function Zs(n,t,e,i){for(let o of t.getMatchingVisibleMetas(i).reverse()){let a=n[o.index];if(e&&a>0||!e&&a<0)return o.index}return null}function Js(n,t){let{chart:e,_cachedMeta:i}=n,o=e._stacks||(e._stacks={}),{iScale:a,vScale:c,index:r}=i,s=a.axis,l=c.axis,u=Ka(a,c,i),h=t.length,f;for(let d=0;d<h;++d){let g=t[d],{[s]:p,[l]:b}=g,m=g._stacks||(g._stacks={});f=m[l]=Qa(o,u,p),f[r]=b,f._top=Zs(f,c,!0,i.type),f._bottom=Zs(f,c,!1,i.type);let v=f._visualValues||(f._visualValues={});v[r]=b}}function ki(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function Za(n,t){return Tt(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function Ja(n,t,e){return Tt(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ze(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let o of t){let a=o._stacks;if(!a||a[i]===void 0||a[i][e]===void 0)return;delete a[i][e],a[i]._visualValues!==void 0&&a[i]._visualValues[e]!==void 0&&delete a[i]._visualValues[e]}}}var Pi=n=>n==="reset"||n==="none",js=(n,t)=>t?n:Object.assign({},n),ja=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:Yo(e,!0),values:null},at=class{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Qs(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ze(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),o=(h,f,d,g)=>h==="x"?f:h==="r"?g:d,a=e.xAxisID=D(i.xAxisID,ki(t,"x")),c=e.yAxisID=D(i.yAxisID,ki(t,"y")),r=e.rAxisID=D(i.rAxisID,ki(t,"r")),s=e.indexAxis,l=e.iAxisID=o(s,a,c,r),u=e.vAxisID=o(s,c,a,r);e.xScale=this.getScaleForId(a),e.yScale=this.getScaleForId(c),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&ni(this._data,this),t._stacked&&ze(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(I(e))this._data=Ga(e);else if(i!==e){if(i){ni(i,this);let o=this._cachedMeta;ze(o),o._parsed=[]}e&&Object.isExtensible(e)&&Os(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),o=!1;this._dataCheck();let a=e._stacked;e._stacked=Qs(e.vScale,e),e.stack!==i.stack&&(o=!0,ze(e),e.stack=i.stack),this._resyncElements(t),(o||a!==e._stacked)&&Js(this,e._parsed)}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let{_cachedMeta:i,_data:o}=this,{iScale:a,_stacked:c}=i,r=a.axis,s=t===0&&e===o.length?!0:i._sorted,l=t>0&&i._parsed[t-1],u,h,f;if(this._parsing===!1)i._parsed=o,i._sorted=!0,f=o;else{W(o[t])?f=this.parseArrayData(i,o,t,e):I(o[t])?f=this.parseObjectData(i,o,t,e):f=this.parsePrimitiveData(i,o,t,e);let d=()=>h[r]===null||l&&h[r]<l[r];for(u=0;u<e;++u)i._parsed[u+t]=h=f[u],s&&(d()&&(s=!1),l=h);i._sorted=s}c&&Js(this,f)}parsePrimitiveData(t,e,i,o){let{iScale:a,vScale:c}=t,r=a.axis,s=c.axis,l=a.getLabels(),u=a===c,h=new Array(o),f,d,g;for(f=0,d=o;f<d;++f)g=f+i,h[f]={[r]:u||a.parse(l[g],g),[s]:c.parse(e[g],g)};return h}parseArrayData(t,e,i,o){let{xScale:a,yScale:c}=t,r=new Array(o),s,l,u,h;for(s=0,l=o;s<l;++s)u=s+i,h=e[u],r[s]={x:a.parse(h[0],u),y:c.parse(h[1],u)};return r}parseObjectData(t,e,i,o){let{xScale:a,yScale:c}=t,{xAxisKey:r="x",yAxisKey:s="y"}=this._parsing,l=new Array(o),u,h,f,d;for(u=0,h=o;u<h;++u)f=u+i,d=e[f],l[u]={x:a.parse(Ct(d,r),f),y:c.parse(Ct(d,s),f)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let o=this.chart,a=this._cachedMeta,c=e[t.axis],r={keys:Yo(o,!0),values:e._stacks[t.axis]._visualValues};return Xs(r,c,a.index,{mode:i})}updateRangeFromParsed(t,e,i,o){let a=i[e.axis],c=a===null?NaN:a,r=o&&i._stacks[e.axis];o&&r&&(o.values=r,c=Xs(o,a,this._cachedMeta.index)),t.min=Math.min(t.min,c),t.max=Math.max(t.max,c)}getMinMax(t,e){let i=this._cachedMeta,o=i._parsed,a=i._sorted&&t===i.iScale,c=o.length,r=this._getOtherScale(t),s=ja(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Xa(r),f,d;function g(){d=o[f];let p=d[r.axis];return!Y(d[t.axis])||u>p||h<p}for(f=0;f<c&&!(!g()&&(this.updateRangeFromParsed(l,t,d,s),a));++f);if(a){for(f=c-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(l,t,d,s);break}}return l}getAllParsedValues(t){let e=this._cachedMeta._parsed,i=[],o,a,c;for(o=0,a=e.length;o<a;++o)c=e[o][t.axis],Y(c)&&i.push(c);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,o=e.vScale,a=this.getParsed(t);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:o?""+o.getLabelForValue(a[o.axis]):""}}_update(t){let e=this._cachedMeta;this.update(t||"default"),e._clip=Ua(D(this.options.clip,Ya(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,e=this.chart,i=this._cachedMeta,o=i.data||[],a=e.chartArea,c=[],r=this._drawStart||0,s=this._drawCount||o.length-r,l=this.options.drawActiveElementsOnTop,u;for(i.dataset&&i.dataset.draw(t,a,r,s),u=r;u<r+s;++u){let h=o[u];h.hidden||(h.active&&l?c.push(h):h.draw(t,a))}for(u=0;u<c.length;++u)c[u].draw(t,a)}getStyle(t,e){let i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){let o=this.getDataset(),a;if(t>=0&&t<this._cachedMeta.data.length){let c=this._cachedMeta.data[t];a=c.$context||(c.$context=Ja(this.getContext(),t,c)),a.parsed=this.getParsed(t),a.raw=o.data[t],a.index=a.dataIndex=t}else a=this.$context||(this.$context=Za(this.chart.getContext(),this.index)),a.dataset=o,a.index=a.datasetIndex=this.index;return a.active=!!e,a.mode=i,a}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let o=e==="active",a=this._cachedDataOpts,c=t+"-"+e,r=a[c],s=this.enableOptionSharing&&rt(i);if(r)return js(r,s);let l=this.chart.config,u=l.datasetElementScopeKeys(this._type,t),h=o?[`${t}Hover`,"hover",t,""]:[t,""],f=l.getOptionScopes(this.getDataset(),u),d=Object.keys(U.elements[t]),g=()=>this.getContext(i,o,e),p=l.resolveNamedOptions(f,d,g,h);return p.$shared&&(p.$shared=s,a[c]=Object.freeze(js(p,s))),p}_resolveAnimations(t,e,i){let o=this.chart,a=this._cachedDataOpts,c=`animation-${e}`,r=a[c];if(r)return r;let s;if(o.options.animation!==!1){let u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,e),f=u.getOptionScopes(this.getDataset(),h);s=u.createResolver(f,this.getContext(t,i,e))}let l=new En(o,s&&s.animations);return s&&s._cacheable&&(a[c]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Pi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),o=this._sharedOptions,a=this.getSharedOptions(i),c=this.includeOptions(e,a)||a!==o;return this.updateSharedOptions(a,e,i),{sharedOptions:a,includeOptions:c}}updateElement(t,e,i,o){Pi(o)?Object.assign(t,i):this._resolveAnimations(e,o).update(t,i)}updateSharedOptions(t,e,i){t&&!Pi(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,o){t.active=o;let a=this.getStyle(e,o);this._resolveAnimations(e,i,o).update(t,{options:!o&&this.getSharedOptions(a)||a})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[r,s,l]of this._syncList)this[r](s,l);this._syncList=[];let o=i.length,a=e.length,c=Math.min(a,o);c&&this.parse(0,c),a>o?this._insertElements(o,a-o,t):a<o&&this._removeElements(a,o-a)}_insertElements(t,e,i=!0){let o=this._cachedMeta,a=o.data,c=t+e,r,s=l=>{for(l.length+=e,r=l.length-1;r>=c;r--)l[r]=l[r-e]};for(s(a),r=t;r<c;++r)a[r]=new this.dataElementType;this._parsing&&s(o._parsed),this.parse(t,e),i&&this.updateElements(a,t,e,"reset")}updateElements(t,e,i,o){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let o=i._parsed.splice(t,e);i._stacked&&ze(i,o)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,o]=t;this[e](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};O(at,"defaults",{}),O(at,"datasetElementType",null),O(at,"dataElementType",null);function tl(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let o=0,a=e.length;o<a;o++)i=i.concat(e[o].controller.getAllParsedValues(n));n._cache.$bar=ii(i.sort((o,a)=>o-a))}return n._cache.$bar}function el(n){let t=n.iScale,e=tl(t,n.type),i=t._length,o,a,c,r,s=()=>{c===32767||c===-32768||(rt(r)&&(i=Math.min(i,Math.abs(c-r)||i)),r=c)};for(o=0,a=e.length;o<a;++o)c=t.getPixelForValue(e[o]),s();for(r=void 0,o=0,a=t.ticks.length;o<a;++o)c=t.getPixelForTick(o),s();return i}function nl(n,t,e,i){let o=e.barThickness,a,c;return F(o)?(a=t.min*e.categoryPercentage,c=e.barPercentage):(a=o*i,c=1),{chunk:a/i,ratio:c,start:t.pixels[n]-a/2}}function il(n,t,e,i){let o=t.pixels,a=o[n],c=n>0?o[n-1]:null,r=n<o.length-1?o[n+1]:null,s=e.categoryPercentage;c===null&&(c=a-(r===null?t.end-t.start:r-a)),r===null&&(r=a+a-c);let l=a-(a-Math.min(c,r))/2*s;return{chunk:Math.abs(r-c)/2*s/i,ratio:e.barPercentage,start:l}}function sl(n,t,e,i){let o=e.parse(n[0],i),a=e.parse(n[1],i),c=Math.min(o,a),r=Math.max(o,a),s=c,l=r;Math.abs(c)>Math.abs(r)&&(s=r,l=c),t[e.axis]=l,t._custom={barStart:s,barEnd:l,start:o,end:a,min:c,max:r}}function Uo(n,t,e,i){return W(n)?sl(n,t,e,i):t[e.axis]=e.parse(n,i),t}function to(n,t,e,i){let o=n.iScale,a=n.vScale,c=o.getLabels(),r=o===a,s=[],l,u,h,f;for(l=e,u=e+i;l<u;++l)f=t[l],h={},h[o.axis]=r||o.parse(c[l],l),s.push(Uo(f,h,a,l));return s}function Ci(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function ol(n,t,e){return n!==0?gt(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function rl(n){let t,e,i,o,a;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(o="end",a="start"):(o="start",a="end"),{start:e,end:i,reverse:t,top:o,bottom:a}}function al(n,t,e,i){let o=t.borderSkipped,a={};if(!o){n.borderSkipped=a;return}if(o===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:c,end:r,reverse:s,top:l,bottom:u}=rl(n);o==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?o=l:(e._bottom||0)===i?o=u:(a[eo(u,c,r,s)]=!0,o=l)),a[eo(o,c,r,s)]=!0,n.borderSkipped=a}function eo(n,t,e,i){return i?(n=ll(n,t,e),n=no(n,e,t)):n=no(n,t,e),n}function ll(n,t,e){return n===t?e:n===e?t:n}function no(n,t,e){return n==="start"?t:n==="end"?e:n}function cl(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var pe=class extends at{parsePrimitiveData(t,e,i,o){return to(t,e,i,o)}parseArrayData(t,e,i,o){return to(t,e,i,o)}parseObjectData(t,e,i,o){let{iScale:a,vScale:c}=t,{xAxisKey:r="x",yAxisKey:s="y"}=this._parsing,l=a.axis==="x"?r:s,u=c.axis==="x"?r:s,h=[],f,d,g,p;for(f=i,d=i+o;f<d;++f)p=e[f],g={},g[a.axis]=a.parse(Ct(p,l),f),h.push(Uo(Ct(p,u),g,c,f));return h}updateRangeFromParsed(t,e,i,o){super.updateRangeFromParsed(t,e,i,o);let a=i._custom;a&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,a.min),t.max=Math.max(t.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let e=this._cachedMeta,{iScale:i,vScale:o}=e,a=this.getParsed(t),c=a._custom,r=Ci(c)?"["+c.start+", "+c.end+"]":""+o.getLabelForValue(a[o.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,o){let a=o==="reset",{index:c,_cachedMeta:{vScale:r}}=this,s=r.getBasePixel(),l=r.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(e,o);for(let d=e;d<e+i;d++){let g=this.getParsed(d),p=a||F(g[r.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),b=this._calculateBarIndexPixels(d,u),m=(g._stacks||{})[r.axis],v={horizontal:l,base:p.base,enableBorderRadius:!m||Ci(g._custom)||c===m._top||c===m._bottom,x:l?p.head:b.center,y:l?b.center:p.head,height:l?b.size:Math.abs(p.size),width:l?Math.abs(p.size):b.size};f&&(v.options=h||this.resolveDataElementOptions(d,t[d].active?"active":o));let _=v.options||t[d].options;al(v,_,m,c),cl(v,_,u.ratio),this.updateElement(t[d],d,v,o)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(s=>s.controller.options.grouped),a=i.options.stacked,c=[],r=s=>{let l=s.controller.getParsed(e),u=l&&l[s.vScale.axis];if(F(u)||isNaN(u))return!0};for(let s of o)if(!(e!==void 0&&r(s))&&((a===!1||c.indexOf(s.stack)===-1||a===void 0&&s.stack===void 0)&&c.push(s.stack),s.index===t))break;return c.length||c.push(void 0),c}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){let o=this._getStacks(t,i),a=e!==void 0?o.indexOf(e):-1;return a===-1?o.length-1:a}_getRuler(){let t=this.options,e=this._cachedMeta,i=e.iScale,o=[],a,c;for(a=0,c=e.data.length;a<c;++a)o.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));let r=t.barThickness;return{min:r||el(e),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:e,_stacked:i,index:o},options:{base:a,minBarLength:c}}=this,r=a||0,s=this.getParsed(t),l=s._custom,u=Ci(l),h=s[e.axis],f=0,d=i?this.applyStack(e,s,i):h,g,p;d!==h&&(f=d-h,d=h),u&&(h=l.barStart,d=l.barEnd-l.barStart,h!==0&&gt(h)!==gt(l.barEnd)&&(f=0),f+=h);let b=!F(a)&&!u?a:f,m=e.getPixelForValue(b);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(f+d):g=m,p=g-m,Math.abs(p)<c){p=ol(p,e,r)*c,h===r&&(m-=p/2);let v=e.getPixelForDecimal(0),_=e.getPixelForDecimal(1),x=Math.min(v,_),y=Math.max(v,_);m=Math.max(Math.min(m,y),x),g=m+p,i&&!u&&(s._stacks[e.axis]._visualValues[o]=e.getValueForPixel(g)-e.getValueForPixel(m))}if(m===e.getPixelForValue(r)){let v=gt(p)*e.getLineWidthForValue(r)/2;m+=v,p-=v}return{size:p,base:m,head:g,center:g+p/2}}_calculateBarIndexPixels(t,e){let i=e.scale,o=this.options,a=o.skipNull,c=D(o.maxBarThickness,1/0),r,s;if(e.grouped){let l=a?this._getStackCount(t):e.stackCount,u=o.barThickness==="flex"?il(t,e,o,l):nl(t,e,o,l),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?t:void 0);r=u.start+u.chunk*h+u.chunk/2,s=Math.min(c,u.chunk*u.ratio)}else r=i.getPixelForValue(this.getParsed(t)[i.axis],t),s=Math.min(c,e.min*e.ratio);return{base:r-s/2,head:r+s/2,center:r,size:s}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,o=i.length,a=0;for(;a<o;++a)this.getParsed(a)[e.axis]!==null&&i[a].draw(this._ctx)}};O(pe,"id","bar"),O(pe,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),O(pe,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var me=class extends at{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,o){let a=super.parsePrimitiveData(t,e,i,o);for(let c=0;c<a.length;c++)a[c]._custom=this.resolveDataElementOptions(c+i).radius;return a}parseArrayData(t,e,i,o){let a=super.parseArrayData(t,e,i,o);for(let c=0;c<a.length;c++){let r=e[i+c];a[c]._custom=D(r[2],this.resolveDataElementOptions(c+i).radius)}return a}parseObjectData(t,e,i,o){let a=super.parseObjectData(t,e,i,o);for(let c=0;c<a.length;c++){let r=e[i+c];a[c]._custom=D(r&&r.r&&+r.r,this.resolveDataElementOptions(c+i).radius)}return a}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:a}=e,c=this.getParsed(t),r=o.getLabelForValue(c.x),s=a.getLabelForValue(c.y),l=c._custom;return{label:i[t]||"",value:"("+r+", "+s+(l?", "+l:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,o){let a=o==="reset",{iScale:c,vScale:r}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(e,o),u=c.axis,h=r.axis;for(let f=e;f<e+i;f++){let d=t[f],g=!a&&this.getParsed(f),p={},b=p[u]=a?c.getPixelForDecimal(.5):c.getPixelForValue(g[u]),m=p[h]=a?r.getBasePixel():r.getPixelForValue(g[h]);p.skip=isNaN(b)||isNaN(m),l&&(p.options=s||this.resolveDataElementOptions(f,d.active?"active":o),a&&(p.options.radius=0)),this.updateElement(d,f,p,o)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),o=super.resolveDataElementOptions(t,e);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let a=o.radius;return e!=="active"&&(o.radius=0),o.radius+=D(i&&i._custom,a),o}};O(me,"id","bubble"),O(me,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),O(me,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function ul(n,t,e){let i=1,o=1,a=0,c=0;if(t<S){let r=n,s=r+t,l=Math.cos(r),u=Math.sin(r),h=Math.cos(s),f=Math.sin(s),d=(_,x,y)=>ue(_,r,s,!0)?1:Math.max(x,x*e,y,y*e),g=(_,x,y)=>ue(_,r,s,!0)?-1:Math.min(x,x*e,y,y*e),p=d(0,l,h),b=d($,u,f),m=g(q,l,h),v=g(q+$,u,f);i=(p-m)/2,o=(b-v)/2,a=-(p+m)/2,c=-(b+v)/2}return{ratioX:i,ratioY:o,offsetX:a,offsetY:c}}var Et=class extends at{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let a=s=>+i[s];if(I(i[t])){let{key:s="value"}=this._parsing;a=l=>+Ct(i[l],s)}let c,r;for(c=t,r=t+e;c<r;++c)o._parsed[c]=a(c)}}_getRotation(){return ht(this.options.rotation-90)}_getCircumference(){return ht(this.options.circumference)}_getRotationExtents(){let t=S,e=-S;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let o=this.chart.getDatasetMeta(i).controller,a=o._getRotation(),c=o._getCircumference();t=Math.min(t,a),e=Math.max(e,a+c)}return{rotation:t,circumference:e-t}}update(t){let e=this.chart,{chartArea:i}=e,o=this._cachedMeta,a=o.data,c=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-c)/2,0),s=Math.min(vs(this.options.cutout,r),1),l=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:d,offsetX:g,offsetY:p}=ul(h,u,s),b=(i.width-c)/f,m=(i.height-c)/d,v=Math.max(Math.min(b,m)/2,0),_=Qn(this.options.radius,v),x=Math.max(_*s,0),y=(_-x)/this._getVisibleDatasetWeightTotal();this.offsetX=g*_,this.offsetY=p*_,o.total=this.calculateTotal(),this.outerRadius=_-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*l,0),this.updateElements(a,0,a.length,t)}_circumference(t,e){let i=this.options,o=this._cachedMeta,a=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*a/S)}updateElements(t,e,i,o){let a=o==="reset",c=this.chart,r=c.chartArea,l=c.options.animation,u=(r.left+r.right)/2,h=(r.top+r.bottom)/2,f=a&&l.animateScale,d=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:p,includeOptions:b}=this._getSharedOptions(e,o),m=this._getRotation(),v;for(v=0;v<e;++v)m+=this._circumference(v,a);for(v=e;v<e+i;++v){let _=this._circumference(v,a),x=t[v],y={x:u+this.offsetX,y:h+this.offsetY,startAngle:m,endAngle:m+_,circumference:_,outerRadius:g,innerRadius:d};b&&(y.options=p||this.resolveDataElementOptions(v,x.active?"active":o)),m+=_,this.updateElement(x,v,y,o)}}calculateTotal(){let t=this._cachedMeta,e=t.data,i=0,o;for(o=0;o<e.length;o++){let a=t._parsed[o];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(o)&&!e[o].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?S*(Math.abs(t)/e):0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,o=i.data.labels||[],a=he(e._parsed[t],i.options.locale);return{label:o[t]||"",value:a}}getMaxBorderWidth(t){let e=0,i=this.chart,o,a,c,r,s;if(!t){for(o=0,a=i.data.datasets.length;o<a;++o)if(i.isDatasetVisible(o)){c=i.getDatasetMeta(o),t=c.data,r=c.controller;break}}if(!t)return 0;for(o=0,a=t.length;o<a;++o)s=r.resolveDataElementOptions(o),s.borderAlign!=="inner"&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,o=t.length;i<o;++i){let a=this.resolveDataElementOptions(i);e=Math.max(e,a.offset||0,a.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(D(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}};O(Et,"id","doughnut"),O(Et,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),O(Et,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"}),O(Et,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return e.labels.map((a,c)=>{let s=t.getDatasetMeta(0).controller.getStyle(c);return{text:a,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:o,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});var be=class extends at{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:o=[],_dataset:a}=e,c=this.chart._animationsDisabled,{start:r,count:s}=ri(e,o,c);this._drawStart=r,this._drawCount=s,ai(e)&&(r=0,s=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=o;let l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!c,options:l},t),this.updateElements(o,r,s,t)}updateElements(t,e,i,o){let a=o==="reset",{iScale:c,vScale:r,_stacked:s,_dataset:l}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,o),f=c.axis,d=r.axis,{spanGaps:g,segment:p}=this.options,b=Kt(g)?g:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||a||o==="none",v=e+i,_=t.length,x=e>0&&this.getParsed(e-1);for(let y=0;y<_;++y){let w=t[y],k=m?w:{};if(y<e||y>=v){k.skip=!0;continue}let P=this.getParsed(y),C=F(P[d]),A=k[f]=c.getPixelForValue(P[f],y),T=k[d]=a||C?r.getBasePixel():r.getPixelForValue(s?this.applyStack(r,P,s):P[d],y);k.skip=isNaN(A)||isNaN(T)||C,k.stop=y>0&&Math.abs(P[f]-x[f])>b,p&&(k.parsed=P,k.raw=l.data[y]),h&&(k.options=u||this.resolveDataElementOptions(y,w.active?"active":o)),m||this.updateElement(w,y,k,o),x=P}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,o=t.data||[];if(!o.length)return i;let a=o[0].size(this.resolveDataElementOptions(0)),c=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,a,c)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}};O(be,"id","line"),O(be,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),O(be,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var jt=class extends at{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,o=i.data.labels||[],a=he(e._parsed[t].r,i.options.locale);return{label:o[t]||"",value:a}}parseObjectData(t,e,i,o){return pi.bind(this)(t,e,i,o)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{let a=this.getParsed(o).r;!isNaN(a)&&this.chart.getDataVisibility(o)&&(a<e.min&&(e.min=a),a>e.max&&(e.max=a))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,o=Math.min(e.right-e.left,e.bottom-e.top),a=Math.max(o/2,0),c=Math.max(i.cutoutPercentage?a/100*i.cutoutPercentage:1,0),r=(a-c)/t.getVisibleDatasetCount();this.outerRadius=a-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,i,o){let a=o==="reset",c=this.chart,s=c.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,h=l.yCenter,f=l.getIndexAngle(0)-.5*q,d=f,g,p=360/this.countVisibleElements();for(g=0;g<e;++g)d+=this._computeAngle(g,o,p);for(g=e;g<e+i;g++){let b=t[g],m=d,v=d+this._computeAngle(g,o,p),_=c.getDataVisibility(g)?l.getDistanceFromCenterForValue(this.getParsed(g).r):0;d=v,a&&(s.animateScale&&(_=0),s.animateRotate&&(m=v=f));let x={x:u,y:h,innerRadius:0,outerRadius:_,startAngle:m,endAngle:v,options:this.resolveDataElementOptions(g,b.active?"active":o)};this.updateElement(b,g,x,o)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?ht(this.resolveDataElementOptions(t,e).angle||i):0}};O(jt,"id","polarArea"),O(jt,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),O(jt,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return e.labels.map((a,c)=>{let s=t.getDatasetMeta(0).controller.getStyle(c);return{text:a,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:o,lineWidth:s.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(c),index:c}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var Ne=class extends Et{};O(Ne,"id","pie"),O(Ne,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var ve=class extends at{getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,o){return pi.bind(this)(t,e,i,o)}update(t){let e=this._cachedMeta,i=e.dataset,o=e.data||[],a=e.iScale.getLabels();if(i.points=o,t!=="resize"){let c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0);let r={_loop:!0,_fullLoop:a.length===o.length,options:c};this.updateElement(i,void 0,r,t)}this.updateElements(o,0,o.length,t)}updateElements(t,e,i,o){let a=this._cachedMeta.rScale,c=o==="reset";for(let r=e;r<e+i;r++){let s=t[r],l=this.resolveDataElementOptions(r,s.active?"active":o),u=a.getPointPositionForValue(r,this.getParsed(r).r),h=c?a.xCenter:u.x,f=c?a.yCenter:u.y,d={x:h,y:f,angle:u.angle,skip:isNaN(h)||isNaN(f),options:l};this.updateElement(s,r,d,o)}}};O(ve,"id","radar"),O(ve,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),O(ve,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var _e=class extends at{getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:a}=e,c=this.getParsed(t),r=o.getLabelForValue(c.x),s=a.getLabelForValue(c.y);return{label:i[t]||"",value:"("+r+", "+s+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,o=this.chart._animationsDisabled,{start:a,count:c}=ri(e,i,o);if(this._drawStart=a,this._drawCount=c,ai(e)&&(a=0,c=i.length),this.options.showLine){let{dataset:r,_dataset:s}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;let l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:l},t)}this.updateElements(i,a,c,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,o){let a=o==="reset",{iScale:c,vScale:r,_stacked:s,_dataset:l}=this._cachedMeta,u=this.resolveDataElementOptions(e,o),h=this.getSharedOptions(u),f=this.includeOptions(o,h),d=c.axis,g=r.axis,{spanGaps:p,segment:b}=this.options,m=Kt(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||a||o==="none",_=e>0&&this.getParsed(e-1);for(let x=e;x<e+i;++x){let y=t[x],w=this.getParsed(x),k=v?y:{},P=F(w[g]),C=k[d]=c.getPixelForValue(w[d],x),A=k[g]=a||P?r.getBasePixel():r.getPixelForValue(s?this.applyStack(r,w,s):w[g],x);k.skip=isNaN(C)||isNaN(A)||P,k.stop=x>0&&Math.abs(w[d]-_[d])>m,b&&(k.parsed=w,k.raw=l.data[x]),f&&(k.options=h||this.resolveDataElementOptions(x,y.active?"active":o)),v||this.updateElement(y,x,k,o),_=w}this.updateSharedOptions(h,o,u)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let r=0;for(let s=e.length-1;s>=0;--s)r=Math.max(r,e[s].size(this.resolveDataElementOptions(s))/2);return r>0&&r}let i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!e.length)return o;let a=e[0].size(this.resolveDataElementOptions(0)),c=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(o,a,c)/2}};O(_e,"id","scatter"),O(_e,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),O(_e,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var hl=Object.freeze({__proto__:null,BarController:pe,BubbleController:me,DoughnutController:Et,LineController:be,PolarAreaController:jt,PieController:Ne,RadarController:ve,ScatterController:_e});function Qt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Ke=class{static override(t){Object.assign(Ke.prototype,t)}constructor(t){this.options=t||{}}init(){}formats(){return Qt()}parse(){return Qt()}format(){return Qt()}add(){return Qt()}diff(){return Qt()}startOf(){return Qt()}endOf(){return Qt()}},fl={_date:Ke};function dl(n,t,e,i){let{controller:o,data:a,_sorted:c}=n,r=o._cachedMeta.iScale;if(r&&t===r.axis&&t!=="r"&&c&&a.length){let s=r._reversePixels?Ps:pt;if(i){if(o._sharedOptions){let l=a[0],u=typeof l.getRange=="function"&&l.getRange(t);if(u){let h=s(a,t,e-u),f=s(a,t,e+u);return{lo:h.lo,hi:f.hi}}}}else return s(a,t,e)}return{lo:0,hi:a.length-1}}function Je(n,t,e,i,o){let a=n.getSortedVisibleDatasetMetas(),c=e[t];for(let r=0,s=a.length;r<s;++r){let{index:l,data:u}=a[r],{lo:h,hi:f}=dl(a[r],t,c,o);for(let d=h;d<=f;++d){let g=u[d];g.skip||i(g,l,d)}}}function gl(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,o){let a=t?Math.abs(i.x-o.x):0,c=e?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(c,2))}}function Ti(n,t,e,i,o){let a=[];return!o&&!n.isPointInArea(t)||Je(n,e,t,function(r,s,l){!o&&!re(r,n.chartArea,0)||r.inRange(t.x,t.y,i)&&a.push({element:r,datasetIndex:s,index:l})},!0),a}function pl(n,t,e,i){let o=[];function a(c,r,s){let{startAngle:l,endAngle:u}=c.getProps(["startAngle","endAngle"],i),{angle:h}=ei(c,{x:t.x,y:t.y});ue(h,l,u)&&o.push({element:c,datasetIndex:r,index:s})}return Je(n,e,t,a),o}function ml(n,t,e,i,o,a){let c=[],r=gl(e),s=Number.POSITIVE_INFINITY;function l(u,h,f){let d=u.inRange(t.x,t.y,o);if(i&&!d)return;let g=u.getCenterPoint(o);if(!(!!a||n.isPointInArea(g))&&!d)return;let b=r(t,g);b<s?(c=[{element:u,datasetIndex:h,index:f}],s=b):b===s&&c.push({element:u,datasetIndex:h,index:f})}return Je(n,e,t,l),c}function Oi(n,t,e,i,o,a){return!a&&!n.isPointInArea(t)?[]:e==="r"&&!i?pl(n,t,e,o):ml(n,t,e,i,o,a)}function io(n,t,e,i,o){let a=[],c=e==="x"?"inXRange":"inYRange",r=!1;return Je(n,e,t,(s,l,u)=>{s[c](t[e],o)&&(a.push({element:s,datasetIndex:l,index:u}),r=r||s.inRange(t.x,t.y,o))}),i&&!r?[]:a}var bl={evaluateInteractionItems:Je,modes:{index(n,t,e,i){let o=qt(t,n),a=e.axis||"x",c=e.includeInvisible||!1,r=e.intersect?Ti(n,o,a,i,c):Oi(n,o,a,!1,i,c),s=[];return r.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=r[0].index,h=l.data[u];h&&!h.skip&&s.push({element:h,datasetIndex:l.index,index:u})}),s):[]},dataset(n,t,e,i){let o=qt(t,n),a=e.axis||"xy",c=e.includeInvisible||!1,r=e.intersect?Ti(n,o,a,i,c):Oi(n,o,a,!1,i,c);if(r.length>0){let s=r[0].datasetIndex,l=n.getDatasetMeta(s).data;r=[];for(let u=0;u<l.length;++u)r.push({element:l[u],datasetIndex:s,index:u})}return r},point(n,t,e,i){let o=qt(t,n),a=e.axis||"xy",c=e.includeInvisible||!1;return Ti(n,o,a,i,c)},nearest(n,t,e,i){let o=qt(t,n),a=e.axis||"xy",c=e.includeInvisible||!1;return Oi(n,o,a,e.intersect,i,c)},x(n,t,e,i){let o=qt(t,n);return io(n,o,"x",e.intersect,i)},y(n,t,e,i){let o=qt(t,n);return io(n,o,"y",e.intersect,i)}}},Go=["left","top","right","bottom"];function Fe(n,t){return n.filter(e=>e.pos===t)}function so(n,t){return n.filter(e=>Go.indexOf(e.pos)===-1&&e.box.axis===t)}function Be(n,t){return n.sort((e,i)=>{let o=t?i:e,a=t?e:i;return o.weight===a.weight?o.index-a.index:o.weight-a.weight})}function vl(n){let t=[],e,i,o,a,c,r;for(e=0,i=(n||[]).length;e<i;++e)o=n[e],{position:a,options:{stack:c,stackWeight:r=1}}=o,t.push({index:e,box:o,pos:a,horizontal:o.isHorizontal(),weight:o.weight,stack:c&&a+c,stackWeight:r});return t}function _l(n){let t={};for(let e of n){let{stack:i,pos:o,stackWeight:a}=e;if(!i||!Go.includes(o))continue;let c=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=a}return t}function xl(n,t){let e=_l(n),{vBoxMaxWidth:i,hBoxMaxHeight:o}=t,a,c,r;for(a=0,c=n.length;a<c;++a){r=n[a];let{fullSize:s}=r.box,l=e[r.stack],u=l&&r.stackWeight/l.weight;r.horizontal?(r.width=u?u*i:s&&t.availableWidth,r.height=o):(r.width=i,r.height=u?u*o:s&&t.availableHeight)}return e}function yl(n){let t=vl(n),e=Be(t.filter(l=>l.box.fullSize),!0),i=Be(Fe(t,"left"),!0),o=Be(Fe(t,"right")),a=Be(Fe(t,"top"),!0),c=Be(Fe(t,"bottom")),r=so(t,"x"),s=so(t,"y");return{fullSize:e,leftAndTop:i.concat(a),rightAndBottom:o.concat(s).concat(c).concat(r),chartArea:Fe(t,"chartArea"),vertical:i.concat(o).concat(s),horizontal:a.concat(c).concat(r)}}function oo(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function Ko(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function wl(n,t,e,i){let{pos:o,box:a}=e,c=n.maxPadding;if(!I(o)){e.size&&(n[o]-=e.size);let h=i[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?a.height:a.width),e.size=h.size/h.count,n[o]+=e.size}a.getPadding&&Ko(c,a.getPadding());let r=Math.max(0,t.outerWidth-oo(c,n,"left","right")),s=Math.max(0,t.outerHeight-oo(c,n,"top","bottom")),l=r!==n.w,u=s!==n.h;return n.w=r,n.h=s,e.horizontal?{same:l,other:u}:{same:u,other:l}}function kl(n){let t=n.maxPadding;function e(i){let o=Math.max(t[i]-n[i],0);return n[i]+=o,o}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Pl(n,t){let e=t.maxPadding;function i(o){let a={left:0,top:0,right:0,bottom:0};return o.forEach(c=>{a[c]=Math.max(t[c],e[c])}),a}return i(n?["left","right"]:["top","bottom"])}function We(n,t,e,i){let o=[],a,c,r,s,l,u;for(a=0,c=n.length,l=0;a<c;++a){r=n[a],s=r.box,s.update(r.width||t.w,r.height||t.h,Pl(r.horizontal,t));let{same:h,other:f}=wl(t,e,r,i);l|=h&&o.length,u=u||f,s.fullSize||o.push(r)}return l&&We(o,t,e,i)||u}function yn(n,t,e,i,o){n.top=e,n.left=t,n.right=t+i,n.bottom=e+o,n.width=i,n.height=o}function ro(n,t,e,i){let o=e.padding,{x:a,y:c}=t;for(let r of n){let s=r.box,l=i[r.stack]||{count:1,placed:0,weight:1},u=r.stackWeight/l.weight||1;if(r.horizontal){let h=t.w*u,f=l.size||s.height;rt(l.start)&&(c=l.start),s.fullSize?yn(s,o.left,c,e.outerWidth-o.right-o.left,f):yn(s,t.left+l.placed,c,h,f),l.start=c,l.placed+=h,c=s.bottom}else{let h=t.h*u,f=l.size||s.width;rt(l.start)&&(a=l.start),s.fullSize?yn(s,a,o.top,f,e.outerHeight-o.bottom-o.top):yn(s,a,t.top+l.placed,f,h),l.start=a,l.placed+=h,a=s.right}}t.x=a,t.y=c}var tt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let o=J(n.options.layout.padding),a=Math.max(t-o.width,0),c=Math.max(e-o.height,0),r=yl(n.boxes),s=r.vertical,l=r.horizontal;B(n.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});let u=s.reduce((p,b)=>b.box.options&&b.box.options.display===!1?p:p+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:o,availableWidth:a,availableHeight:c,vBoxMaxWidth:a/2/u,hBoxMaxHeight:c/2}),f=Object.assign({},o);Ko(f,J(i));let d=Object.assign({maxPadding:f,w:a,h:c,x:o.left,y:o.top},o),g=xl(s.concat(l),h);We(r.fullSize,d,h,g),We(s,d,h,g),We(l,d,h,g)&&We(s,d,h,g),kl(d),ro(r.leftAndTop,d,h,g),d.x+=d.w,d.y+=d.h,ro(r.rightAndBottom,d,h,g),n.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},B(r.chartArea,p=>{let b=p.box;Object.assign(b,n.chartArea),b.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}},Ln=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,o){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,o?Math.floor(e/o):i)}}isAttached(t){return!0}updateConfig(t){}},Ii=class extends Ln{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},On="$chartjs",Cl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ao=n=>n===null||n==="";function Tl(n,t){let e=n.style,i=n.getAttribute("height"),o=n.getAttribute("width");if(n[On]={initial:{height:i,width:o,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",ao(o)){let a=vi(n,"width");a!==void 0&&(n.width=a)}if(ao(i))if(n.style.height==="")n.height=n.width/(t||2);else{let a=vi(n,"height");a!==void 0&&(n.height=a)}return n}var Xo=Ss?{passive:!0}:!1;function Ol(n,t,e){n.addEventListener(t,e,Xo)}function Al(n,t,e){n.canvas.removeEventListener(t,e,Xo)}function El(n,t){let e=Cl[n.type]||n.type,{x:i,y:o}=qt(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:o!==void 0?o:null}}function Dn(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function Ll(n,t,e){let i=n.canvas,o=new MutationObserver(a=>{let c=!1;for(let r of a)c=c||Dn(r.addedNodes,i),c=c&&!Dn(r.removedNodes,i);c&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}function Dl(n,t,e){let i=n.canvas,o=new MutationObserver(a=>{let c=!1;for(let r of a)c=c||Dn(r.removedNodes,i),c=c&&!Dn(r.addedNodes,i);c&&e()});return o.observe(document,{childList:!0,subtree:!0}),o}var Xe=new Map,lo=0;function Qo(){let n=window.devicePixelRatio;n!==lo&&(lo=n,Xe.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function Ml(n,t){Xe.size||window.addEventListener("resize",Qo),Xe.set(n,t)}function Rl(n){Xe.delete(n),Xe.size||window.removeEventListener("resize",Qo)}function Il(n,t,e){let i=n.canvas,o=i&&_n(i);if(!o)return;let a=oi((r,s)=>{let l=o.clientWidth;e(r,s),l<o.clientWidth&&e()},window),c=new ResizeObserver(r=>{let s=r[0],l=s.contentRect.width,u=s.contentRect.height;l===0&&u===0||a(l,u)});return c.observe(o),Ml(n,a),c}function Ai(n,t,e){e&&e.disconnect(),t==="resize"&&Rl(n)}function zl(n,t,e){let i=n.canvas,o=oi(a=>{n.ctx!==null&&e(El(a,n))},n);return Ol(i,t,o),o}var zi=class extends Ln{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(Tl(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[On])return!1;let i=e[On].initial;["height","width"].forEach(a=>{let c=i[a];F(c)?e.removeAttribute(a):e.setAttribute(a,c)});let o=i.style||{};return Object.keys(o).forEach(a=>{e.style[a]=o[a]}),e.width=e.width,delete e[On],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let o=t.$proxies||(t.$proxies={}),c={attach:Ll,detach:Dl,resize:Il}[e]||zl;o[e]=c(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),o=i[e];if(!o)return;({attach:Ai,detach:Ai,resize:Ai}[e]||Al)(t,e,o),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,o){return Ws(t,e,i,o)}isAttached(t){let e=_n(t);return!!(e&&e.isConnected)}};function Fl(n){return!mi()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Ii:zi}var lt=class{active=!1;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Kt(this.x)&&Kt(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let o={};return t.forEach(a=>{o[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),o}};O(lt,"defaults",{}),O(lt,"defaultRoutes");function Bl(n,t){let e=n.options.ticks,i=Hl(n),o=Math.min(e.maxTicksLimit||i,i),a=e.major.enabled?Nl(t):[],c=a.length,r=a[0],s=a[c-1],l=[];if(c>o)return Wl(t,l,a,c/o),l;let u=Vl(a,t,o);if(c>0){let h,f,d=c>1?Math.round((s-r)/(c-1)):null;for(wn(t,l,u,F(d)?0:r-d,r),h=0,f=c-1;h<f;h++)wn(t,l,u,a[h],a[h+1]);return wn(t,l,u,s,F(d)?t.length:s+d),l}return wn(t,l,u),l}function Hl(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),o=n._maxLength/e;return Math.floor(Math.min(i,o))}function Vl(n,t,e){let i=Sl(n),o=t.length/e;if(!i)return Math.max(o,1);let a=ys(i);for(let c=0,r=a.length-1;c<r;c++){let s=a[c];if(s>o)return s}return Math.max(o,1)}function Nl(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function Wl(n,t,e,i){let o=0,a=e[0],c;for(i=Math.ceil(i),c=0;c<n.length;c++)c===a&&(t.push(n[c]),o++,a=e[o*i])}function wn(n,t,e,i,o){let a=D(i,0),c=Math.min(D(o,n.length),n.length),r=0,s,l,u;for(e=Math.ceil(e),o&&(s=o-i,e=s/Math.floor(s/e)),u=a;u<0;)r++,u=Math.round(a+r*e);for(l=Math.max(a,0);l<c;l++)l===u&&(t.push(n[l]),r++,u=Math.round(a+r*e))}function Sl(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var ql=n=>n==="left"?"right":n==="right"?"left":n,co=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,uo=(n,t)=>Math.min(t||n,n);function ho(n,t){let e=[],i=n.length/t,o=n.length,a=0;for(;a<o;a+=i)e.push(n[Math.floor(a)]);return e}function $l(n,t,e){let i=n.ticks.length,o=Math.min(t,i-1),a=n._startPixel,c=n._endPixel,r=1e-6,s=n.getPixelForTick(o),l;if(!(e&&(i===1?l=Math.max(s-a,c-s):t===0?l=(n.getPixelForTick(1)-s)/2:l=(s-n.getPixelForTick(o-1))/2,s+=o<t?l:-l,s<a-r||s>c+r)))return s}function Yl(n,t){B(n,e=>{let i=e.gc,o=i.length/2,a;if(o>t){for(a=0;a<o;++a)delete e.data[i[a]];i.splice(0,o)}})}function He(n){return n.drawTicks?n.tickLength:0}function fo(n,t){if(!n.display)return 0;let e=K(n.font,t),i=J(n.padding);return(W(n.text)?n.text.length:1)*e.lineHeight+i.height}function Ul(n,t){return Tt(n,{scale:t,type:"scale"})}function Gl(n,t,e){return Tt(n,{tick:e,index:t,type:"tick"})}function Kl(n,t,e){let i=gn(n);return(e&&t!=="right"||!e&&t==="right")&&(i=ql(i)),i}function Xl(n,t,e,i){let{top:o,left:a,bottom:c,right:r,chart:s}=n,{chartArea:l,scales:u}=s,h=0,f,d,g,p=c-o,b=r-a;if(n.isHorizontal()){if(d=Z(i,a,r),I(e)){let m=Object.keys(e)[0],v=e[m];g=u[m].getPixelForValue(v)+p-t}else e==="center"?g=(l.bottom+l.top)/2+p-t:g=co(n,e,t);f=r-a}else{if(I(e)){let m=Object.keys(e)[0],v=e[m];d=u[m].getPixelForValue(v)-b+t}else e==="center"?d=(l.left+l.right)/2-b+t:d=co(n,e,t);g=Z(i,c,o),h=e==="left"?-$:$}return{titleX:d,titleY:g,maxWidth:f,rotation:h}}var Lt=class extends lt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:o}=this;return t=it(t,Number.POSITIVE_INFINITY),e=it(e,Number.NEGATIVE_INFINITY),i=it(i,Number.POSITIVE_INFINITY),o=it(o,Number.NEGATIVE_INFINITY),{min:it(t,i),max:it(e,o),minDefined:Y(t),maxDefined:Y(e)}}getMinMax(t){let{min:e,max:i,minDefined:o,maxDefined:a}=this.getUserBounds(),c;if(o&&a)return{min:e,max:i};let r=this.getMatchingVisibleMetas();for(let s=0,l=r.length;s<l;++s)c=r[s].controller.getMinMax(this,t),o||(e=Math.min(e,c.min)),a||(i=Math.max(i,c.max));return e=a&&e>i?i:e,i=o&&e>i?e:i,{min:it(e,it(i,e)),max:it(i,it(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){N(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:o,grace:a,ticks:c}=this.options,r=c.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=zs(this,a,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let s=r<this.ticks.length;this._convertTicksToLabels(s?ho(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=Bl(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){N(this.options.afterUpdate,[this])}beforeSetDimensions(){N(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){N(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),N(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){N(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,o,a;for(i=0,o=t.length;i<o;i++)a=t[i],a.label=N(e.callback,[a.value,i,t],this)}afterTickToLabelConversion(){N(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){N(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=uo(this.ticks.length,t.ticks.maxTicksLimit),o=e.minRotation||0,a=e.maxRotation,c=o,r,s,l;if(!this._isVisible()||!e.display||o>=a||i<=1||!this.isHorizontal()){this.labelRotation=o;return}let u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,d=Q(this.chart.width-h,0,this.maxWidth);r=t.offset?this.maxWidth/i:d/(i-1),h+6>r&&(r=d/(i-(t.offset?.5:1)),s=this.maxHeight-He(t.grid)-e.padding-fo(t.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),c=fn(Math.min(Math.asin(Q((u.highest.height+6)/r,-1,1)),Math.asin(Q(s/l,-1,1))-Math.asin(Q(f/l,-1,1)))),c=Math.max(o,Math.min(a,c))),this.labelRotation=c}afterCalculateLabelRotation(){N(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){N(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:o,grid:a}}=this,c=this._isVisible(),r=this.isHorizontal();if(c){let s=fo(o,e.options.font);if(r?(t.width=this.maxWidth,t.height=He(a)+s):(t.height=this.maxHeight,t.width=He(a)+s),i.display&&this.ticks.length){let{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),d=i.padding*2,g=ht(this.labelRotation),p=Math.cos(g),b=Math.sin(g);if(r){let m=i.mirror?0:b*h.width+p*f.height;t.height=Math.min(this.maxHeight,t.height+m+d)}else{let m=i.mirror?0:p*h.width+b*f.height;t.width=Math.min(this.maxWidth,t.width+m+d)}this._calculatePadding(l,u,b,p)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,o){let{ticks:{align:a,padding:c},position:r}=this.options,s=this.labelRotation!==0,l=r!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,d=0;s?l?(f=o*t.width,d=i*e.height):(f=i*t.height,d=o*e.width):a==="start"?d=e.width:a==="end"?f=t.width:a!=="inner"&&(f=t.width/2,d=e.width/2),this.paddingLeft=Math.max((f-u+c)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-h+c)*this.width/(this.width-h),0)}else{let u=e.height/2,h=t.height/2;a==="start"?(u=0,h=t.height):a==="end"&&(u=e.height,h=0),this.paddingTop=u+c,this.paddingBottom=h+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){N(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)F(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=ho(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:o,_longestTextCache:a}=this,c=[],r=[],s=Math.floor(e/uo(e,i)),l=0,u=0,h,f,d,g,p,b,m,v,_,x,y;for(h=0;h<e;h+=s){if(g=t[h].label,p=this._resolveTickFontOptions(h),o.font=b=p.string,m=a[b]=a[b]||{data:{},gc:[]},v=p.lineHeight,_=x=0,!F(g)&&!W(g))_=Le(o,m.data,m.gc,_,g),x=v;else if(W(g))for(f=0,d=g.length;f<d;++f)y=g[f],!F(y)&&!W(y)&&(_=Le(o,m.data,m.gc,_,y),x+=v);c.push(_),r.push(x),l=Math.max(_,l),u=Math.max(x,u)}Yl(a,e);let w=c.indexOf(l),k=r.indexOf(u),P=C=>({width:c[C]||0,height:r[C]||0});return{first:P(0),last:P(e-1),widest:P(w),highest:P(k),widths:c,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return ks(this._alignToPixels?Nt(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=Gl(this.getContext(),t,i))}return this.$context||(this.$context=Ul(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=ht(this.labelRotation),i=Math.abs(Math.cos(e)),o=Math.abs(Math.sin(e)),a=this._getLabelSizes(),c=t.autoSkipPadding||0,r=a?a.widest.width+c:0,s=a?a.highest.height+c:0;return this.isHorizontal()?s*i>r*o?r/i:s/o:s*o<r*i?s/i:r/o}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,o=this.options,{grid:a,position:c,border:r}=o,s=a.offset,l=this.isHorizontal(),h=this.ticks.length+(s?1:0),f=He(a),d=[],g=r.setContext(this.getContext()),p=g.display?g.width:0,b=p/2,m=function(z){return Nt(i,z,p)},v,_,x,y,w,k,P,C,A,T,E,V;if(c==="top")v=m(this.bottom),k=this.bottom-f,C=v-b,T=m(t.top)+b,V=t.bottom;else if(c==="bottom")v=m(this.top),T=t.top,V=m(t.bottom)-b,k=v+b,C=this.top+f;else if(c==="left")v=m(this.right),w=this.right-f,P=v-b,A=m(t.left)+b,E=t.right;else if(c==="right")v=m(this.left),A=t.left,E=m(t.right)-b,w=v+b,P=this.left+f;else if(e==="x"){if(c==="center")v=m((t.top+t.bottom)/2+.5);else if(I(c)){let z=Object.keys(c)[0],M=c[z];v=m(this.chart.scales[z].getPixelForValue(M))}T=t.top,V=t.bottom,k=v+b,C=k+f}else if(e==="y"){if(c==="center")v=m((t.left+t.right)/2);else if(I(c)){let z=Object.keys(c)[0],M=c[z];v=m(this.chart.scales[z].getPixelForValue(M))}w=v-b,P=w-f,A=t.left,E=t.right}let G=D(o.ticks.maxTicksLimit,h),L=Math.max(1,Math.ceil(h/G));for(_=0;_<h;_+=L){let z=this.getContext(_),M=a.setContext(z),R=r.setContext(z),H=M.lineWidth,j=M.color,X=R.dash||[],et=R.dashOffset,dt=M.tickWidth,yt=M.tickColor,ct=M.tickBorderDash||[],Ce=M.tickBorderDashOffset;x=$l(this,_,s),x!==void 0&&(y=Nt(i,x,H),l?w=P=A=E=y:k=C=T=V=y,d.push({tx1:w,ty1:k,tx2:P,ty2:C,x1:A,y1:T,x2:E,y2:V,width:H,color:j,borderDash:X,borderDashOffset:et,tickWidth:dt,tickColor:yt,tickBorderDash:ct,tickBorderDashOffset:Ce}))}return this._ticksLength=h,this._borderValue=v,d}_computeLabelItems(t){let e=this.axis,i=this.options,{position:o,ticks:a}=i,c=this.isHorizontal(),r=this.ticks,{align:s,crossAlign:l,padding:u,mirror:h}=a,f=He(i.grid),d=f+u,g=h?-u:d,p=-ht(this.labelRotation),b=[],m,v,_,x,y,w,k,P,C,A,T,E,V="middle";if(o==="top")w=this.bottom-g,k=this._getXAxisLabelAlignment();else if(o==="bottom")w=this.top+g,k=this._getXAxisLabelAlignment();else if(o==="left"){let L=this._getYAxisLabelAlignment(f);k=L.textAlign,y=L.x}else if(o==="right"){let L=this._getYAxisLabelAlignment(f);k=L.textAlign,y=L.x}else if(e==="x"){if(o==="center")w=(t.top+t.bottom)/2+d;else if(I(o)){let L=Object.keys(o)[0],z=o[L];w=this.chart.scales[L].getPixelForValue(z)+d}k=this._getXAxisLabelAlignment()}else if(e==="y"){if(o==="center")y=(t.left+t.right)/2-d;else if(I(o)){let L=Object.keys(o)[0],z=o[L];y=this.chart.scales[L].getPixelForValue(z)}k=this._getYAxisLabelAlignment(f).textAlign}e==="y"&&(s==="start"?V="top":s==="end"&&(V="bottom"));let G=this._getLabelSizes();for(m=0,v=r.length;m<v;++m){_=r[m],x=_.label;let L=a.setContext(this.getContext(m));P=this.getPixelForTick(m)+a.labelOffset,C=this._resolveTickFontOptions(m),A=C.lineHeight,T=W(x)?x.length:1;let z=T/2,M=L.color,R=L.textStrokeColor,H=L.textStrokeWidth,j=k;c?(y=P,k==="inner"&&(m===v-1?j=this.options.reverse?"left":"right":m===0?j=this.options.reverse?"right":"left":j="center"),o==="top"?l==="near"||p!==0?E=-T*A+A/2:l==="center"?E=-G.highest.height/2-z*A+A:E=-G.highest.height+A/2:l==="near"||p!==0?E=A/2:l==="center"?E=G.highest.height/2-z*A:E=G.highest.height-T*A,h&&(E*=-1),p!==0&&!L.showLabelBackdrop&&(y+=A/2*Math.sin(p))):(w=P,E=(1-T)*A/2);let X;if(L.showLabelBackdrop){let et=J(L.backdropPadding),dt=G.heights[m],yt=G.widths[m],ct=E-et.top,Ce=0-et.left;switch(V){case"middle":ct-=dt/2;break;case"bottom":ct-=dt;break}switch(k){case"center":Ce-=yt/2;break;case"right":Ce-=yt;break}X={left:Ce,top:ct,width:yt+et.width,height:dt+et.height,color:L.backdropColor}}b.push({label:x,font:C,textOffset:E,options:{rotation:p,color:M,strokeColor:R,strokeWidth:H,textAlign:j,textBaseline:V,translation:[y,w],backdrop:X}})}return b}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-ht(this.labelRotation))return t==="top"?"left":"right";let o="center";return e.align==="start"?o="left":e.align==="end"?o="right":e.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:o,padding:a}}=this.options,c=this._getLabelSizes(),r=t+a,s=c.widest.width,l,u;return e==="left"?o?(u=this.right+a,i==="near"?l="left":i==="center"?(l="center",u+=s/2):(l="right",u+=s)):(u=this.right-r,i==="near"?l="right":i==="center"?(l="center",u-=s/2):(l="left",u=this.left)):e==="right"?o?(u=this.left+a,i==="near"?l="right":i==="center"?(l="center",u-=s/2):(l="left",u-=s)):(u=this.left+r,i==="near"?l="left":i==="center"?(l="center",u+=s/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:o,width:a,height:c}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,o,a,c),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let o=this.ticks.findIndex(a=>a.value===t);return o>=0?e.setContext(this.getContext(o)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),a,c,r=(s,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(s.x,s.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(e.display)for(a=0,c=o.length;a<c;++a){let s=o[a];e.drawOnChartArea&&r({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),e.drawTicks&&r({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:o}}=this,a=i.setContext(this.getContext()),c=i.display?a.width:0;if(!c)return;let r=o.setContext(this.getContext(0)).lineWidth,s=this._borderValue,l,u,h,f;this.isHorizontal()?(l=Nt(t,this.left,c)-c/2,u=Nt(t,this.right,r)+r/2,h=f=s):(h=Nt(t,this.top,c)-c/2,f=Nt(t,this.bottom,r)+r/2,l=u=s),e.save(),e.lineWidth=a.width,e.strokeStyle=a.color,e.beginPath(),e.moveTo(l,h),e.lineTo(u,f),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,o=this._computeLabelArea();o&&Re(i,o);let a=this.getLabelItems(t);for(let c of a){let r=c.options,s=c.font,l=c.label,u=c.textOffset;Wt(i,l,0,u,s,r)}o&&Ie(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:o}}=this;if(!i.display)return;let a=K(i.font),c=J(i.padding),r=i.align,s=a.lineHeight/2;e==="bottom"||e==="center"||I(e)?(s+=c.bottom,W(i.text)&&(s+=a.lineHeight*(i.text.length-1))):s+=c.top;let{titleX:l,titleY:u,maxWidth:h,rotation:f}=Xl(this,s,e,r);Wt(t,i.text,0,0,a,{color:i.color,maxWidth:h,rotation:f,textAlign:Kl(r,e,o),textBaseline:"middle",translation:[l,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=D(t.grid&&t.grid.z,-1),o=D(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Lt.prototype.draw?[{z:e,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:e,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[],a,c;for(a=0,c=e.length;a<c;++a){let r=e[a];r[i]===this.id&&(!t||r.type===t)&&o.push(r)}return o}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return K(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},ke=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;Jl(e)&&(i=this.register(e));let o=this.items,a=t.id,c=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+t);return a in o||(o[a]=t,Ql(t,c,i),this.override&&U.override(t.id,t.overrides)),c}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,o=this.scope;i in e&&delete e[i],o&&i in U[o]&&(delete U[o][i],this.override&&delete Vt[i])}};function Ql(n,t,e){let i=oe(Object.create(null),[e?U.get(e):{},U.get(t),n.defaults]);U.set(t,i),n.defaultRoutes&&Zl(t,n.defaultRoutes),n.descriptors&&U.describe(t,n.descriptors)}function Zl(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),o=i.pop(),a=[n].concat(i).join("."),c=t[e].split("."),r=c.pop(),s=c.join(".");U.route(a,o,s,r)})}function Jl(n){return"id"in n&&"defaults"in n}var Fi=class{constructor(){this.controllers=new ke(at,"datasets",!0),this.elements=new ke(lt,"elements"),this.plugins=new ke(Object,"plugins"),this.scales=new ke(Lt,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(o=>{let a=i||this._getRegistryForType(o);i||a.isForType(o)||a===this.plugins&&o.id?this._exec(t,a,o):B(o,c=>{let r=i||this._getRegistryForType(c);this._exec(t,r,c)})})}_exec(t,e,i){let o=hn(t);N(i["before"+o],[],i),e[t](i),N(i["after"+o],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let o=e.get(t);if(o===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return o}},_t=new Fi,Bi=class{constructor(){this._init=[]}notify(t,e,i,o){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let a=o?this._descriptors(t).filter(o):this._descriptors(t),c=this._notify(a,t,e,i);return e==="afterDestroy"&&(this._notify(a,t,"stop"),this._notify(this._init,t,"uninstall")),c}_notify(t,e,i,o){o=o||{};for(let a of t){let c=a.plugin,r=c[i],s=[e,o,a.options];if(N(r,s,c)===!1&&o.cancelable)return!1}return!0}invalidate(){F(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,o=D(i.options&&i.options.plugins,{}),a=jl(i);return o===!1&&!e?[]:ec(t,a,o,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,o=(a,c)=>a.filter(r=>!c.some(s=>r.plugin.id===s.plugin.id));this._notify(o(e,i),t,"stop"),this._notify(o(i,e),t,"start")}};function jl(n){let t={},e=[],i=Object.keys(_t.plugins.items);for(let a=0;a<i.length;a++)e.push(_t.getPlugin(i[a]));let o=n.plugins||[];for(let a=0;a<o.length;a++){let c=o[a];e.indexOf(c)===-1&&(e.push(c),t[c.id]=!0)}return{plugins:e,localIds:t}}function tc(n,t){return!t&&n===!1?null:n===!0?{}:n}function ec(n,{plugins:t,localIds:e},i,o){let a=[],c=n.getContext();for(let r of t){let s=r.id,l=tc(i[s],o);l!==null&&a.push({plugin:r,options:nc(n.config,{plugin:r,local:e[s]},l,c)})}return a}function nc(n,{plugin:t,local:e},i,o){let a=n.pluginScopeKeys(t),c=n.getOptionScopes(i,a);return e&&t.defaults&&c.push(t.defaults),n.createResolver(c,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hi(n,t){let e=U.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function ic(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function sc(n,t){return n===t?"_index_":"_value_"}function oc(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function Mn(n,t){if(n==="x"||n==="y"||n==="r"||(n=t.axis||oc(t.position)||n.length>1&&Mn(n[0].toLowerCase(),t),n))return n;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function rc(n,t){let e=Vt[n.type]||{scales:{}},i=t.scales||{},o=Hi(n.type,t),a=Object.create(null);return Object.keys(i).forEach(c=>{let r=i[c];if(!I(r))return console.error(`Invalid scale configuration for scale: ${c}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);let s=Mn(c,r),l=sc(s,o),u=e.scales||{};a[c]=le(Object.create(null),[{axis:s},r,u[s],u[l]])}),n.data.datasets.forEach(c=>{let r=c.type||n.type,s=c.indexAxis||Hi(r,t),u=(Vt[r]||{}).scales||{};Object.keys(u).forEach(h=>{let f=ic(h,s),d=c[f+"AxisID"]||f;a[d]=a[d]||Object.create(null),le(a[d],[{axis:f},i[d],u[h]])})}),Object.keys(a).forEach(c=>{let r=a[c];le(r,[U.scales[r.type],U.scale])}),a}function Zo(n){let t=n.options||(n.options={});t.plugins=D(t.plugins,{}),t.scales=rc(n,t)}function Jo(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function ac(n){return n=n||{},n.data=Jo(n.data),Zo(n),n}var go=new Map,jo=new Set;function kn(n,t){let e=go.get(n);return e||(e=t(),go.set(n,e),jo.add(e)),e}var Ve=(n,t,e)=>{let i=Ct(t,e);i!==void 0&&n.add(i)},Vi=class{constructor(t){this._config=ac(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Jo(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),Zo(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return kn(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return kn(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return kn(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return kn(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,o=i.get(t);return(!o||e)&&(o=new Map,i.set(t,o)),o}getOptionScopes(t,e,i){let{options:o,type:a}=this,c=this._cachedScopes(t,i),r=c.get(e);if(r)return r;let s=new Set;e.forEach(u=>{t&&(s.add(t),u.forEach(h=>Ve(s,t,h))),u.forEach(h=>Ve(s,o,h)),u.forEach(h=>Ve(s,Vt[a]||{},h)),u.forEach(h=>Ve(s,U,h)),u.forEach(h=>Ve(s,pn,h))});let l=Array.from(s);return l.length===0&&l.push(Object.create(null)),jo.has(e)&&c.set(e,l),l}chartOptionScopes(){let{options:t,type:e}=this;return[t,Vt[e]||{},U.datasets[e]||{},{type:e},U,pn]}resolveNamedOptions(t,e,i,o=[""]){let a={$shared:!0},{resolver:c,subPrefixes:r}=po(this._resolverCache,t,o),s=c;if(cc(c,e)){a.$shared=!1,i=kt(i)?i():i;let l=this.createResolver(t,i,r);s=Gt(c,i,l)}for(let l of e)a[l]=s[l];return a}createResolver(t,e,i=[""],o){let{resolver:a}=po(this._resolverCache,t,i);return I(e)?Gt(a,e,void 0,o):a}};function po(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let o=e.join(),a=i.get(o);return a||(a={resolver:vn(t,e),subPrefixes:e.filter(r=>!r.toLowerCase().includes("hover"))},i.set(o,a)),a}var lc=n=>I(n)&&Object.getOwnPropertyNames(n).reduce((t,e)=>t||kt(n[e]),!1);function cc(n,t){let{isScriptable:e,isIndexable:i}=fi(n);for(let o of t){let a=e(o),c=i(o),r=(c||a)&&n[o];if(a&&(kt(r)||lc(r))||c&&W(r))return!0}return!1}var uc="4.2.1",hc=["top","bottom","left","right","chartArea"];function mo(n,t){return n==="top"||n==="bottom"||hc.indexOf(n)===-1&&t==="x"}function bo(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function vo(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),N(e&&e.onComplete,[n],t)}function fc(n){let t=n.chart,e=t.options.animation;N(e&&e.onProgress,[n],t)}function tr(n){return mi()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var An={},_o=n=>{let t=tr(n);return Object.values(An).filter(e=>e.canvas===t).pop()};function dc(n,t,e){let i=Object.keys(n);for(let o of i){let a=+o;if(a>=t){let c=n[o];delete n[o],(e>0||a>t)&&(n[a+e]=c)}}}function gc(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function pc(n){let{xScale:t,yScale:e}=n;if(t&&e)return{left:t.left,right:t.right,top:e.top,bottom:e.bottom}}var ft=class{static register(...t){_t.add(...t),xo()}static unregister(...t){_t.remove(...t),xo()}constructor(t,e){let i=this.config=new Vi(e),o=tr(t),a=_o(o);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");let c=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Fl(o)),this.platform.updateConfig(i);let r=this.platform.acquireContext(o,c.aspectRatio),s=r&&r.canvas,l=s&&s.height,u=s&&s.width;if(this.id=bs(),this.ctx=r,this.canvas=s,this.width=u,this.height=l,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bi,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=As(h=>this.update(h),c.resizeDelay||0),this._dataChanges=[],An[this.id]=this,!r||!s){console.error("Failed to create chart: can't acquire context from the given item");return}Ot.listen(this,"complete",vo),Ot.listen(this,"progress",fc),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:o,_aspectRatio:a}=this;return F(t)?e&&a?a:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return _t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ci(this.canvas,this.ctx),this}stop(){return Ot.stop(this),this}resize(t,e){Ot.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,o=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(o,t,e,a),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,bi(this,r,!0)&&(this.notifyPlugins("resize",{size:c}),N(i.onResize,[this,c],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){let e=this.options.scales||{};B(e,(i,o)=>{i.id=o})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,o=Object.keys(i).reduce((c,r)=>(c[r]=!1,c),{}),a=[];e&&(a=a.concat(Object.keys(e).map(c=>{let r=e[c],s=Mn(c,r),l=s==="r",u=s==="x";return{options:r,dposition:l?"chartArea":u?"bottom":"left",dtype:l?"radialLinear":u?"category":"linear"}}))),B(a,c=>{let r=c.options,s=r.id,l=Mn(s,r),u=D(r.type,c.dtype);(r.position===void 0||mo(r.position,l)!==mo(c.dposition))&&(r.position=c.dposition),o[s]=!0;let h=null;if(s in i&&i[s].type===u)h=i[s];else{let f=_t.getScale(u);h=new f({id:s,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(r,t)}),B(o,(c,r)=>{c||delete i[r]}),B(i,c=>{tt.configure(this,c,c.options),tt.addBox(this,c)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((o,a)=>o.index-a.index),i>e){for(let o=e;o<i;++o)this._destroyDatasetMeta(o);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(bo("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,o)=>{e.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,i,o;for(this._removeUnreferencedMetasets(),i=0,o=e.length;i<o;i++){let a=e[i],c=this.getDatasetMeta(i),r=a.type||this.config.type;if(c.type&&c.type!==r&&(this._destroyDatasetMeta(i),c=this.getDatasetMeta(i)),c.type=r,c.indexAxis=a.indexAxis||Hi(r,this.options),c.order=a.order||0,c.index=i,c.label=""+a.label,c.visible=this.isDatasetVisible(i),c.controller)c.controller.updateIndex(i),c.controller.linkScales();else{let s=_t.getController(r),{datasetElementType:l,dataElementType:u}=U.datasets[r];Object.assign(s,{dataElementType:_t.getElement(u),datasetElementType:l&&_t.getElement(l)}),c.controller=new s(this,i),t.push(c.controller)}}return this._updateMetasets(),t}_resetElements(){B(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let l=0,u=this.data.datasets.length;l<u;l++){let{controller:h}=this.getDatasetMeta(l),f=!o&&a.indexOf(h)===-1;h.buildOrUpdateElements(f),c=Math.max(+h.getMaxOverflow(),c)}c=this._minPadding=i.layout.autoPadding?c:0,this._updateLayout(c),o||B(a,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(bo("z","_idx"));let{_active:r,_lastEvent:s}=this;s?this._eventHandler(s,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){B(this.scales,t=>{tt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Zn(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:i,start:o,count:a}of e){let c=i==="_removeElements"?-a:a;dc(t,o,c)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=a=>new Set(t.filter(c=>c[0]===a).map((c,r)=>r+","+c.splice(1).join(","))),o=i(0);for(let a=1;a<e;a++)if(!Zn(o,i(a)))return;return Array.from(o).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;tt.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],B(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,a)=>{o._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,kt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),o={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(e),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ot.has(this)?this.attached&&!Ot.running(this)&&Ot.start(this):(this.draw(),vo({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:o}=this._resizeBeforeDraw;this._resize(i,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,i=[],o,a;for(o=0,a=e.length;o<a;++o){let c=e[o];(!t||c.visible)&&i.push(c)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i=t._clip,o=!i.disabled,a=pc(t)||this.chartArea,c={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",c)!==!1&&(o&&Re(e,{left:i.left===!1?0:a.left-i.left,right:i.right===!1?this.width:a.right+i.right,top:i.top===!1?0:a.top-i.top,bottom:i.bottom===!1?this.height:a.bottom+i.bottom}),t.controller.draw(),o&&Ie(e),c.cancelable=!1,this.notifyPlugins("afterDatasetDraw",c))}isPointInArea(t){return re(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,o){let a=bl.modes[e];return typeof a=="function"?a(this,t,i,o):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,o=i.filter(a=>a&&a._dataset===e).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=Tt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){let i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let o=i?"show":"hide",a=this.getDatasetMeta(t),c=a.controller._resolveAnimations(void 0,o);rt(e)?(a.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),c.update(a,{visible:i}),this.update(r=>r.datasetIndex===t?o:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ot.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ci(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete An[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(a,c)=>{e.addEventListener(this,a,c),t[a]=c},o=(a,c,r)=>{a.offsetX=c,a.offsetY=r,this._eventHandler(a)};B(this.options.events,a=>i(a,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,i=(s,l)=>{e.addEventListener(this,s,l),t[s]=l},o=(s,l)=>{t[s]&&(e.removeEventListener(this,s,l),delete t[s])},a=(s,l)=>{this.canvas&&this.resize(s,l)},c,r=()=>{o("attach",r),this.attached=!0,this.resize(),i("resize",a),i("detach",c)};c=()=>{this.attached=!1,o("resize",a),this._stop(),this._resize(0,0),i("attach",r)},e.isAttached(this.canvas)?r():c()}unbindEvents(){B(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},B(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let o=i?"set":"remove",a,c,r,s;for(e==="dataset"&&(a=this.getDatasetMeta(t[0].datasetIndex),a.controller["_"+o+"DatasetHoverStyle"]()),r=0,s=t.length;r<s;++r){c=t[r];let l=c&&this.getDatasetMeta(c.datasetIndex).controller;l&&l[o+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:a,index:c})=>{let r=this.getDatasetMeta(a);if(!r)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:r.data[c],index:c}});!De(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){let o=this.options.hover,a=(s,l)=>s.filter(u=>!l.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),c=a(e,t),r=i?t:a(t,e);c.length&&this.updateHoverStyle(c,o.mode,!1),r.length&&o.mode&&this.updateHoverStyle(r,o.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},o=c=>(c.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;let a=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(a||i.changed)&&this.render(),this}_handleEvent(t,e,i){let{_active:o=[],options:a}=this,c=e,r=this._getActiveElements(t,o,i,c),s=xs(t),l=gc(t,this._lastEvent,i,s);i&&(this._lastEvent=null,N(a.onHover,[t,r,this],this),s&&N(a.onClick,[t,r,this],this));let u=!De(r,o);return(u||e)&&(this._active=r,this._updateHoverStyles(r,o,e)),this._lastEvent=l,u}_getActiveElements(t,e,i,o){if(t.type==="mouseout")return[];if(!i)return e;let a=this.options.hover;return this.getElementsAtEventForMode(t,a.mode,a,o)}};O(ft,"defaults",U),O(ft,"instances",An),O(ft,"overrides",Vt),O(ft,"registry",_t),O(ft,"version",uc),O(ft,"getChart",_o);function xo(){return B(ft.instances,n=>n._plugins.invalidate())}function mc(n,t,e){let{startAngle:i,pixelMargin:o,x:a,y:c,outerRadius:r,innerRadius:s}=t,l=o/r;n.beginPath(),n.arc(a,c,r,i-l,e+l),s>o?(l=o/s,n.arc(a,c,s,e+l,i-l,!0)):n.arc(a,c,o,e+$,i-$),n.closePath(),n.clip()}function bc(n){return bn(n,["outerStart","outerEnd","innerStart","innerEnd"])}function vc(n,t,e,i){let o=bc(n.options.borderRadius),a=(e-t)/2,c=Math.min(a,i*t/2),r=s=>{let l=(e-Math.min(a,s))*i/2;return Q(s,0,Math.min(a,l))};return{outerStart:r(o.outerStart),outerEnd:r(o.outerEnd),innerStart:Q(o.innerStart,0,c),innerEnd:Q(o.innerEnd,0,c)}}function ge(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Rn(n,t,e,i,o,a){let{x:c,y:r,startAngle:s,pixelMargin:l,innerRadius:u}=t,h=Math.max(t.outerRadius+i+e-l,0),f=u>0?u+i+e+l:0,d=0,g=o-s;if(i){let L=u>0?u-i:0,z=h>0?h-i:0,M=(L+z)/2,R=M!==0?g*M/(M+i):g;d=(g-R)/2}let p=Math.max(.001,g*h-e/q)/h,b=(g-p)/2,m=s+b+d,v=o-b-d,{outerStart:_,outerEnd:x,innerStart:y,innerEnd:w}=vc(t,f,h,v-m),k=h-_,P=h-x,C=m+_/k,A=v-x/P,T=f+y,E=f+w,V=m+y/T,G=v-w/E;if(n.beginPath(),a){let L=(C+A)/2;if(n.arc(c,r,h,C,L),n.arc(c,r,h,L,A),x>0){let H=ge(P,A,c,r);n.arc(H.x,H.y,x,A,v+$)}let z=ge(E,v,c,r);if(n.lineTo(z.x,z.y),w>0){let H=ge(E,G,c,r);n.arc(H.x,H.y,w,v+$,G+Math.PI)}let M=(v-w/f+(m+y/f))/2;if(n.arc(c,r,f,v-w/f,M,!0),n.arc(c,r,f,M,m+y/f,!0),y>0){let H=ge(T,V,c,r);n.arc(H.x,H.y,y,V+Math.PI,m-$)}let R=ge(k,m,c,r);if(n.lineTo(R.x,R.y),_>0){let H=ge(k,C,c,r);n.arc(H.x,H.y,_,m-$,C)}}else{n.moveTo(c,r);let L=Math.cos(C)*h+c,z=Math.sin(C)*h+r;n.lineTo(L,z);let M=Math.cos(A)*h+c,R=Math.sin(A)*h+r;n.lineTo(M,R)}n.closePath()}function _c(n,t,e,i,o){let{fullCircles:a,startAngle:c,circumference:r}=t,s=t.endAngle;if(a){Rn(n,t,e,i,s,o);for(let l=0;l<a;++l)n.fill();isNaN(r)||(s=c+(r%S||S))}return Rn(n,t,e,i,s,o),n.fill(),s}function xc(n,t,e,i,o){let{fullCircles:a,startAngle:c,circumference:r,options:s}=t,{borderWidth:l,borderJoinStyle:u}=s,h=s.borderAlign==="inner";if(!l)return;h?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let f=t.endAngle;if(a){Rn(n,t,e,i,f,o);for(let d=0;d<a;++d)n.stroke();isNaN(r)||(f=c+(r%S||S))}h&&mc(n,t,f),a||(Rn(n,t,e,i,f,o),n.stroke())}var xe=class extends lt{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let o=this.getProps(["x","y"],i),{angle:a,distance:c}=ei(o,{x:t,y:e}),{startAngle:r,endAngle:s,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),f=this.options.spacing/2,g=D(h,s-r)>=S||ue(a,r,s),p=bt(c,l+f,u+f);return g&&p}getCenterPoint(t){let{x:e,y:i,startAngle:o,endAngle:a,innerRadius:c,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:l}=this.options,u=(o+a)/2,h=(c+r+l+s)/2;return{x:e+Math.cos(u)*h,y:i+Math.sin(u)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,o=(e.offset||0)/4,a=(e.spacing||0)/2,c=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>S?Math.floor(i/S):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let r=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(r)*o,Math.sin(r)*o);let s=1-Math.sin(Math.min(q,i||0)),l=o*s;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,_c(t,this,l,a,c),xc(t,this,l,a,c),t.restore()}};O(xe,"id","arc"),O(xe,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),O(xe,"defaultRoutes",{backgroundColor:"backgroundColor"});function er(n,t,e=t){n.lineCap=D(e.borderCapStyle,t.borderCapStyle),n.setLineDash(D(e.borderDash,t.borderDash)),n.lineDashOffset=D(e.borderDashOffset,t.borderDashOffset),n.lineJoin=D(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=D(e.borderWidth,t.borderWidth),n.strokeStyle=D(e.borderColor,t.borderColor)}function yc(n,t,e){n.lineTo(e.x,e.y)}function wc(n){return n.stepped?Rs:n.tension||n.cubicInterpolationMode==="monotone"?Is:yc}function nr(n,t,e={}){let i=n.length,{start:o=0,end:a=i-1}=e,{start:c,end:r}=t,s=Math.max(o,c),l=Math.min(a,r),u=o<c&&a<c||o>r&&a>r;return{count:i,start:s,loop:t.loop,ilen:l<s&&!u?i+l-s:l-s}}function kc(n,t,e,i){let{points:o,options:a}=t,{count:c,start:r,loop:s,ilen:l}=nr(o,e,i),u=wc(a),{move:h=!0,reverse:f}=i||{},d,g,p;for(d=0;d<=l;++d)g=o[(r+(f?l-d:d))%c],!g.skip&&(h?(n.moveTo(g.x,g.y),h=!1):u(n,p,g,f,a.stepped),p=g);return s&&(g=o[(r+(f?l:0))%c],u(n,p,g,f,a.stepped)),!!s}function Pc(n,t,e,i){let o=t.points,{count:a,start:c,ilen:r}=nr(o,e,i),{move:s=!0,reverse:l}=i||{},u=0,h=0,f,d,g,p,b,m,v=x=>(c+(l?r-x:x))%a,_=()=>{p!==b&&(n.lineTo(u,b),n.lineTo(u,p),n.lineTo(u,m))};for(s&&(d=o[v(0)],n.moveTo(d.x,d.y)),f=0;f<=r;++f){if(d=o[v(f)],d.skip)continue;let x=d.x,y=d.y,w=x|0;w===g?(y<p?p=y:y>b&&(b=y),u=(h*u+x)/++h):(_(),n.lineTo(x,y),g=w,h=0,p=b=y),m=y}_()}function Ni(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Pc:kc}function Cc(n){return n.stepped?qs:n.tension||n.cubicInterpolationMode==="monotone"?$s:Ht}function Tc(n,t,e,i){let o=t._path;o||(o=t._path=new Path2D,t.path(o,e,i)&&o.closePath()),er(n,t.options),n.stroke(o)}function Oc(n,t,e,i){let{segments:o,options:a}=t,c=Ni(t);for(let r of o)er(n,a,r.style),n.beginPath(),c(n,t,r,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var Ac=typeof Path2D=="function";function Ec(n,t,e,i){Ac&&!t.options.segment?Tc(n,t,e,i):Oc(n,t,e,i)}var xt=class extends lt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let o=i.spanGaps?this._loop:this._fullLoop;Ns(this._points,i,t,o,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Us(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i=this.options,o=t[e],a=this.points,c=wi(this,{property:e,start:o,end:o});if(!c.length)return;let r=[],s=Cc(i),l,u;for(l=0,u=c.length;l<u;++l){let{start:h,end:f}=c[l],d=a[h],g=a[f];if(d===g){r.push(d);continue}let p=Math.abs((o-d[e])/(g[e]-d[e])),b=s(d,g,p,i.stepped);b[e]=t[e],r.push(b)}return r.length===1?r[0]:r}pathSegment(t,e,i){return Ni(this)(t,this,e,i)}path(t,e,i){let o=this.segments,a=Ni(this),c=this._loop;e=e||0,i=i||this.points.length-e;for(let r of o)c&=a(t,this,r,{start:e,end:e+i-1});return!!c}draw(t,e,i,o){let a=this.options||{};(this.points||[]).length&&a.borderWidth&&(t.save(),Ec(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};O(xt,"id","line"),O(xt,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),O(xt,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),O(xt,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function yo(n,t,e,i){let o=n.options,{[e]:a}=n.getProps([e],i);return Math.abs(t-a)<o.radius+o.hitRadius}var ye=class extends lt{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let o=this.options,{x:a,y:c}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(e-c,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,e){return yo(this,t,"x",e)}inYRange(t,e){return yo(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);let i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;this.skip||i.radius<.1||!re(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,mn(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}};O(ye,"id","point"),O(ye,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),O(ye,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ir(n,t){let{x:e,y:i,base:o,width:a,height:c}=n.getProps(["x","y","base","width","height"],t),r,s,l,u,h;return n.horizontal?(h=c/2,r=Math.min(e,o),s=Math.max(e,o),l=i-h,u=i+h):(h=a/2,r=e-h,s=e+h,l=Math.min(i,o),u=Math.max(i,o)),{left:r,top:l,right:s,bottom:u}}function $t(n,t,e,i){return n?0:Q(t,e,i)}function Lc(n,t,e){let i=n.options.borderWidth,o=n.borderSkipped,a=hi(i);return{t:$t(o.top,a.top,0,e),r:$t(o.right,a.right,0,t),b:$t(o.bottom,a.bottom,0,e),l:$t(o.left,a.left,0,t)}}function Dc(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),o=n.options.borderRadius,a=St(o),c=Math.min(t,e),r=n.borderSkipped,s=i||I(o);return{topLeft:$t(!s||r.top||r.left,a.topLeft,0,c),topRight:$t(!s||r.top||r.right,a.topRight,0,c),bottomLeft:$t(!s||r.bottom||r.left,a.bottomLeft,0,c),bottomRight:$t(!s||r.bottom||r.right,a.bottomRight,0,c)}}function Mc(n){let t=ir(n),e=t.right-t.left,i=t.bottom-t.top,o=Lc(n,e/2,i/2),a=Dc(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:a},inner:{x:t.left+o.l,y:t.top+o.t,w:e-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,a.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(o.b,o.r))}}}}function Ei(n,t,e,i){let o=t===null,a=e===null,r=n&&!(o&&a)&&ir(n,i);return r&&(o||bt(t,r.left,r.right))&&(a||bt(e,r.top,r.bottom))}function Rc(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Ic(n,t){n.rect(t.x,t.y,t.w,t.h)}function Li(n,t,e={}){let i=n.x!==e.x?-t:0,o=n.y!==e.y?-t:0,a=(n.x+n.w!==e.x+e.w?t:0)-i,c=(n.y+n.h!==e.y+e.h?t:0)-o;return{x:n.x+i,y:n.y+o,w:n.w+a,h:n.h+c,radius:n.radius}}var we=class extends lt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:o}}=this,{inner:a,outer:c}=Mc(this),r=Rc(c.radius)?fe:Ic;t.save(),(c.w!==a.w||c.h!==a.h)&&(t.beginPath(),r(t,Li(c,e,a)),t.clip(),r(t,Li(a,-e,c)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),r(t,Li(a,e)),t.fillStyle=o,t.fill(),t.restore()}inRange(t,e,i){return Ei(this,t,e,i)}inXRange(t,e){return Ei(this,t,null,e)}inYRange(t,e){return Ei(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:o,horizontal:a}=this.getProps(["x","y","base","horizontal"],t);return{x:a?(e+o)/2:e,y:a?i:(i+o)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}};O(we,"id","bar"),O(we,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),O(we,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var zc=Object.freeze({__proto__:null,ArcElement:xe,LineElement:xt,PointElement:ye,BarElement:we}),Wi=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],wo=Wi.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function sr(n){return Wi[n%Wi.length]}function or(n){return wo[n%wo.length]}function Fc(n,t){return n.borderColor=sr(t),n.backgroundColor=or(t),++t}function Bc(n,t){return n.backgroundColor=n.data.map(()=>sr(t++)),t}function Hc(n,t){return n.backgroundColor=n.data.map(()=>or(t++)),t}function Vc(n){let t=0;return(e,i)=>{let o=n.getDatasetMeta(i).controller;o instanceof Et?t=Bc(e,t):o instanceof jt?t=Hc(e,t):o&&(t=Fc(e,t))}}function ko(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function Nc(n){return n&&(n.borderColor||n.backgroundColor)}var Wc={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:o}=n.config,{elements:a}=o;if(!e.forceOverride&&(ko(i)||Nc(o)||a&&ko(a)))return;let c=Vc(n);i.forEach(c)}};function Sc(n,t,e,i,o){let a=o.samples||i;if(a>=e)return n.slice(t,t+e);let c=[],r=(e-2)/(a-2),s=0,l=t+e-1,u=t,h,f,d,g,p;for(c[s++]=n[u],h=0;h<a-2;h++){let b=0,m=0,v,_=Math.floor((h+1)*r)+1+t,x=Math.min(Math.floor((h+2)*r)+1,e)+t,y=x-_;for(v=_;v<x;v++)b+=n[v].x,m+=n[v].y;b/=y,m/=y;let w=Math.floor(h*r)+1+t,k=Math.min(Math.floor((h+1)*r)+1,e)+t,{x:P,y:C}=n[u];for(d=g=-1,v=w;v<k;v++)g=.5*Math.abs((P-b)*(n[v].y-C)-(P-n[v].x)*(m-C)),g>d&&(d=g,f=n[v],p=v);c[s++]=f,u=p}return c[s++]=n[l],c}function qc(n,t,e,i){let o=0,a=0,c,r,s,l,u,h,f,d,g,p,b=[],m=t+e-1,v=n[t].x,x=n[m].x-v;for(c=t;c<t+e;++c){r=n[c],s=(r.x-v)/x*i,l=r.y;let y=s|0;if(y===u)l<g?(g=l,h=c):l>p&&(p=l,f=c),o=(a*o+r.x)/++a;else{let w=c-1;if(!F(h)&&!F(f)){let k=Math.min(h,f),P=Math.max(h,f);k!==d&&k!==w&&b.push({...n[k],x:o}),P!==d&&P!==w&&b.push({...n[P],x:o})}c>0&&w!==d&&b.push(n[w]),b.push(r),u=y,a=0,g=p=l,h=f=d=c}}return b}function rr(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Po(n){n.data.datasets.forEach(t=>{rr(t)})}function $c(n,t){let e=t.length,i=0,o,{iScale:a}=n,{min:c,max:r,minDefined:s,maxDefined:l}=a.getUserBounds();return s&&(i=Q(pt(t,a.axis,c).lo,0,e-1)),l?o=Q(pt(t,a.axis,r).hi+1,i,e)-i:o=e-i,{start:i,count:o}}var Yc={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){Po(n);return}let i=n.width;n.data.datasets.forEach((o,a)=>{let{_data:c,indexAxis:r}=o,s=n.getDatasetMeta(a),l=c||o.data;if(de([r,n.options.indexAxis])==="y"||!s.controller.supportsDecimation)return;let u=n.scales[s.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:f}=$c(s,l),d=e.threshold||4*i;if(f<=d){rr(o);return}F(c)&&(o._data=l,delete o.data,Object.defineProperty(o,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(p){this._data=p}}));let g;switch(e.algorithm){case"lttb":g=Sc(l,h,f,i,e);break;case"min-max":g=qc(l,h,f,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}o._decimated=g})},destroy(n){Po(n)}};function Uc(n,t,e){let i=n.segments,o=n.points,a=t.points,c=[];for(let r of i){let{start:s,end:l}=r;l=$i(s,l,o);let u=Si(e,o[s],o[l],r.loop);if(!t.segments){c.push({source:r,target:u,start:o[s],end:o[l]});continue}let h=wi(t,u);for(let f of h){let d=Si(e,a[f.start],a[f.end],f.loop),g=yi(r,o,d);for(let p of g)c.push({source:p,target:f,start:{[e]:Co(u,d,"start",Math.max)},end:{[e]:Co(u,d,"end",Math.min)}})}}return c}function Si(n,t,e,i){if(i)return;let o=t[n],a=e[n];return n==="angle"&&(o=nt(o),a=nt(a)),{property:n,start:o,end:a}}function Gc(n,t){let{x:e=null,y:i=null}=n||{},o=t.points,a=[];return t.segments.forEach(({start:c,end:r})=>{r=$i(c,r,o);let s=o[c],l=o[r];i!==null?(a.push({x:s.x,y:i}),a.push({x:l.x,y:i})):e!==null&&(a.push({x:e,y:s.y}),a.push({x:e,y:l.y}))}),a}function $i(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function Co(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function ar(n,t){let e=[],i=!1;return W(n)?(i=!0,e=n):e=Gc(n,t),e.length?new xt({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function To(n){return n&&n.fill!==!1}function Kc(n,t,e){let o=n[t].fill,a=[t],c;if(!e)return o;for(;o!==!1&&a.indexOf(o)===-1;){if(!Y(o))return o;if(c=n[o],!c)return!1;if(c.visible)return o;a.push(o),o=c.fill}return!1}function Xc(n,t,e){let i=jc(n);if(I(i))return isNaN(i.value)?!1:i;let o=parseFloat(i);return Y(o)&&Math.floor(o)===o?Qc(i[0],t,o,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Qc(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function Zc(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:I(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Jc(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:I(n)?i=n.value:i=t.getBaseValue(),i}function jc(n){let t=n.options,e=t.fill,i=D(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function tu(n){let{scale:t,index:e,line:i}=n,o=[],a=i.segments,c=i.points,r=eu(t,e);r.push(ar({x:null,y:t.bottom},i));for(let s=0;s<a.length;s++){let l=a[s];for(let u=l.start;u<=l.end;u++)nu(o,c[u],r)}return new xt({points:o,options:{}})}function eu(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let o=0;o<i.length;o++){let a=i[o];if(a.index===t)break;a.hidden||e.unshift(a.dataset)}return e}function nu(n,t,e){let i=[];for(let o=0;o<e.length;o++){let a=e[o],{first:c,last:r,point:s}=iu(a,t,"x");if(!(!s||c&&r)){if(c)i.unshift(s);else if(n.push(s),!r)break}}n.push(...i)}function iu(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let o=i[e],a=n.segments,c=n.points,r=!1,s=!1;for(let l=0;l<a.length;l++){let u=a[l],h=c[u.start][e],f=c[u.end][e];if(bt(o,h,f)){r=o===h,s=o===f;break}}return{first:r,last:s,point:i}}var In=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:o,y:a,radius:c}=this;return e=e||{start:0,end:S},t.arc(o,a,c,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:o}=this,a=t.angle;return{x:e+Math.cos(a)*o,y:i+Math.sin(a)*o,angle:a}}};function su(n){let{chart:t,fill:e,line:i}=n;if(Y(e))return ou(t,e);if(e==="stack")return tu(n);if(e==="shape")return!0;let o=ru(n);return o instanceof In?o:ar(o,i)}function ou(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function ru(n){return(n.scale||{}).getPointPositionForValue?lu(n):au(n)}function au(n){let{scale:t={},fill:e}=n,i=Zc(e,t);if(Y(i)){let o=t.isHorizontal();return{x:o?i:null,y:o?null:i}}return null}function lu(n){let{scale:t,fill:e}=n,i=t.options,o=t.getLabels().length,a=i.reverse?t.max:t.min,c=Jc(e,t,a),r=[];if(i.grid.circular){let s=t.getPointPositionForValue(0,a);return new In({x:s.x,y:s.y,radius:t.getDistanceFromCenterForValue(c)})}for(let s=0;s<o;++s)r.push(t.getPointPositionForValue(s,c));return r}function Di(n,t,e){let i=su(t),{line:o,scale:a,axis:c}=t,r=o.options,s=r.fill,l=r.backgroundColor,{above:u=l,below:h=l}=s||{};i&&o.points.length&&(Re(n,e),cu(n,{line:o,target:i,above:u,below:h,area:e,scale:a,axis:c}),Ie(n))}function cu(n,t){let{line:e,target:i,above:o,below:a,area:c,scale:r}=t,s=e._loop?"angle":t.axis;n.save(),s==="x"&&a!==o&&(Oo(n,i,c.top),Ao(n,{line:e,target:i,color:o,scale:r,property:s}),n.restore(),n.save(),Oo(n,i,c.bottom)),Ao(n,{line:e,target:i,color:a,scale:r,property:s}),n.restore()}function Oo(n,t,e){let{segments:i,points:o}=t,a=!0,c=!1;n.beginPath();for(let r of i){let{start:s,end:l}=r,u=o[s],h=o[$i(s,l,o)];a?(n.moveTo(u.x,u.y),a=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),c=!!t.pathSegment(n,r,{move:c}),c?n.closePath():n.lineTo(h.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function Ao(n,t){let{line:e,target:i,property:o,color:a,scale:c}=t,r=Uc(e,i,o);for(let{source:s,target:l,start:u,end:h}of r){let{style:{backgroundColor:f=a}={}}=s,d=i!==!0;n.save(),n.fillStyle=f,uu(n,c,d&&Si(o,u,h)),n.beginPath();let g=!!e.pathSegment(n,s),p;if(d){g?n.closePath():Eo(n,i,h,o);let b=!!i.pathSegment(n,l,{move:g,reverse:!0});p=g&&b,p||Eo(n,i,u,o)}n.closePath(),n.fill(p?"evenodd":"nonzero"),n.restore()}}function uu(n,t,e){let{top:i,bottom:o}=t.chart.chartArea,{property:a,start:c,end:r}=e||{};a==="x"&&(n.beginPath(),n.rect(c,i,r-c,o-i),n.clip())}function Eo(n,t,e,i){let o=t.interpolate(e,i);o&&n.lineTo(o.x,o.y)}var hu={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,o=[],a,c,r,s;for(c=0;c<i;++c)a=n.getDatasetMeta(c),r=a.dataset,s=null,r&&r.options&&r instanceof xt&&(s={visible:n.isDatasetVisible(c),index:c,fill:Xc(r,c,i),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:r}),a.$filler=s,o.push(s);for(c=0;c<i;++c)s=o[c],!(!s||s.fill===!1)&&(s.fill=Kc(o,c,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",o=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let c=o.length-1;c>=0;--c){let r=o[c].$filler;r&&(r.line.updateControlPoints(a,r.axis),i&&r.fill&&Di(n.ctx,r,a))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;To(a)&&Di(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!To(i)||e.drawTime!=="beforeDatasetDraw"||Di(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Lo=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},fu=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,zn=class extends lt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=N(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,o)=>t.sort(i,o,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,o=K(i.font),a=o.size,c=this._computeTitleHeight(),{boxWidth:r,itemHeight:s}=Lo(i,a),l,u;e.font=o.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(c,a,r,s)+10):(u=this.maxHeight,l=this._fitCols(c,o,r,s)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,o){let{ctx:a,maxWidth:c,options:{labels:{padding:r}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=o+r,h=t;a.textAlign="left",a.textBaseline="middle";let f=-1,d=-u;return this.legendItems.forEach((g,p)=>{let b=i+e/2+a.measureText(g.text).width;(p===0||l[l.length-1]+b+2*r>c)&&(h+=u,l[l.length-(p>0?0:1)]=0,d+=u,f++),s[p]={left:0,top:d,row:f,width:b,height:o},l[l.length-1]+=b+r}),h}_fitCols(t,e,i,o){let{ctx:a,maxHeight:c,options:{labels:{padding:r}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=c-t,h=r,f=0,d=0,g=0,p=0;return this.legendItems.forEach((b,m)=>{let{itemWidth:v,itemHeight:_}=du(i,e,a,b,o);m>0&&d+_+2*r>u&&(h+=f+r,l.push({width:f,height:d}),g+=f+r,p++,f=d=0),s[m]={left:g,top:d,col:p,width:v,height:_},f=Math.max(f,v),d+=_+r}),h+=f,l.push({width:f,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:o},rtl:a}}=this,c=Xt(a,this.left,this.width);if(this.isHorizontal()){let r=0,s=Z(i,this.left+o,this.right-this.lineWidths[r]);for(let l of e)r!==l.row&&(r=l.row,s=Z(i,this.left+o,this.right-this.lineWidths[r])),l.top+=this.top+t+o,l.left=c.leftForLtr(c.x(s),l.width),s+=l.width+o}else{let r=0,s=Z(i,this.top+t+o,this.bottom-this.columnSizes[r].height);for(let l of e)l.col!==r&&(r=l.col,s=Z(i,this.top+t+o,this.bottom-this.columnSizes[r].height)),l.top=s,l.left+=this.left+o,l.left=c.leftForLtr(c.x(l.left),l.width),s+=l.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;Re(t,this),this._draw(),Ie(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:o}=this,{align:a,labels:c}=t,r=U.color,s=Xt(t.rtl,this.left,this.width),l=K(c.font),{padding:u}=c,h=l.size,f=h/2,d;this.drawTitle(),o.textAlign=s.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=l.string;let{boxWidth:g,boxHeight:p,itemHeight:b}=Lo(c,h),m=function(w,k,P){if(isNaN(g)||g<=0||isNaN(p)||p<0)return;o.save();let C=D(P.lineWidth,1);if(o.fillStyle=D(P.fillStyle,r),o.lineCap=D(P.lineCap,"butt"),o.lineDashOffset=D(P.lineDashOffset,0),o.lineJoin=D(P.lineJoin,"miter"),o.lineWidth=C,o.strokeStyle=D(P.strokeStyle,r),o.setLineDash(D(P.lineDash,[])),c.usePointStyle){let A={radius:p*Math.SQRT2/2,pointStyle:P.pointStyle,rotation:P.rotation,borderWidth:C},T=s.xPlus(w,g/2),E=k+f;ui(o,A,T,E,c.pointStyleWidth&&g)}else{let A=k+Math.max((h-p)/2,0),T=s.leftForLtr(w,g),E=St(P.borderRadius);o.beginPath(),Object.values(E).some(V=>V!==0)?fe(o,{x:T,y:A,w:g,h:p,radius:E}):o.rect(T,A,g,p),o.fill(),C!==0&&o.stroke()}o.restore()},v=function(w,k,P){Wt(o,P.text,w,k+b/2,l,{strikethrough:P.hidden,textAlign:s.textAlign(P.textAlign)})},_=this.isHorizontal(),x=this._computeTitleHeight();_?d={x:Z(a,this.left+u,this.right-i[0]),y:this.top+u+x,line:0}:d={x:this.left+u,y:Z(a,this.top+x+u,this.bottom-e[0].height),line:0},_i(this.ctx,t.textDirection);let y=b+u;this.legendItems.forEach((w,k)=>{o.strokeStyle=w.fontColor,o.fillStyle=w.fontColor;let P=o.measureText(w.text).width,C=s.textAlign(w.textAlign||(w.textAlign=c.textAlign)),A=g+f+P,T=d.x,E=d.y;s.setWidth(this.width),_?k>0&&T+A+u>this.right&&(E=d.y+=y,d.line++,T=d.x=Z(a,this.left+u,this.right-i[d.line])):k>0&&E+y>this.bottom&&(T=d.x=T+e[d.line].width+u,d.line++,E=d.y=Z(a,this.top+x+u,this.bottom-e[d.line].height));let V=s.x(T);if(m(V,E,w),T=Es(C,T+g+f,_?T+A:this.right,t.rtl),v(s.x(T),E,w),_)d.x+=A+u;else if(typeof w.text!="string"){let G=l.lineHeight;d.y+=lr(w,G)}else d.y+=y}),xi(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=K(e.font),o=J(e.padding);if(!e.display)return;let a=Xt(t.rtl,this.left,this.width),c=this.ctx,r=e.position,s=i.size/2,l=o.top+s,u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=Z(t.align,h,this.right-f);else{let g=this.columnSizes.reduce((p,b)=>Math.max(p,b.height),0);u=l+Z(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}let d=Z(r,h,h+f);c.textAlign=a.textAlign(gn(r)),c.textBaseline="middle",c.strokeStyle=e.color,c.fillStyle=e.color,c.font=i.string,Wt(c,e.text,d,u,i)}_computeTitleHeight(){let t=this.options.title,e=K(t.font),i=J(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,o,a;if(bt(t,this.left,this.right)&&bt(e,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(o=a[i],bt(t,o.left,o.left+o.width)&&bt(e,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!mu(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let o=this._hoveredItem,a=fu(o,i);o&&!a&&N(e.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!a&&N(e.onHover,[t,i,this],this)}else i&&N(e.onClick,[t,i,this],this)}};function du(n,t,e,i,o){let a=gu(i,n,t,e),c=pu(o,i,t.lineHeight);return{itemWidth:a,itemHeight:c}}function gu(n,t,e,i){let o=n.text;return o&&typeof o!="string"&&(o=o.reduce((a,c)=>a.length>c.length?a:c)),t+e.size/2+i.measureText(o).width}function pu(n,t,e){let i=n;return typeof t.text!="string"&&(i=lr(t,e)),i}function lr(n,t){let e=n.text?n.text.length+.5:0;return t*e}function mu(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var bu={id:"legend",_element:zn,start(n,t,e){let i=n.legend=new zn({ctx:n.ctx,options:e,chart:n});tt.configure(n,i,e),tt.addBox(n,i)},stop(n){tt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;tt.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,o=e.chart;o.isDatasetVisible(i)?(o.hide(i),t.hidden=!0):(o.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:o,color:a,useBorderRadius:c,borderRadius:r}}=n.legend.options;return n._getSortedDatasetMetas().map(s=>{let l=s.controller.getStyle(e?0:void 0),u=J(l.borderWidth);return{text:t[s.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:o||l.textAlign,borderRadius:c&&(r||l.borderRadius),datasetIndex:s.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Qe=class extends lt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let o=W(i.text)?i.text.length:1;this._padding=J(i.padding);let a=o*K(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:o,right:a,options:c}=this,r=c.align,s=0,l,u,h;return this.isHorizontal()?(u=Z(r,i,a),h=e+t,l=a-i):(c.position==="left"?(u=i+t,h=Z(r,o,e),s=q*-.5):(u=a-t,h=Z(r,e,o),s=q*.5),l=o-e),{titleX:u,titleY:h,maxWidth:l,rotation:s}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=K(e.font),a=i.lineHeight/2+this._padding.top,{titleX:c,titleY:r,maxWidth:s,rotation:l}=this._drawArgs(a);Wt(t,e.text,0,0,i,{color:e.color,maxWidth:s,rotation:l,textAlign:gn(e.align),textBaseline:"middle",translation:[c,r]})}};function vu(n,t){let e=new Qe({ctx:n.ctx,options:t,chart:n});tt.configure(n,e,t),tt.addBox(n,e),n.titleBlock=e}var _u={id:"title",_element:Qe,start(n,t,e){vu(n,e)},stop(n){let t=n.titleBlock;tt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;tt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Pn=new WeakMap,xu={id:"subtitle",start(n,t,e){let i=new Qe({ctx:n.ctx,options:e,chart:n});tt.configure(n,i,e),tt.addBox(n,i),Pn.set(n,i)},stop(n){tt.removeBox(n,Pn.get(n)),Pn.delete(n)},beforeUpdate(n,t,e){let i=Pn.get(n);tt.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Se={average(n){if(!n.length)return!1;let t,e,i=0,o=0,a=0;for(t=0,e=n.length;t<e;++t){let c=n[t].element;if(c&&c.hasValue()){let r=c.tooltipPosition();i+=r.x,o+=r.y,++a}}return{x:i/a,y:o/a}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,o=Number.POSITIVE_INFINITY,a,c,r;for(a=0,c=n.length;a<c;++a){let s=n[a].element;if(s&&s.hasValue()){let l=s.getCenterPoint(),u=cn(t,l);u<o&&(o=u,r=s)}}if(r){let s=r.tooltipPosition();e=s.x,i=s.y}return{x:e,y:i}}};function vt(n,t){return t&&(W(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function At(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yu(n,t){let{element:e,datasetIndex:i,index:o}=t,a=n.getDatasetMeta(i).controller,{label:c,value:r}=a.getLabelAndValue(o);return{chart:n,label:c,parsed:a.getParsed(o),raw:n.data.datasets[i].data[o],formattedValue:r,dataset:a.getDataset(),dataIndex:o,datasetIndex:i,element:e}}function Do(n,t){let e=n.chart.ctx,{body:i,footer:o,title:a}=n,{boxWidth:c,boxHeight:r}=t,s=K(t.bodyFont),l=K(t.titleFont),u=K(t.footerFont),h=a.length,f=o.length,d=i.length,g=J(t.padding),p=g.height,b=0,m=i.reduce((x,y)=>x+y.before.length+y.lines.length+y.after.length,0);if(m+=n.beforeBody.length+n.afterBody.length,h&&(p+=h*l.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),m){let x=t.displayColors?Math.max(r,s.lineHeight):s.lineHeight;p+=d*x+(m-d)*s.lineHeight+(m-1)*t.bodySpacing}f&&(p+=t.footerMarginTop+f*u.lineHeight+(f-1)*t.footerSpacing);let v=0,_=function(x){b=Math.max(b,e.measureText(x).width+v)};return e.save(),e.font=l.string,B(n.title,_),e.font=s.string,B(n.beforeBody.concat(n.afterBody),_),v=t.displayColors?c+2+t.boxPadding:0,B(i,x=>{B(x.before,_),B(x.lines,_),B(x.after,_)}),v=0,e.font=u.string,B(n.footer,_),e.restore(),b+=g.width,{width:b,height:p}}function wu(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function ku(n,t,e,i){let{x:o,width:a}=i,c=e.caretSize+e.caretPadding;if(n==="left"&&o+a+c>t.width||n==="right"&&o-a-c<0)return!0}function Pu(n,t,e,i){let{x:o,width:a}=e,{width:c,chartArea:{left:r,right:s}}=n,l="center";return i==="center"?l=o<=(r+s)/2?"left":"right":o<=a/2?l="left":o>=c-a/2&&(l="right"),ku(l,n,t,e)&&(l="center"),l}function Mo(n,t,e){let i=e.yAlign||t.yAlign||wu(n,e);return{xAlign:e.xAlign||t.xAlign||Pu(n,t,e,i),yAlign:i}}function Cu(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function Tu(n,t,e){let{y:i,height:o}=n;return t==="top"?i+=e:t==="bottom"?i-=o+e:i-=o/2,i}function Ro(n,t,e,i){let{caretSize:o,caretPadding:a,cornerRadius:c}=n,{xAlign:r,yAlign:s}=e,l=o+a,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:d}=St(c),g=Cu(t,r),p=Tu(t,s,l);return s==="center"?r==="left"?g+=l:r==="right"&&(g-=l):r==="left"?g-=Math.max(u,f)+o:r==="right"&&(g+=Math.max(h,d)+o),{x:Q(g,0,i.width-t.width),y:Q(p,0,i.height-t.height)}}function Cn(n,t,e){let i=J(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function Io(n){return vt([],At(n))}function Ou(n,t,e){return Tt(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function zo(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var cr={beforeTitle:mt,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:mt,beforeBody:mt,beforeLabel:mt,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return F(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:mt,afterBody:mt,beforeFooter:mt,footer:mt,afterFooter:mt};function st(n,t,e,i){let o=n[t].call(e,i);return typeof o>"u"?cr[t].call(e,i):o}var Ge=class extends lt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&e.options.animation&&i.animations,a=new En(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=Ou(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){let{callbacks:i}=e,o=st(i,"beforeTitle",this,t),a=st(i,"title",this,t),c=st(i,"afterTitle",this,t),r=[];return r=vt(r,At(o)),r=vt(r,At(a)),r=vt(r,At(c)),r}getBeforeBody(t,e){return Io(st(e.callbacks,"beforeBody",this,t))}getBody(t,e){let{callbacks:i}=e,o=[];return B(t,a=>{let c={before:[],lines:[],after:[]},r=zo(i,a);vt(c.before,At(st(r,"beforeLabel",this,a))),vt(c.lines,st(r,"label",this,a)),vt(c.after,At(st(r,"afterLabel",this,a))),o.push(c)}),o}getAfterBody(t,e){return Io(st(e.callbacks,"afterBody",this,t))}getFooter(t,e){let{callbacks:i}=e,o=st(i,"beforeFooter",this,t),a=st(i,"footer",this,t),c=st(i,"afterFooter",this,t),r=[];return r=vt(r,At(o)),r=vt(r,At(a)),r=vt(r,At(c)),r}_createItems(t){let e=this._active,i=this.chart.data,o=[],a=[],c=[],r=[],s,l;for(s=0,l=e.length;s<l;++s)r.push(yu(this.chart,e[s]));return t.filter&&(r=r.filter((u,h,f)=>t.filter(u,h,f,i))),t.itemSort&&(r=r.sort((u,h)=>t.itemSort(u,h,i))),B(r,u=>{let h=zo(t.callbacks,u);o.push(st(h,"labelColor",this,u)),a.push(st(h,"labelPointStyle",this,u)),c.push(st(h,"labelTextColor",this,u))}),this.labelColors=o,this.labelPointStyles=a,this.labelTextColors=c,this.dataPoints=r,r}update(t,e){let i=this.options.setContext(this.getContext()),o=this._active,a,c=[];if(!o.length)this.opacity!==0&&(a={opacity:0});else{let r=Se[i.position].call(this,o,this._eventPosition);c=this._createItems(i),this.title=this.getTitle(c,i),this.beforeBody=this.getBeforeBody(c,i),this.body=this.getBody(c,i),this.afterBody=this.getAfterBody(c,i),this.footer=this.getFooter(c,i);let s=this._size=Do(this,i),l=Object.assign({},r,s),u=Mo(this.chart,i,l),h=Ro(i,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,a={opacity:1,x:h.x,y:h.y,width:s.width,height:s.height,caretX:r.x,caretY:r.y}}this._tooltipItems=c,this.$context=void 0,a&&this._resolveAnimations().update(this,a),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,o){let a=this.getCaretPosition(t,i,o);e.lineTo(a.x1,a.y1),e.lineTo(a.x2,a.y2),e.lineTo(a.x3,a.y3)}getCaretPosition(t,e,i){let{xAlign:o,yAlign:a}=this,{caretSize:c,cornerRadius:r}=i,{topLeft:s,topRight:l,bottomLeft:u,bottomRight:h}=St(r),{x:f,y:d}=t,{width:g,height:p}=e,b,m,v,_,x,y;return a==="center"?(x=d+p/2,o==="left"?(b=f,m=b-c,_=x+c,y=x-c):(b=f+g,m=b+c,_=x-c,y=x+c),v=b):(o==="left"?m=f+Math.max(s,u)+c:o==="right"?m=f+g-Math.max(l,h)-c:m=this.caretX,a==="top"?(_=d,x=_-c,b=m-c,v=m+c):(_=d+p,x=_+c,b=m+c,v=m-c),y=_),{x1:b,x2:m,x3:v,y1:_,y2:x,y3:y}}drawTitle(t,e,i){let o=this.title,a=o.length,c,r,s;if(a){let l=Xt(i.rtl,this.x,this.width);for(t.x=Cn(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",c=K(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=c.string,s=0;s<a;++s)e.fillText(o[s],l.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+r,s+1===a&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,o,a){let c=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:s,boxWidth:l,boxPadding:u}=a,h=K(a.bodyFont),f=Cn(this,"left",a),d=o.x(f),g=s<h.lineHeight?(h.lineHeight-s)/2:0,p=e.y+g;if(a.usePointStyle){let b={radius:Math.min(l,s)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},m=o.leftForLtr(d,l)+l/2,v=p+s/2;t.strokeStyle=a.multiKeyBackground,t.fillStyle=a.multiKeyBackground,mn(t,b,m,v),t.strokeStyle=c.borderColor,t.fillStyle=c.backgroundColor,mn(t,b,m,v)}else{t.lineWidth=I(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,t.strokeStyle=c.borderColor,t.setLineDash(c.borderDash||[]),t.lineDashOffset=c.borderDashOffset||0;let b=o.leftForLtr(d,l-u),m=o.leftForLtr(o.xPlus(d,1),l-u-2),v=St(c.borderRadius);Object.values(v).some(_=>_!==0)?(t.beginPath(),t.fillStyle=a.multiKeyBackground,fe(t,{x:b,y:p,w:l,h:s,radius:v}),t.fill(),t.stroke(),t.fillStyle=c.backgroundColor,t.beginPath(),fe(t,{x:m,y:p+1,w:l-2,h:s-2,radius:v}),t.fill()):(t.fillStyle=a.multiKeyBackground,t.fillRect(b,p,l,s),t.strokeRect(b,p,l,s),t.fillStyle=c.backgroundColor,t.fillRect(m,p+1,l-2,s-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){let{body:o}=this,{bodySpacing:a,bodyAlign:c,displayColors:r,boxHeight:s,boxWidth:l,boxPadding:u}=i,h=K(i.bodyFont),f=h.lineHeight,d=0,g=Xt(i.rtl,this.x,this.width),p=function(P){e.fillText(P,g.x(t.x+d),t.y+f/2),t.y+=f+a},b=g.textAlign(c),m,v,_,x,y,w,k;for(e.textAlign=c,e.textBaseline="middle",e.font=h.string,t.x=Cn(this,b,i),e.fillStyle=i.bodyColor,B(this.beforeBody,p),d=r&&b!=="right"?c==="center"?l/2+u:l+2+u:0,x=0,w=o.length;x<w;++x){for(m=o[x],v=this.labelTextColors[x],e.fillStyle=v,B(m.before,p),_=m.lines,r&&_.length&&(this._drawColorBox(e,t,x,g,i),f=Math.max(h.lineHeight,s)),y=0,k=_.length;y<k;++y)p(_[y]),f=h.lineHeight;B(m.after,p)}d=0,f=h.lineHeight,B(this.afterBody,p),t.y-=a}drawFooter(t,e,i){let o=this.footer,a=o.length,c,r;if(a){let s=Xt(i.rtl,this.x,this.width);for(t.x=Cn(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=s.textAlign(i.footerAlign),e.textBaseline="middle",c=K(i.footerFont),e.fillStyle=i.footerColor,e.font=c.string,r=0;r<a;++r)e.fillText(o[r],s.x(t.x),t.y+c.lineHeight/2),t.y+=c.lineHeight+i.footerSpacing}}drawBackground(t,e,i,o){let{xAlign:a,yAlign:c}=this,{x:r,y:s}=t,{width:l,height:u}=i,{topLeft:h,topRight:f,bottomLeft:d,bottomRight:g}=St(o.cornerRadius);e.fillStyle=o.backgroundColor,e.strokeStyle=o.borderColor,e.lineWidth=o.borderWidth,e.beginPath(),e.moveTo(r+h,s),c==="top"&&this.drawCaret(t,e,i,o),e.lineTo(r+l-f,s),e.quadraticCurveTo(r+l,s,r+l,s+f),c==="center"&&a==="right"&&this.drawCaret(t,e,i,o),e.lineTo(r+l,s+u-g),e.quadraticCurveTo(r+l,s+u,r+l-g,s+u),c==="bottom"&&this.drawCaret(t,e,i,o),e.lineTo(r+d,s+u),e.quadraticCurveTo(r,s+u,r,s+u-d),c==="center"&&a==="left"&&this.drawCaret(t,e,i,o),e.lineTo(r,s+h),e.quadraticCurveTo(r,s,r+h,s),e.closePath(),e.fill(),o.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,i=this.$animations,o=i&&i.x,a=i&&i.y;if(o||a){let c=Se[t.position].call(this,this._active,this._eventPosition);if(!c)return;let r=this._size=Do(this,t),s=Object.assign({},c,this._size),l=Mo(e,t,s),u=Ro(t,s,l,e);(o._to!==u.x||a._to!==u.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=r.width,this.height=r.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(e);let o={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let c=J(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(a,t,o,e),_i(t,e.textDirection),a.y+=c.top,this.drawTitle(a,t,e),this.drawBody(a,t,e),this.drawFooter(a,t,e),xi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let i=this._active,o=t.map(({datasetIndex:r,index:s})=>{let l=this.chart.getDatasetMeta(r);if(!l)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:l.data[s],index:s}}),a=!De(i,o),c=this._positionChanged(o,e);(a||c)&&(this._active=o,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,a=this._active||[],c=this._getActiveElements(t,a,e,i),r=this._positionChanged(c,t),s=e||!De(c,a)||r;return s&&(this._active=c,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,i,o){let a=this.options;if(t.type==="mouseout")return[];if(!o)return e;let c=this.chart.getElementsAtEventForMode(t,a.mode,a,i);return a.reverse&&c.reverse(),c}_positionChanged(t,e){let{caretX:i,caretY:o,options:a}=this,c=Se[a.position].call(this,t,e);return c!==!1&&(i!==c.x||o!==c.y)}};O(Ge,"positioners",Se);var Au={id:"tooltip",_element:Ge,positioners:Se,afterInit(n,t,e){e&&(n.tooltip=new Ge({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:cr},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Eu=Object.freeze({__proto__:null,Colors:Wc,Decimation:Yc,Filler:hu,Legend:bu,SubTitle:xu,Title:_u,Tooltip:Au}),Lu=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Du(n,t,e,i){let o=n.indexOf(t);if(o===-1)return Lu(n,t,e,i);let a=n.lastIndexOf(t);return o!==a?e:o}var Mu=(n,t)=>n===null?null:Q(Math.round(n),0,t);function Fo(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var qe=class extends Lt{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let i=this.getLabels();for(let{index:o,label:a}of e)i[o]===a&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(F(t))return null;let i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:Du(i,t,D(e,t),this._addedLabels),Mu(e,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,o=[],a=this.getLabels();a=t===0&&e===a.length-1?a:a.slice(t,e+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let c=t;c<=e;c++)o.push({value:c});return o}getLabelForValue(t){return Fo.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}};O(qe,"id","category"),O(qe,"defaults",{ticks:{callback:Fo}});function Ru(n,t){let e=[],{bounds:o,step:a,min:c,max:r,precision:s,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,d=a||1,g=u-1,{min:p,max:b}=t,m=!F(c),v=!F(r),_=!F(l),x=(b-p)/(h+1),y=Jn((b-p)/g/d)*d,w,k,P,C;if(y<1e-14&&!m&&!v)return[{value:p},{value:b}];C=Math.ceil(b/y)-Math.floor(p/y),C>g&&(y=Jn(C*y/g/d)*d),F(s)||(w=Math.pow(10,s),y=Math.ceil(y*w)/w),o==="ticks"?(k=Math.floor(p/y)*y,P=Math.ceil(b/y)*y):(k=p,P=b),m&&v&&a&&ws((r-c)/a,y/1e3)?(C=Math.round(Math.min((r-c)/y,u)),y=(r-c)/C,k=c,P=r):_?(k=m?c:k,P=v?r:P,C=l-1,y=(P-k)/C):(C=(P-k)/y,ce(C,Math.round(C),y/1e3)?C=Math.round(C):C=Math.ceil(C));let A=Math.max(ti(y),ti(k));w=Math.pow(10,F(s)?A:s),k=Math.round(k*w)/w,P=Math.round(P*w)/w;let T=0;for(m&&(f&&k!==c?(e.push({value:c}),k<c&&T++,ce(Math.round((k+T*y)*w)/w,c,Bo(c,x,n))&&T++):k<c&&T++);T<C;++T)e.push({value:Math.round((k+T*y)*w)/w});return v&&f&&P!==r?e.length&&ce(e[e.length-1].value,r,Bo(r,x,n))?e[e.length-1].value=r:e.push({value:r}):(!v||P===r)&&e.push({value:P}),e}function Bo(n,t,{horizontal:e,minRotation:i}){let o=ht(i),a=(e?Math.sin(o):Math.cos(o))||.001,c=.75*t*(""+n).length;return Math.min(t/a,c)}var Pe=class extends Lt{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return F(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:o,max:a}=this,c=s=>o=e?o:s,r=s=>a=i?a:s;if(t){let s=gt(o),l=gt(a);s<0&&l<0?r(0):s>0&&l>0&&c(0)}if(o===a){let s=a===0?1:Math.abs(a*.05);r(a+s),t||c(o-s)}this.min=o,this.max=a}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),e=e||11),e&&(o=Math.min(e,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let o={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},a=this._range||this,c=Ru(o,a);return t.bounds==="ticks"&&jn(c,this,"value"),t.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let o=(i-e)/Math.max(t.length-1,1)/2;e-=o,i+=o}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return he(t,this.chart.options.locale,this.options.ticks.format)}},$e=class extends Pe{determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Y(t)?t:0,this.max=Y(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=ht(this.options.ticks.minRotation),o=(t?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,a.lineHeight/o))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}};O($e,"id","linear"),O($e,"defaults",{ticks:{callback:Me.formatters.numeric}});var Ze=n=>Math.floor(Pt(n)),Zt=(n,t)=>Math.pow(10,Ze(n)+t);function Ho(n){return n/Math.pow(10,Ze(n))===1}function Vo(n,t,e){let i=Math.pow(10,e),o=Math.floor(n/i);return Math.ceil(t/i)-o}function Iu(n,t){let e=t-n,i=Ze(e);for(;Vo(n,t,i)>10;)i++;for(;Vo(n,t,i)<10;)i--;return Math.min(i,Ze(n))}function zu(n,{min:t,max:e}){t=it(n.min,t);let i=[],o=Ze(t),a=Iu(t,e),c=a<0?Math.pow(10,Math.abs(a)):1,r=Math.pow(10,a),s=o>a?Math.pow(10,o):0,l=Math.round((t-s)*c)/c,u=Math.floor((t-s)/r/10)*r*10,h=Math.floor((l-u)/Math.pow(10,a)),f=it(n.min,Math.round((s+u+h*Math.pow(10,a))*c)/c);for(;f<e;)i.push({value:f,major:Ho(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,c=a>=0?1:c),f=Math.round((s+u+h*Math.pow(10,a))*c)/c;let d=it(n.max,f);return i.push({value:d,major:Ho(d),significand:h}),i}var Ye=class extends Lt{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=Pe.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Y(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Y(t)?Math.max(0,t):null,this.max=Y(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Y(this._userMin)&&(this.min=t===Zt(this.min,0)?Zt(this.min,-1):Zt(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,o=this.max,a=r=>i=t?i:r,c=r=>o=e?o:r;i===o&&(i<=0?(a(1),c(10)):(a(Zt(i,-1)),c(Zt(o,1)))),i<=0&&a(Zt(o,-1)),o<=0&&c(Zt(i,1)),this.min=i,this.max=o}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=zu(e,this);return t.bounds==="ticks"&&jn(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":he(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=Pt(t),this._valueRange=Pt(this.max)-Pt(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Pt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};O(Ye,"id","logarithmic"),O(Ye,"defaults",{ticks:{callback:Me.formatters.logarithmic,major:{enabled:!0}}});function qi(n){let t=n.ticks;if(t.display&&n.display){let e=J(t.backdropPadding);return D(t.font&&t.font.size,U.font.size)+e.height}return 0}function Fu(n,t,e){return e=W(e)?e:[e],{w:Ms(n,t.string,e),h:e.length*t.lineHeight}}function No(n,t,e,i,o){return n===i||n===o?{start:t-e/2,end:t+e/2}:n<i||n>o?{start:t-e,end:t}:{start:t,end:t+e}}function Bu(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],o=[],a=n._pointLabels.length,c=n.options.pointLabels,r=c.centerPointLabels?q/a:0;for(let s=0;s<a;s++){let l=c.setContext(n.getPointLabelContext(s));o[s]=l.padding;let u=n.getPointPosition(s,n.drawingArea+o[s],r),h=K(l.font),f=Fu(n.ctx,h,n._pointLabels[s]);i[s]=f;let d=nt(n.getIndexAngle(s)+r),g=Math.round(fn(d)),p=No(g,u.x,f.w,0,180),b=No(g,u.y,f.h,90,270);Hu(e,t,d,p,b)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=Vu(n,i,o)}function Hu(n,t,e,i,o){let a=Math.abs(Math.sin(e)),c=Math.abs(Math.cos(e)),r=0,s=0;i.start<t.l?(r=(t.l-i.start)/a,n.l=Math.min(n.l,t.l-r)):i.end>t.r&&(r=(i.end-t.r)/a,n.r=Math.max(n.r,t.r+r)),o.start<t.t?(s=(t.t-o.start)/c,n.t=Math.min(n.t,t.t-s)):o.end>t.b&&(s=(o.end-t.b)/c,n.b=Math.max(n.b,t.b+s))}function Vu(n,t,e){let i=[],o=n._pointLabels.length,a=n.options,c=qi(a)/2,r=n.drawingArea,s=a.pointLabels.centerPointLabels?q/o:0;for(let l=0;l<o;l++){let u=n.getPointPosition(l,r+c+e[l],s),h=Math.round(fn(nt(u.angle+$))),f=t[l],d=Su(u.y,f.h,h),g=Nu(h),p=Wu(u.x,f.w,g);i.push({x:u.x,y:d,textAlign:g,left:p,top:d,right:p+f.w,bottom:d+f.h})}return i}function Nu(n){return n===0||n===180?"center":n<180?"left":"right"}function Wu(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function Su(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function qu(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let o=t-1;o>=0;o--){let a=i.setContext(n.getPointLabelContext(o)),c=K(a.font),{x:r,y:s,textAlign:l,left:u,top:h,right:f,bottom:d}=n._pointLabelItems[o],{backdropColor:g}=a;if(!F(g)){let p=St(a.borderRadius),b=J(a.backdropPadding);e.fillStyle=g;let m=u-b.left,v=h-b.top,_=f-u+b.width,x=d-h+b.height;Object.values(p).some(y=>y!==0)?(e.beginPath(),fe(e,{x:m,y:v,w:_,h:x,radius:p}),e.fill()):e.fillRect(m,v,_,x)}Wt(e,n._pointLabels[o],r,s+c.lineHeight/2,c,{color:a.color,textAlign:l,textBaseline:"middle"})}}function ur(n,t,e,i){let{ctx:o}=n;if(e)o.arc(n.xCenter,n.yCenter,t,0,S);else{let a=n.getPointPosition(0,t);o.moveTo(a.x,a.y);for(let c=1;c<i;c++)a=n.getPointPosition(c,t),o.lineTo(a.x,a.y)}}function $u(n,t,e,i,o){let a=n.ctx,c=t.circular,{color:r,lineWidth:s}=t;!c&&!i||!r||!s||e<0||(a.save(),a.strokeStyle=r,a.lineWidth=s,a.setLineDash(o.dash),a.lineDashOffset=o.dashOffset,a.beginPath(),ur(n,e,c,i),a.closePath(),a.stroke(),a.restore())}function Yu(n,t,e){return Tt(n,{label:e,index:t,type:"pointLabel"})}var Jt=class extends Pe{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=J(qi(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=Y(t)&&!isNaN(t)?t:0,this.max=Y(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/qi(this.options))}generateTickLabels(t){Pe.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let o=N(this.options.pointLabels.callback,[e,i],this);return o||o===0?o:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?Bu(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,o){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-o)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,o))}getIndexAngle(t){let e=S/(this._pointLabels.length||1),i=this.options.startAngle||0;return nt(t*e+ht(i))}getDistanceFromCenterForValue(t){if(F(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(F(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return Yu(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let o=this.getIndexAngle(t)-$+i;return{x:Math.cos(o)*e+this.xCenter,y:Math.sin(o)*e+this.yCenter,angle:o}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:o,bottom:a}=this._pointLabelItems[t];return{left:e,top:i,right:o,bottom:a}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),ur(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:o,border:a}=e,c=this._pointLabels.length,r,s,l;if(e.pointLabels.display&&qu(this,c),o.display&&this.ticks.forEach((u,h)=>{if(h!==0){s=this.getDistanceFromCenterForValue(u.value);let f=this.getContext(h),d=o.setContext(f),g=a.setContext(f);$u(this,d,s,c,g)}}),i.display){for(t.save(),r=c-1;r>=0;r--){let u=i.setContext(this.getPointLabelContext(r)),{color:h,lineWidth:f}=u;!f||!h||(t.lineWidth=f,t.strokeStyle=h,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(r,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let o=this.getIndexAngle(0),a,c;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,s)=>{if(s===0&&!e.reverse)return;let l=i.setContext(this.getContext(s)),u=K(l.font);if(a=this.getDistanceFromCenterForValue(this.ticks[s].value),l.showLabelBackdrop){t.font=u.string,c=t.measureText(r.label).width,t.fillStyle=l.backdropColor;let h=J(l.backdropPadding);t.fillRect(-c/2-h.left,-a-u.size/2-h.top,c+h.width,u.size+h.height)}Wt(t,r.label,0,-a,u,{color:l.color})}),t.restore()}drawTitle(){}};O(Jt,"id","radialLinear"),O(Jt,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Me.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),O(Jt,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),O(Jt,"descriptors",{angleLines:{_fallback:"grid"}});var Fn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ot=Object.keys(Fn);function Uu(n,t){return n-t}function Wo(n,t){if(F(t))return null;let e=n._adapter,{parser:i,round:o,isoWeekday:a}=n._parseOpts,c=t;return typeof i=="function"&&(c=i(c)),Y(c)||(c=typeof i=="string"?e.parse(c,i):e.parse(c)),c===null?null:(o&&(c=o==="week"&&(Kt(a)||a===!0)?e.startOf(c,"isoWeek",a):e.startOf(c,o)),+c)}function So(n,t,e,i){let o=ot.length;for(let a=ot.indexOf(n);a<o-1;++a){let c=Fn[ot[a]],r=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((e-t)/(r*c.size))<=i)return ot[a]}return ot[o-1]}function Gu(n,t,e,i,o){for(let a=ot.length-1;a>=ot.indexOf(e);a--){let c=ot[a];if(Fn[c].common&&n._adapter.diff(o,i,c)>=t-1)return c}return ot[e?ot.indexOf(e):0]}function Ku(n){for(let t=ot.indexOf(n)+1,e=ot.length;t<e;++t)if(Fn[ot[t]].common)return ot[t]}function qo(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:o}=dn(e,t),a=e[i]>=t?e[i]:e[o];n[a]=!0}}function Xu(n,t,e,i){let o=n._adapter,a=+o.startOf(t[0].value,i),c=t[t.length-1].value,r,s;for(r=a;r<=c;r=+o.add(r,1,i))s=e[r],s>=0&&(t[s].major=!0);return t}function $o(n,t,e){let i=[],o={},a=t.length,c,r;for(c=0;c<a;++c)r=t[c],o[r]=c,i.push({value:r,major:!1});return a===0||!e?i:Xu(n,i,o,e)}var te=class extends Lt{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),o=this._adapter=new fl._date(t.adapters.date);o.init(e),le(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Wo(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:o,max:a,minDefined:c,maxDefined:r}=this.getUserBounds();function s(l){!c&&!isNaN(l.min)&&(o=Math.min(o,l.min)),!r&&!isNaN(l.max)&&(a=Math.max(a,l.max))}(!c||!r)&&(s(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&s(this.getMinMax(!1))),o=Y(o)&&!isNaN(o)?o:+e.startOf(Date.now(),i),a=Y(a)&&!isNaN(a)?a:+e.endOf(Date.now(),i)+1,this.min=Math.min(o,a-1),this.max=Math.max(o+1,a)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let a=this.min,c=this.max,r=Cs(o,a,c);return this._unit=e.unit||(i.autoSkip?So(e.minUnit,this.min,this.max,this._getLabelCapacity(a)):Gu(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Ku(this._unit),this.initOffsets(o),t.reverse&&r.reverse(),$o(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,o,a;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?e=1-o:e=(this.getDecimalForValue(t[1])-o)/2,a=this.getDecimalForValue(t[t.length-1]),t.length===1?i=a:i=(a-this.getDecimalForValue(t[t.length-2]))/2);let c=t.length<3?.5:.25;e=Q(e,0,c),i=Q(i,0,c),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){let t=this._adapter,e=this.min,i=this.max,o=this.options,a=o.time,c=a.unit||So(a.minUnit,e,i,this._getLabelCapacity(e)),r=D(o.ticks.stepSize,1),s=c==="week"?a.isoWeekday:!1,l=Kt(s)||s===!0,u={},h=e,f,d;if(l&&(h=+t.startOf(h,"isoWeek",s)),h=+t.startOf(h,l?"day":c),t.diff(i,e,c)>1e5*r)throw new Error(e+" and "+i+" are too far apart with stepSize of "+r+" "+c);let g=o.ticks.source==="data"&&this.getDataTimestamps();for(f=h,d=0;f<i;f=+t.add(f,r,c),d++)qo(u,f,g);return(f===i||o.bounds==="ticks"||d===1)&&qo(u,f,g),Object.keys(u).sort((p,b)=>p-b).map(p=>+p)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let o=this.options.time.displayFormats,a=this._unit,c=e||o[a];return this._adapter.format(t,c)}_tickFormatFunction(t,e,i,o){let a=this.options,c=a.ticks.callback;if(c)return N(c,[t,e,i],this);let r=a.time.displayFormats,s=this._unit,l=this._majorUnit,u=s&&r[s],h=l&&r[l],f=i[e],d=l&&h&&f&&f.major;return this._adapter.format(t,o||(d?h:u))}generateTickLabels(t){let e,i,o;for(e=0,i=t.length;e<i;++e)o=t[e],o.label=this._tickFormatFunction(o.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,o=ht(this.isHorizontal()?e.maxRotation:e.minRotation),a=Math.cos(o),c=Math.sin(o),r=this._resolveTickFontOptions(0).size;return{w:i*a+r*c,h:i*c+r*a}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,o=i[e.unit]||i.millisecond,a=this._tickFormatFunction(t,0,$o(this,[t],this._majorUnit),o),c=this._getLabelSize(a),r=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return r>0?r:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(e=0,i=o.length;e<i;++e)t=t.concat(o[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],e,i;if(t.length)return t;let o=this.getLabels();for(e=0,i=o.length;e<i;++e)t.push(Wo(this,o[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return ii(t.sort(Uu))}};O(te,"id","time"),O(te,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Tn(n,t,e){let i=0,o=n.length-1,a,c,r,s;e?(t>=n[i].pos&&t<=n[o].pos&&({lo:i,hi:o}=pt(n,"pos",t)),{pos:a,time:r}=n[i],{pos:c,time:s}=n[o]):(t>=n[i].time&&t<=n[o].time&&({lo:i,hi:o}=pt(n,"time",t)),{time:a,pos:r}=n[i],{time:c,pos:s}=n[o]);let l=c-a;return l?r+(s-r)*(t-a)/l:r}var Ue=class extends te{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Tn(e,this.min),this._tableRange=Tn(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,o=[],a=[],c,r,s,l,u;for(c=0,r=t.length;c<r;++c)l=t[c],l>=e&&l<=i&&o.push(l);if(o.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(c=0,r=o.length;c<r;++c)u=o[c+1],s=o[c-1],l=o[c],Math.round((u+s)/2)!==l&&a.push({time:l,pos:c/(r-1)});return a}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Tn(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Tn(this._table,i*this._tableRange+this._minPos,!0)}};O(Ue,"id","timeseries"),O(Ue,"defaults",te.defaults);var Qu=Object.freeze({__proto__:null,CategoryScale:qe,LinearScale:$e,LogarithmicScale:Ye,RadialLinearScale:Jt,TimeScale:te,TimeSeriesScale:Ue}),hr=[hl,zc,Eu,Qu];ft.register(...hr);var Yi=ft;function Zu(n,t){let e=n.insertCell(-1),i=document.createElement("BUTTON"),o=document.createElement("SPAN");o.classList.add("material-symbols-outlined"),o.innerText="delete",i.appendChild(o),i.classList.add("pure-button"),e.appendChild(i),i.addEventListener("click",function(a){let c=n.rowIndex;t.deleteRow(c-1)})}function Gi(n,t,e){let i=n.insertRow(-1);for(let o of t){let a=i.insertCell(-1);a.contentEditable="true",a.innerText=e[o]}Zu(i,n)}function fr(n,t,e,i){let o=n.tHead.rows[0].insertCell(-1),a=document.createElement("BUTTON"),c=document.createElement("SPAN");c.classList.add("material-symbols-outlined"),c.innerText="add",a.appendChild(c),a.classList.add("button-success","pure-button"),o.appendChild(a),a.addEventListener("click",function(){Gi(t,e,i)})}function Ui(n){let t=[];for(let e of n.rows)t.push({name:e.cells[0].innerText,guestsAverage:Number(e.cells[1].innerText),guestsCV:Number(e.cells[2].innerText),wastePerGuestAverage:Number(e.cells[3].innerText),wastePerGuestCV:Number(e.cells[4].innerText),dinerPerGuestProbability:Number(e.cells[5].innerText)});return t}function dr(n){let t=[],e=0;for(let i of n.rows)t.push({name:i.cells[0].innerText,trueEffectMean:Number(i.cells[1].innerText),trueEffectCV:Number(i.cells[2].innerText),index:e}),e=e+1;return t}function Ju(n,t,e){let i=document.createElement("div"),o=document.createElement("h4");o.innerText="Average Food Wasted: ",i.appendChild(o);let a=document.createElement("table");i.appendChild(a),a.classList.add("pure-table-horizontal"),a.classList.add("pure-table");let c=a.createTHead().insertRow(),r=a.createTBody().insertRow();for(let s of n)c.insertCell().innerText=s.name,r.insertCell().innerText=t.averages[s.name].toFixed(2)+" kg";e.appendChild(i),i.style.margin="0 auto",i.style.width="80%"}function ju(n,t,e){let i=document.createElement("div"),o=document.createElement("h4");o.innerText="Measured effect (% reduction): ",i.appendChild(o);let a=document.createElement("table");i.appendChild(a),a.classList.add("pure-table-horizontal"),a.classList.add("pure-table");let c=a.createTHead().insertRow(),r=a.createTBody().insertRow();for(let s of n)if(c.insertCell().innerText=s.name,s.index===0)r.insertCell().innerText=" / ";else{let l=t.effects[s.index],u=t.averages[n[0].name];if(u===0)r.insertCell().innerText=" ? ";else{let h=-(1-(u-l)/u)*100;r.insertCell().innerText=h.toFixed(2)+"%"}}e.appendChild(i),i.style.margin="0 auto",i.style.width="80%"}function th(n,t,e){let i=document.createElement("div"),o=document.createElement("h4");o.innerText="Significance Test (p-value): ",i.appendChild(o);let a=document.createElement("table");i.appendChild(a),a.classList.add("pure-table-horizontal"),a.classList.add("pure-table");let c=a.createTHead().insertRow(),r=a.createTBody().insertRow();for(let s of n)if(c.insertCell().innerText=s.name,s.index===0)r.insertCell().innerText=" / ";else{let l=t.p_values[s.index],u=l<.05?"green":"red";l=l<.001?"<0.001":l.toFixed(3);let h=document.createElement("span");h.innerText=l,h.style.color=u,r.insertCell().appendChild(h)}e.appendChild(i),i.style.margin="0 auto",i.style.width="80%"}document.addEventListener("DOMContentLoaded",function(n){let t=document.getElementById("hotel_table"),e=["name","guestsAverage","guestsCV","wastePerGuestAverage","wastePerGuestCV","dinerPerGuestProbability"],i=t.getElementsByTagName("tbody")[0];for(let h of Te)Gi(i,e,h);fr(t,i,e,Te[0]),document.getElementById("export-btn").addEventListener("click",function(){let h=Ui(i)});let a=document.getElementById("stimulus_table"),c=["name","trueEffectMean","trueEffectCV"],r=a.getElementsByTagName("tbody")[0];for(let h of ne)Gi(r,c,h);fr(a,r,c,ne[1]);let s=document.getElementById("results"),l=document.getElementById("run_simulation_btn"),u=document.getElementById("run_power_btn");l.addEventListener("click",function(){l.disabled=!0,u.disabled=!0;let h=Number(document.getElementById("weekssampled").value);s.replaceChildren();let f=dr(r),d=Vn(h,Ui(i),je,f);var g=[];for(let R of d)g.push(`<tr> <th> ${R.date} </th> <th> ${R.guests} </th><th> ${R.hotel.name} </th><th> ${R.meal} </th><th> ${R.stimulus.name} </th><th> ${R.totalFoodWasteObserved.toFixed(2)} </th></tr>`);let p=document.createElement("div"),b=document.createElement("h4");b.innerText="Simulated Experiment: ",p.appendChild(b),s.appendChild(p),p.classList.add("clusterize");let m=document.createElement("table"),_=m.createTHead().insertRow(-1);_.insertCell(-1).innerText="Date",_.insertCell(-1).innerText="# of guests",_.insertCell(-1).innerText="Hotel",_.insertCell(-1).innerText="Type of meal",_.insertCell(-1).innerText="Experiment",_.insertCell(-1).innerText="Kg wasted",m.classList.add("pure-table-horizontal"),m.classList.add("pure-table"),p.appendChild(m);let x=document.createElement("div");x.id="scrollAreaObservation",x.classList.add("clusterize-scroll");let y=document.createElement("table"),w=y.createTBody();w.classList.add("clusterize-content"),w.id="contentAreaObservation";let k=document.createElement("tr");k.classList.add("clusterize-no-data");let P=k.insertCell(-1);P.innerText="Loading data...",w.appendChild(k),x.appendChild(y),p.appendChild(x),y.classList.add("pure-table-horizontal"),y.classList.add("pure-table"),m.style.width="100%",y.style.width="100%",p.style.margin="auto";let C=new gr.default({rows:g,scrollId:"scrollAreaObservation",contentId:"contentAreaObservation"}),A=Nn(d,f);Ju(f,A,s),ju(f,A,s),th(f,A,s);let T=Array(f.length),E=0,V=0;for(let R of f)T[R.index]={label:R.name,data:[]};for(let R of d)T[R.stimulus.index].data.push({x:R.guests,y:R.totalFoodWasteObserved});let L={type:"scatter",data:{datasets:T},options:{scales:{x:{type:"linear",position:"bottom",text:"# of Guests"},y:{type:"linear",text:"Food wasted",ticks:{callback:function(R,H,j){return R+" kg"}}}}}},z=document.createElement("canvas");z.id="scatterplot";let M=document.createElement("div");M.appendChild(z),M.style.margin="0 auto",M.style.width="80%",s.appendChild(M),M.scrollIntoView(),new Yi(z,L),l.disabled=!1,u.disabled=!1}),u.addEventListener("click",function(){l.disabled=!0,u.disabled=!0,s.replaceChildren();let h=document.createElement("div");h.id="myProgress";let f=document.createElement("div");f.id="myBar",f.innerText="5%",f.style.width="5%",f.style.height="30px",f.style.backgroundColor="#04AA6D",f.style.textAlign="center",f.style.lineHeight="30px",f.style.color="white",h.appendChild(f),s.appendChild(h),s.scrollIntoView(!1);let d=[],g=dr(r),p=Number(document.getElementById("weekssampled").value),b=Ui(i);for(let _=0;_<100;_++){let x=Vn(p,b,je,g);d.push(Nn(x,g)),f.style.width=`${_+1}%`,f.innerText=`${_+1}%`}console.log("reading documents");let m=["<.01","0.05","0.1","not-significant"],v={};for(let _ of g)if(_.index!=0){v[_.name]={};for(let x of m)v[_.name][x]=0}console.log(d),console.log(v);for(let _ of d)for(let x of g){if(x.index==0)continue;let y=_.p_values[x.index];console.log(`pvalue is ${y}`),y<.01?(console.log("<.01"),v[x.name]["<.01"]=v[x.name]["<.01"]+1):y<.05?(console.log("<.05"),v[x.name]["0.05"]=v[x.name]["0.05"]+1):y<.1?(console.log("<.1"),v[x.name]["0.1"]=v[x.name]["0.1"]+1):v[x.name]["not-significant"]=v[x.name]["not-significant"]+1}for(let _ of g){if(_.index==0)continue;let x=document.createElement("div"),y=document.createElement("h2");y.innerText=`Significance of '${_.name}'`;let w=document.createElement("canvas");x.appendChild(y),x.appendChild(w),w.style.width="100px",w.style.height="100px",x.style.width="500px";let k=[v[_.name]["<.01"],v[_.name]["0.05"],v[_.name]["0.1"],v[_.name]["not-significant"]];console.log(k);let P={labels:m,datasets:[{label:`Significance of '${_.name}'`,data:k,hoverOffset:4}]};new Yi(w,{type:"doughnut",data:P,options:{aspectRatio:1,layout:{padding:{left:0,right:0,top:0,bottom:0}},responsive:!0}}),s.appendChild(x)}l.disabled=!1,u.disabled=!1})});})();
/*! Bundled license information:

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.2
   * https://github.com/kurkle/color#readme
   * (c) 2023 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.segment.js:
  (*!
   * Chart.js v4.2.1
   * https://www.chartjs.org
   * (c) 2023 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/chart.js:
  (*!
   * Chart.js v4.2.1
   * https://www.chartjs.org
   * (c) 2023 Chart.js Contributors
   * Released under the MIT License
   *)
*/
